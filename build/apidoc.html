<div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a

        href="http://github.com/node-xmpp/node-xmpp"

    >node-xmpp (v1.1.0)</a>
</h1>
<h4>XMPP for JavaScript</h4>
<div class="apidocSectionDiv"><a
    href="#apidoc.tableOfContents"
    id="apidoc.tableOfContents"
><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.node-xmpp">module node-xmpp</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Client">
            function <span class="apidocSignatureSpan">node-xmpp.</span>Client
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Client.super_">
            function <span class="apidocSignatureSpan">node-xmpp.</span>Client.super_
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Component">
            function <span class="apidocSignatureSpan">node-xmpp.</span>Component
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Connection">
            function <span class="apidocSignatureSpan">node-xmpp.</span>Connection
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Element">
            function <span class="apidocSignatureSpan">node-xmpp.</span>Element
            <span class="apidocSignatureSpan">(name, attrs)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.IQ">
            function <span class="apidocSignatureSpan">node-xmpp.</span>IQ
            <span class="apidocSignatureSpan">(attrs)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.JID">
            function <span class="apidocSignatureSpan">node-xmpp.</span>JID
            <span class="apidocSignatureSpan">(a, b, c)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.JID.JID">
            function <span class="apidocSignatureSpan">node-xmpp.</span>JID.JID
            <span class="apidocSignatureSpan">(a, b, c)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Message">
            function <span class="apidocSignatureSpan">node-xmpp.</span>Message
            <span class="apidocSignatureSpan">(attrs)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Parser">
            function <span class="apidocSignatureSpan">node-xmpp.</span>Parser
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Parser.super_">
            function <span class="apidocSignatureSpan">node-xmpp.</span>Parser.super_
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Parser.super_.prototype.DefaultParser">
            function <span class="apidocSignatureSpan">node-xmpp.</span>Parser.super_.prototype.DefaultParser
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Presence">
            function <span class="apidocSignatureSpan">node-xmpp.</span>Presence
            <span class="apidocSignatureSpan">(attrs)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Stanza">
            function <span class="apidocSignatureSpan">node-xmpp.</span>Stanza
            <span class="apidocSignatureSpan">(name, attrs)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.StreamParser">
            function <span class="apidocSignatureSpan">node-xmpp.</span>StreamParser
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.createElement">
            function <span class="apidocSignatureSpan">node-xmpp.</span>createElement
            <span class="apidocSignatureSpan">(name, attrs)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.createStanza">
            function <span class="apidocSignatureSpan">node-xmpp.</span>createStanza
            <span class="apidocSignatureSpan">(name, attrs)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.escapeXML">
            function <span class="apidocSignatureSpan">node-xmpp.</span>escapeXML
            <span class="apidocSignatureSpan">(s)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.escapeXMLText">
            function <span class="apidocSignatureSpan">node-xmpp.</span>escapeXMLText
            <span class="apidocSignatureSpan">(s)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.inherits">
            function <span class="apidocSignatureSpan">node-xmpp.</span>inherits
            <span class="apidocSignatureSpan">(ctor, superCtor)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.ltx">
            function <span class="apidocSignatureSpan">node-xmpp.</span>ltx
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.parse">
            function <span class="apidocSignatureSpan">node-xmpp.</span>parse
            <span class="apidocSignatureSpan">(data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.BOSHServer">
            function <span class="apidocSignatureSpan">node-xmpp.</span>server.BOSHServer
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.C2SServer">
            function <span class="apidocSignatureSpan">node-xmpp.</span>server.C2SServer
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.C2SStream">
            function <span class="apidocSignatureSpan">node-xmpp.</span>server.C2SStream
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.ComponentServer">
            function <span class="apidocSignatureSpan">node-xmpp.</span>server.ComponentServer
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.ComponentStream">
            function <span class="apidocSignatureSpan">node-xmpp.</span>server.ComponentStream
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.Router">
            function <span class="apidocSignatureSpan">node-xmpp.</span>server.Router
            <span class="apidocSignatureSpan">(s2sPort, bindAddress, opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.WebSocketServer">
            function <span class="apidocSignatureSpan">node-xmpp.</span>server.WebSocketServer
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server._Server">
            function <span class="apidocSignatureSpan">node-xmpp.</span>server._Server
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.stanza">
            function <span class="apidocSignatureSpan">node-xmpp.</span>stanza
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">node-xmpp.</span>Client.SASL</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">node-xmpp.</span>Client.SASL.AbstractMechanism.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">node-xmpp.</span>Client.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">node-xmpp.</span>Client.super_.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">node-xmpp.</span>Component.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">node-xmpp.</span>Connection.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">node-xmpp.</span>Element.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">node-xmpp.</span>JID.JID.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">node-xmpp.</span>Parser.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">node-xmpp.</span>Parser.super_.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">node-xmpp.</span>Parser.super_.prototype.DefaultParser.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">node-xmpp.</span>StreamParser.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">node-xmpp.</span>server</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">node-xmpp.</span>server.BOSHServer.super_.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">node-xmpp.</span>server.C2S</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">node-xmpp.</span>server.C2S._BOSHServer.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">node-xmpp.</span>server.C2S._BOSHSocket.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">node-xmpp.</span>server.C2S._WebSocketSocket.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">node-xmpp.</span>server.C2SServer.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">node-xmpp.</span>server.C2SStream.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">node-xmpp.</span>server.ComponentServer.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">node-xmpp.</span>server.ComponentStream.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">node-xmpp.</span>server.Router.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">node-xmpp.</span>server._Server.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">node-xmpp.</span>server.auth</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">node-xmpp.</span>server.auth.AbstractMechanism.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">node-xmpp.</span>server.auth.Anonymous.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">node-xmpp.</span>server.auth.DigestMD5.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">node-xmpp.</span>server.auth.Plain.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">node-xmpp.</span>server.auth.XOAuth2.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">node-xmpp.</span>server.component</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.node-xmpp.Client">module node-xmpp.Client</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Client.Client">
            function <span class="apidocSignatureSpan">node-xmpp.</span>Client
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Client.Connection">
            function <span class="apidocSignatureSpan">node-xmpp.Client.</span>Connection
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Client.Element">
            function <span class="apidocSignatureSpan">node-xmpp.Client.</span>Element
            <span class="apidocSignatureSpan">(name, attrs)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Client.IQ">
            function <span class="apidocSignatureSpan">node-xmpp.Client.</span>IQ
            <span class="apidocSignatureSpan">(attrs)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Client.JID">
            function <span class="apidocSignatureSpan">node-xmpp.Client.</span>JID
            <span class="apidocSignatureSpan">(a, b, c)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Client.Message">
            function <span class="apidocSignatureSpan">node-xmpp.Client.</span>Message
            <span class="apidocSignatureSpan">(attrs)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Client.Parser">
            function <span class="apidocSignatureSpan">node-xmpp.Client.</span>Parser
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Client.Presence">
            function <span class="apidocSignatureSpan">node-xmpp.Client.</span>Presence
            <span class="apidocSignatureSpan">(attrs)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Client.Stanza">
            function <span class="apidocSignatureSpan">node-xmpp.Client.</span>Stanza
            <span class="apidocSignatureSpan">(name, attrs)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Client.StreamParser">
            function <span class="apidocSignatureSpan">node-xmpp.Client.</span>StreamParser
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Client.createElement">
            function <span class="apidocSignatureSpan">node-xmpp.Client.</span>createElement
            <span class="apidocSignatureSpan">(name, attrs)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Client.createStanza">
            function <span class="apidocSignatureSpan">node-xmpp.Client.</span>createStanza
            <span class="apidocSignatureSpan">(name, attrs)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Client.escapeXML">
            function <span class="apidocSignatureSpan">node-xmpp.Client.</span>escapeXML
            <span class="apidocSignatureSpan">(s)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Client.escapeXMLText">
            function <span class="apidocSignatureSpan">node-xmpp.Client.</span>escapeXMLText
            <span class="apidocSignatureSpan">(s)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Client.inherits">
            function <span class="apidocSignatureSpan">node-xmpp.Client.</span>inherits
            <span class="apidocSignatureSpan">(ctor, superCtor)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Client.ltx">
            function <span class="apidocSignatureSpan">node-xmpp.Client.</span>ltx
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Client.parse">
            function <span class="apidocSignatureSpan">node-xmpp.Client.</span>parse
            <span class="apidocSignatureSpan">(data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Client.stanza">
            function <span class="apidocSignatureSpan">node-xmpp.Client.</span>stanza
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Client.super_">
            function <span class="apidocSignatureSpan">node-xmpp.Client.</span>super_
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">node-xmpp.Client.</span>SASL</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">node-xmpp.Client.</span>NS_CLIENT</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.node-xmpp.Client.SASL">module node-xmpp.Client.SASL</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Client.SASL.AbstractMechanism">
            function <span class="apidocSignatureSpan">node-xmpp.Client.SASL.</span>AbstractMechanism
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Client.SASL.detectMechanisms">
            function <span class="apidocSignatureSpan">node-xmpp.Client.SASL.</span>detectMechanisms
            <span class="apidocSignatureSpan">(options, availableMech)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Client.SASL.selectMechanism">
            function <span class="apidocSignatureSpan">node-xmpp.Client.SASL.</span>selectMechanism
            <span class="apidocSignatureSpan">(offeredMechs, preferredMech, availableMech)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.node-xmpp.Client.SASL.AbstractMechanism.prototype">module node-xmpp.Client.SASL.AbstractMechanism.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Client.SASL.AbstractMechanism.prototype.authAttrs">
            function <span class="apidocSignatureSpan">node-xmpp.Client.SASL.AbstractMechanism.prototype.</span>authAttrs
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.node-xmpp.Client.prototype">module node-xmpp.Client.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Client.prototype._connectViaBosh">
            function <span class="apidocSignatureSpan">node-xmpp.Client.prototype.</span>_connectViaBosh
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Client.prototype._handleAuthState">
            function <span class="apidocSignatureSpan">node-xmpp.Client.prototype.</span>_handleAuthState
            <span class="apidocSignatureSpan">(stanza)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Client.prototype._handleBindState">
            function <span class="apidocSignatureSpan">node-xmpp.Client.prototype.</span>_handleBindState
            <span class="apidocSignatureSpan">(stanza)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Client.prototype._handlePreAuthState">
            function <span class="apidocSignatureSpan">node-xmpp.Client.prototype.</span>_handlePreAuthState
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Client.prototype._handleSessionState">
            function <span class="apidocSignatureSpan">node-xmpp.Client.prototype.</span>_handleSessionState
            <span class="apidocSignatureSpan">(stanza)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Client.prototype._handleStanza">
            function <span class="apidocSignatureSpan">node-xmpp.Client.prototype.</span>_handleStanza
            <span class="apidocSignatureSpan">(stanza)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Client.prototype._handleStreamError">
            function <span class="apidocSignatureSpan">node-xmpp.Client.prototype.</span>_handleStreamError
            <span class="apidocSignatureSpan">(stanza)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Client.prototype._useStandardConnect">
            function <span class="apidocSignatureSpan">node-xmpp.Client.prototype.</span>_useStandardConnect
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Client.prototype.clearSaslMechanism">
            function <span class="apidocSignatureSpan">node-xmpp.Client.prototype.</span>clearSaslMechanism
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Client.prototype.connect">
            function <span class="apidocSignatureSpan">node-xmpp.Client.prototype.</span>connect
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Client.prototype.doRegister">
            function <span class="apidocSignatureSpan">node-xmpp.Client.prototype.</span>doRegister
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Client.prototype.getSaslMechanisms">
            function <span class="apidocSignatureSpan">node-xmpp.Client.prototype.</span>getSaslMechanisms
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Client.prototype.onStanza">
            function <span class="apidocSignatureSpan">node-xmpp.Client.prototype.</span>onStanza
            <span class="apidocSignatureSpan">(stanza)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Client.prototype.registerSaslMechanism">
            function <span class="apidocSignatureSpan">node-xmpp.Client.prototype.</span>registerSaslMechanism
            <span class="apidocSignatureSpan">(method)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Client.prototype.unregisterSaslMechanism">
            function <span class="apidocSignatureSpan">node-xmpp.Client.prototype.</span>unregisterSaslMechanism
            <span class="apidocSignatureSpan">(method)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Client.prototype.useFeatures">
            function <span class="apidocSignatureSpan">node-xmpp.Client.prototype.</span>useFeatures
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.node-xmpp.Client.super_">module node-xmpp.Client.super_</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Client.super_.super_">
            function <span class="apidocSignatureSpan">node-xmpp.Client.</span>super_
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.node-xmpp.Client.super_.prototype">module node-xmpp.Client.super_.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Client.super_.prototype._addConnectionListeners">
            function <span class="apidocSignatureSpan">node-xmpp.Client.super_.prototype.</span>_addConnectionListeners
            <span class="apidocSignatureSpan">(con)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Client.super_.prototype._performSrvLookup">
            function <span class="apidocSignatureSpan">node-xmpp.Client.super_.prototype.</span>_performSrvLookup
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Client.super_.prototype._setupBoshConnection">
            function <span class="apidocSignatureSpan">node-xmpp.Client.super_.prototype.</span>_setupBoshConnection
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Client.super_.prototype._setupSocketConnection">
            function <span class="apidocSignatureSpan">node-xmpp.Client.super_.prototype.</span>_setupSocketConnection
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Client.super_.prototype._setupWebsocketConnection">
            function <span class="apidocSignatureSpan">node-xmpp.Client.super_.prototype.</span>_setupWebsocketConnection
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Client.super_.prototype._socketConnectionToHost">
            function <span class="apidocSignatureSpan">node-xmpp.Client.super_.prototype.</span>_socketConnectionToHost
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Client.super_.prototype.end">
            function <span class="apidocSignatureSpan">node-xmpp.Client.super_.prototype.</span>end
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Client.super_.prototype.onStanza">
            function <span class="apidocSignatureSpan">node-xmpp.Client.super_.prototype.</span>onStanza
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Client.super_.prototype.pause">
            function <span class="apidocSignatureSpan">node-xmpp.Client.super_.prototype.</span>pause
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Client.super_.prototype.resume">
            function <span class="apidocSignatureSpan">node-xmpp.Client.super_.prototype.</span>resume
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Client.super_.prototype.send">
            function <span class="apidocSignatureSpan">node-xmpp.Client.super_.prototype.</span>send
            <span class="apidocSignatureSpan">(stanza)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Client.super_.prototype.setOptions">
            function <span class="apidocSignatureSpan">node-xmpp.Client.super_.prototype.</span>setOptions
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.node-xmpp.Component">module node-xmpp.Component</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Component.Component">
            function <span class="apidocSignatureSpan">node-xmpp.</span>Component
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Component.Connection">
            function <span class="apidocSignatureSpan">node-xmpp.Component.</span>Connection
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Component.Element">
            function <span class="apidocSignatureSpan">node-xmpp.Component.</span>Element
            <span class="apidocSignatureSpan">(name, attrs)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Component.IQ">
            function <span class="apidocSignatureSpan">node-xmpp.Component.</span>IQ
            <span class="apidocSignatureSpan">(attrs)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Component.JID">
            function <span class="apidocSignatureSpan">node-xmpp.Component.</span>JID
            <span class="apidocSignatureSpan">(a, b, c)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Component.Message">
            function <span class="apidocSignatureSpan">node-xmpp.Component.</span>Message
            <span class="apidocSignatureSpan">(attrs)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Component.Parser">
            function <span class="apidocSignatureSpan">node-xmpp.Component.</span>Parser
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Component.Presence">
            function <span class="apidocSignatureSpan">node-xmpp.Component.</span>Presence
            <span class="apidocSignatureSpan">(attrs)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Component.Stanza">
            function <span class="apidocSignatureSpan">node-xmpp.Component.</span>Stanza
            <span class="apidocSignatureSpan">(name, attrs)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Component.StreamParser">
            function <span class="apidocSignatureSpan">node-xmpp.Component.</span>StreamParser
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Component.createElement">
            function <span class="apidocSignatureSpan">node-xmpp.Component.</span>createElement
            <span class="apidocSignatureSpan">(name, attrs)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Component.createStanza">
            function <span class="apidocSignatureSpan">node-xmpp.Component.</span>createStanza
            <span class="apidocSignatureSpan">(name, attrs)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Component.escapeXML">
            function <span class="apidocSignatureSpan">node-xmpp.Component.</span>escapeXML
            <span class="apidocSignatureSpan">(s)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Component.escapeXMLText">
            function <span class="apidocSignatureSpan">node-xmpp.Component.</span>escapeXMLText
            <span class="apidocSignatureSpan">(s)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Component.inherits">
            function <span class="apidocSignatureSpan">node-xmpp.Component.</span>inherits
            <span class="apidocSignatureSpan">(ctor, superCtor)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Component.ltx">
            function <span class="apidocSignatureSpan">node-xmpp.Component.</span>ltx
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Component.parse">
            function <span class="apidocSignatureSpan">node-xmpp.Component.</span>parse
            <span class="apidocSignatureSpan">(data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Component.stanza">
            function <span class="apidocSignatureSpan">node-xmpp.Component.</span>stanza
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Component.super_">
            function <span class="apidocSignatureSpan">node-xmpp.Component.</span>super_
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.node-xmpp.Component.prototype">module node-xmpp.Component.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Component.prototype._addConnectionListeners">
            function <span class="apidocSignatureSpan">node-xmpp.Component.prototype.</span>_addConnectionListeners
            <span class="apidocSignatureSpan">(con)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Component.prototype._sha1Hex">
            function <span class="apidocSignatureSpan">node-xmpp.Component.prototype.</span>_sha1Hex
            <span class="apidocSignatureSpan">(s)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Component.prototype.end">
            function <span class="apidocSignatureSpan">node-xmpp.Component.prototype.</span>end
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Component.prototype.onStanza">
            function <span class="apidocSignatureSpan">node-xmpp.Component.prototype.</span>onStanza
            <span class="apidocSignatureSpan">(stanza)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Component.prototype.onStreamStart">
            function <span class="apidocSignatureSpan">node-xmpp.Component.prototype.</span>onStreamStart
            <span class="apidocSignatureSpan">(streamAttrs)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Component.prototype.send">
            function <span class="apidocSignatureSpan">node-xmpp.Component.prototype.</span>send
            <span class="apidocSignatureSpan">(stanza)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">node-xmpp.Component.prototype.</span>NS_COMPONENT</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">node-xmpp.Component.prototype.</span>NS_STREAM</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.node-xmpp.Connection">module node-xmpp.Connection</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Connection.Connection">
            function <span class="apidocSignatureSpan">node-xmpp.</span>Connection
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Connection.super_">
            function <span class="apidocSignatureSpan">node-xmpp.Connection.</span>super_
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">node-xmpp.Connection.</span>NS_STREAM</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.node-xmpp.Connection.prototype">module node-xmpp.Connection.prototype</a><ol>

        <li>

            <span class="apidocSignatureSpan">boolean <span class="apidocSignatureSpan">node-xmpp.Connection.prototype.</span>allowTLS</span>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Connection.prototype._setupSocket">
            function <span class="apidocSignatureSpan">node-xmpp.Connection.prototype.</span>_setupSocket
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Connection.prototype.addStreamNs">
            function <span class="apidocSignatureSpan">node-xmpp.Connection.prototype.</span>addStreamNs
            <span class="apidocSignatureSpan">(stanza)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Connection.prototype.closeStream">
            function <span class="apidocSignatureSpan">node-xmpp.Connection.prototype.</span>closeStream
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Connection.prototype.endStream">
            function <span class="apidocSignatureSpan">node-xmpp.Connection.prototype.</span>endStream
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Connection.prototype.error">
            function <span class="apidocSignatureSpan">node-xmpp.Connection.prototype.</span>error
            <span class="apidocSignatureSpan">(condition, message)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Connection.prototype.onClose">
            function <span class="apidocSignatureSpan">node-xmpp.Connection.prototype.</span>onClose
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Connection.prototype.onData">
            function <span class="apidocSignatureSpan">node-xmpp.Connection.prototype.</span>onData
            <span class="apidocSignatureSpan">(data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Connection.prototype.onEnd">
            function <span class="apidocSignatureSpan">node-xmpp.Connection.prototype.</span>onEnd
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Connection.prototype.onStanza">
            function <span class="apidocSignatureSpan">node-xmpp.Connection.prototype.</span>onStanza
            <span class="apidocSignatureSpan">(stanza)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Connection.prototype.openStream">
            function <span class="apidocSignatureSpan">node-xmpp.Connection.prototype.</span>openStream
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Connection.prototype.pause">
            function <span class="apidocSignatureSpan">node-xmpp.Connection.prototype.</span>pause
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Connection.prototype.resume">
            function <span class="apidocSignatureSpan">node-xmpp.Connection.prototype.</span>resume
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Connection.prototype.rmXmlns">
            function <span class="apidocSignatureSpan">node-xmpp.Connection.prototype.</span>rmXmlns
            <span class="apidocSignatureSpan">(stanza)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Connection.prototype.send">
            function <span class="apidocSignatureSpan">node-xmpp.Connection.prototype.</span>send
            <span class="apidocSignatureSpan">(stanza)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Connection.prototype.setSecure">
            function <span class="apidocSignatureSpan">node-xmpp.Connection.prototype.</span>setSecure
            <span class="apidocSignatureSpan">(credentials, isServer, servername)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Connection.prototype.setupStream">
            function <span class="apidocSignatureSpan">node-xmpp.Connection.prototype.</span>setupStream
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Connection.prototype.startParser">
            function <span class="apidocSignatureSpan">node-xmpp.Connection.prototype.</span>startParser
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Connection.prototype.startStream">
            function <span class="apidocSignatureSpan">node-xmpp.Connection.prototype.</span>startStream
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Connection.prototype.stopParser">
            function <span class="apidocSignatureSpan">node-xmpp.Connection.prototype.</span>stopParser
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">node-xmpp.Connection.prototype.</span>NS_XMPP_STREAMS</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">node-xmpp.Connection.prototype.</span>NS_XMPP_TLS</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.node-xmpp.Element">module node-xmpp.Element</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Element.Element">
            function <span class="apidocSignatureSpan">node-xmpp.</span>Element
            <span class="apidocSignatureSpan">(name, attrs)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.node-xmpp.Element.prototype">module node-xmpp.Element.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Element.prototype._addChildren">
            function <span class="apidocSignatureSpan">node-xmpp.Element.prototype.</span>_addChildren
            <span class="apidocSignatureSpan">(writer)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Element.prototype.attr">
            function <span class="apidocSignatureSpan">node-xmpp.Element.prototype.</span>attr
            <span class="apidocSignatureSpan">(attr, val)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Element.prototype.attrsEquals">
            function <span class="apidocSignatureSpan">node-xmpp.Element.prototype.</span>attrsEquals
            <span class="apidocSignatureSpan">(el)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Element.prototype.c">
            function <span class="apidocSignatureSpan">node-xmpp.Element.prototype.</span>c
            <span class="apidocSignatureSpan">(name, attrs)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Element.prototype.childrenEquals">
            function <span class="apidocSignatureSpan">node-xmpp.Element.prototype.</span>childrenEquals
            <span class="apidocSignatureSpan">(el)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Element.prototype.clone">
            function <span class="apidocSignatureSpan">node-xmpp.Element.prototype.</span>clone
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Element.prototype.cnode">
            function <span class="apidocSignatureSpan">node-xmpp.Element.prototype.</span>cnode
            <span class="apidocSignatureSpan">(child)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Element.prototype.equals">
            function <span class="apidocSignatureSpan">node-xmpp.Element.prototype.</span>equals
            <span class="apidocSignatureSpan">(el)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Element.prototype.findNS">
            function <span class="apidocSignatureSpan">node-xmpp.Element.prototype.</span>findNS
            <span class="apidocSignatureSpan">(prefix)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Element.prototype.getAttr">
            function <span class="apidocSignatureSpan">node-xmpp.Element.prototype.</span>getAttr
            <span class="apidocSignatureSpan">(name, xmlns)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Element.prototype.getChild">
            function <span class="apidocSignatureSpan">node-xmpp.Element.prototype.</span>getChild
            <span class="apidocSignatureSpan">(name, xmlns)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Element.prototype.getChildByAttr">
            function <span class="apidocSignatureSpan">node-xmpp.Element.prototype.</span>getChildByAttr
            <span class="apidocSignatureSpan">(attr, val, xmlns, recursive)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Element.prototype.getChildElements">
            function <span class="apidocSignatureSpan">node-xmpp.Element.prototype.</span>getChildElements
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Element.prototype.getChildText">
            function <span class="apidocSignatureSpan">node-xmpp.Element.prototype.</span>getChildText
            <span class="apidocSignatureSpan">(name, xmlns)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Element.prototype.getChildren">
            function <span class="apidocSignatureSpan">node-xmpp.Element.prototype.</span>getChildren
            <span class="apidocSignatureSpan">(name, xmlns)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Element.prototype.getChildrenByAttr">
            function <span class="apidocSignatureSpan">node-xmpp.Element.prototype.</span>getChildrenByAttr
            <span class="apidocSignatureSpan">(attr, val, xmlns, recursive)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Element.prototype.getChildrenByFilter">
            function <span class="apidocSignatureSpan">node-xmpp.Element.prototype.</span>getChildrenByFilter
            <span class="apidocSignatureSpan">(filter, recursive)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Element.prototype.getNS">
            function <span class="apidocSignatureSpan">node-xmpp.Element.prototype.</span>getNS
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Element.prototype.getName">
            function <span class="apidocSignatureSpan">node-xmpp.Element.prototype.</span>getName
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Element.prototype.getText">
            function <span class="apidocSignatureSpan">node-xmpp.Element.prototype.</span>getText
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Element.prototype.getXmlns">
            function <span class="apidocSignatureSpan">node-xmpp.Element.prototype.</span>getXmlns
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Element.prototype.is">
            function <span class="apidocSignatureSpan">node-xmpp.Element.prototype.</span>is
            <span class="apidocSignatureSpan">(name, xmlns)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Element.prototype.nameEquals">
            function <span class="apidocSignatureSpan">node-xmpp.Element.prototype.</span>nameEquals
            <span class="apidocSignatureSpan">(el)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Element.prototype.remove">
            function <span class="apidocSignatureSpan">node-xmpp.Element.prototype.</span>remove
            <span class="apidocSignatureSpan">(el, xmlns)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Element.prototype.root">
            function <span class="apidocSignatureSpan">node-xmpp.Element.prototype.</span>root
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Element.prototype.setAttrs">
            function <span class="apidocSignatureSpan">node-xmpp.Element.prototype.</span>setAttrs
            <span class="apidocSignatureSpan">(attrs)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Element.prototype.t">
            function <span class="apidocSignatureSpan">node-xmpp.Element.prototype.</span>t
            <span class="apidocSignatureSpan">(text)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Element.prototype.text">
            function <span class="apidocSignatureSpan">node-xmpp.Element.prototype.</span>text
            <span class="apidocSignatureSpan">(val)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Element.prototype.toJSON">
            function <span class="apidocSignatureSpan">node-xmpp.Element.prototype.</span>toJSON
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Element.prototype.toString">
            function <span class="apidocSignatureSpan">node-xmpp.Element.prototype.</span>toString
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Element.prototype.tree">
            function <span class="apidocSignatureSpan">node-xmpp.Element.prototype.</span>tree
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Element.prototype.up">
            function <span class="apidocSignatureSpan">node-xmpp.Element.prototype.</span>up
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Element.prototype.write">
            function <span class="apidocSignatureSpan">node-xmpp.Element.prototype.</span>write
            <span class="apidocSignatureSpan">(writer)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.node-xmpp.IQ">module node-xmpp.IQ</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.IQ.IQ">
            function <span class="apidocSignatureSpan">node-xmpp.</span>IQ
            <span class="apidocSignatureSpan">(attrs)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.IQ.super_">
            function <span class="apidocSignatureSpan">node-xmpp.IQ.</span>super_
            <span class="apidocSignatureSpan">(name, attrs)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.node-xmpp.JID">module node-xmpp.JID</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.JID.JID">
            function <span class="apidocSignatureSpan">node-xmpp.</span>JID
            <span class="apidocSignatureSpan">(a, b, c)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.JID.equal">
            function <span class="apidocSignatureSpan">node-xmpp.JID.</span>equal
            <span class="apidocSignatureSpan">(a, b)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.JID.is">
            function <span class="apidocSignatureSpan">node-xmpp.JID.</span>is
            <span class="apidocSignatureSpan">(a)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.JID.tag">
            function <span class="apidocSignatureSpan">node-xmpp.JID.</span>tag
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.node-xmpp.JID.JID">module node-xmpp.JID.JID</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.JID.JID.JID">
            function <span class="apidocSignatureSpan">node-xmpp.JID.</span>JID
            <span class="apidocSignatureSpan">(a, b, c)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.node-xmpp.JID.JID.prototype">module node-xmpp.JID.JID.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.JID.JID.prototype.bare">
            function <span class="apidocSignatureSpan">node-xmpp.JID.JID.prototype.</span>bare
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.JID.JID.prototype.equals">
            function <span class="apidocSignatureSpan">node-xmpp.JID.JID.prototype.</span>equals
            <span class="apidocSignatureSpan">(other)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.JID.JID.prototype.escapeLocal">
            function <span class="apidocSignatureSpan">node-xmpp.JID.JID.prototype.</span>escapeLocal
            <span class="apidocSignatureSpan">(local)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.JID.JID.prototype.getDomain">
            function <span class="apidocSignatureSpan">node-xmpp.JID.JID.prototype.</span>getDomain
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.JID.JID.prototype.getLocal">
            function <span class="apidocSignatureSpan">node-xmpp.JID.JID.prototype.</span>getLocal
            <span class="apidocSignatureSpan">(unescape)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.JID.JID.prototype.getResource">
            function <span class="apidocSignatureSpan">node-xmpp.JID.JID.prototype.</span>getResource
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.JID.JID.prototype.getUser">
            function <span class="apidocSignatureSpan">node-xmpp.JID.JID.prototype.</span>getUser
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.JID.JID.prototype.parseJID">
            function <span class="apidocSignatureSpan">node-xmpp.JID.JID.prototype.</span>parseJID
            <span class="apidocSignatureSpan">(s)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.JID.JID.prototype.setDomain">
            function <span class="apidocSignatureSpan">node-xmpp.JID.JID.prototype.</span>setDomain
            <span class="apidocSignatureSpan">(domain)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.JID.JID.prototype.setLocal">
            function <span class="apidocSignatureSpan">node-xmpp.JID.JID.prototype.</span>setLocal
            <span class="apidocSignatureSpan">(local, escape)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.JID.JID.prototype.setResource">
            function <span class="apidocSignatureSpan">node-xmpp.JID.JID.prototype.</span>setResource
            <span class="apidocSignatureSpan">(resource)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.JID.JID.prototype.setUser">
            function <span class="apidocSignatureSpan">node-xmpp.JID.JID.prototype.</span>setUser
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.JID.JID.prototype.toString">
            function <span class="apidocSignatureSpan">node-xmpp.JID.JID.prototype.</span>toString
            <span class="apidocSignatureSpan">(unescape)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.JID.JID.prototype.unescapeLocal">
            function <span class="apidocSignatureSpan">node-xmpp.JID.JID.prototype.</span>unescapeLocal
            <span class="apidocSignatureSpan">(local)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.node-xmpp.Message">module node-xmpp.Message</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Message.Message">
            function <span class="apidocSignatureSpan">node-xmpp.</span>Message
            <span class="apidocSignatureSpan">(attrs)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Message.super_">
            function <span class="apidocSignatureSpan">node-xmpp.Message.</span>super_
            <span class="apidocSignatureSpan">(name, attrs)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.node-xmpp.Parser">module node-xmpp.Parser</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Parser.Parser">
            function <span class="apidocSignatureSpan">node-xmpp.</span>Parser
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Parser.super_">
            function <span class="apidocSignatureSpan">node-xmpp.Parser.</span>super_
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.node-xmpp.Parser.prototype">module node-xmpp.Parser.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Parser.prototype.DefaultElement">
            function <span class="apidocSignatureSpan">node-xmpp.Parser.prototype.</span>DefaultElement
            <span class="apidocSignatureSpan">(name, attrs)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.node-xmpp.Parser.super_">module node-xmpp.Parser.super_</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Parser.super_.super_">
            function <span class="apidocSignatureSpan">node-xmpp.Parser.</span>super_
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.node-xmpp.Parser.super_.prototype">module node-xmpp.Parser.super_.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Parser.super_.prototype.DefaultElement">
            function <span class="apidocSignatureSpan">node-xmpp.Parser.super_.prototype.</span>DefaultElement
            <span class="apidocSignatureSpan">(name, attrs)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Parser.super_.prototype.DefaultParser">
            function <span class="apidocSignatureSpan">node-xmpp.Parser.super_.prototype.</span>DefaultParser
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Parser.super_.prototype.end">
            function <span class="apidocSignatureSpan">node-xmpp.Parser.super_.prototype.</span>end
            <span class="apidocSignatureSpan">(data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Parser.super_.prototype.write">
            function <span class="apidocSignatureSpan">node-xmpp.Parser.super_.prototype.</span>write
            <span class="apidocSignatureSpan">(data)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.node-xmpp.Parser.super_.prototype.DefaultParser">module node-xmpp.Parser.super_.prototype.DefaultParser</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Parser.super_.prototype.DefaultParser.DefaultParser">
            function <span class="apidocSignatureSpan">node-xmpp.Parser.super_.prototype.</span>DefaultParser
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Parser.super_.prototype.DefaultParser.super_">
            function <span class="apidocSignatureSpan">node-xmpp.Parser.super_.prototype.DefaultParser.</span>super_
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.node-xmpp.Parser.super_.prototype.DefaultParser.prototype">module node-xmpp.Parser.super_.prototype.DefaultParser.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Parser.super_.prototype.DefaultParser.prototype.end">
            function <span class="apidocSignatureSpan">node-xmpp.Parser.super_.prototype.DefaultParser.prototype.</span>end
            <span class="apidocSignatureSpan">(data)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.node-xmpp.Presence">module node-xmpp.Presence</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Presence.Presence">
            function <span class="apidocSignatureSpan">node-xmpp.</span>Presence
            <span class="apidocSignatureSpan">(attrs)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Presence.super_">
            function <span class="apidocSignatureSpan">node-xmpp.Presence.</span>super_
            <span class="apidocSignatureSpan">(name, attrs)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.node-xmpp.Stanza">module node-xmpp.Stanza</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Stanza.Stanza">
            function <span class="apidocSignatureSpan">node-xmpp.</span>Stanza
            <span class="apidocSignatureSpan">(name, attrs)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.Stanza.super_">
            function <span class="apidocSignatureSpan">node-xmpp.Stanza.</span>super_
            <span class="apidocSignatureSpan">(name, attrs)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.node-xmpp.StreamParser">module node-xmpp.StreamParser</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.StreamParser.StreamParser">
            function <span class="apidocSignatureSpan">node-xmpp.</span>StreamParser
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.StreamParser.super_">
            function <span class="apidocSignatureSpan">node-xmpp.StreamParser.</span>super_
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.node-xmpp.StreamParser.prototype">module node-xmpp.StreamParser.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.StreamParser.prototype.checkXMLHeader">
            function <span class="apidocSignatureSpan">node-xmpp.StreamParser.prototype.</span>checkXMLHeader
            <span class="apidocSignatureSpan">(data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.StreamParser.prototype.end">
            function <span class="apidocSignatureSpan">node-xmpp.StreamParser.prototype.</span>end
            <span class="apidocSignatureSpan">(data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.StreamParser.prototype.error">
            function <span class="apidocSignatureSpan">node-xmpp.StreamParser.prototype.</span>error
            <span class="apidocSignatureSpan">(condition, message)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.StreamParser.prototype.write">
            function <span class="apidocSignatureSpan">node-xmpp.StreamParser.prototype.</span>write
            <span class="apidocSignatureSpan">(data)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.node-xmpp.ltx">module node-xmpp.ltx</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.ltx.ltx">
            function <span class="apidocSignatureSpan">node-xmpp.</span>ltx
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.ltx.Element">
            function <span class="apidocSignatureSpan">node-xmpp.ltx.</span>Element
            <span class="apidocSignatureSpan">(name, attrs)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.ltx.Parser">
            function <span class="apidocSignatureSpan">node-xmpp.ltx.</span>Parser
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.ltx.attrsEqual">
            function <span class="apidocSignatureSpan">node-xmpp.ltx.</span>attrsEqual
            <span class="apidocSignatureSpan">(a, b)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.ltx.childrenEqual">
            function <span class="apidocSignatureSpan">node-xmpp.ltx.</span>childrenEqual
            <span class="apidocSignatureSpan">(a, b)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.ltx.clone">
            function <span class="apidocSignatureSpan">node-xmpp.ltx.</span>clone
            <span class="apidocSignatureSpan">(el)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.ltx.createElement">
            function <span class="apidocSignatureSpan">node-xmpp.ltx.</span>createElement
            <span class="apidocSignatureSpan">(name, attrs)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.ltx.equal">
            function <span class="apidocSignatureSpan">node-xmpp.ltx.</span>equal
            <span class="apidocSignatureSpan">(a, b)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.ltx.escapeXML">
            function <span class="apidocSignatureSpan">node-xmpp.ltx.</span>escapeXML
            <span class="apidocSignatureSpan">(s)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.ltx.escapeXMLText">
            function <span class="apidocSignatureSpan">node-xmpp.ltx.</span>escapeXMLText
            <span class="apidocSignatureSpan">(s)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.ltx.isElement">
            function <span class="apidocSignatureSpan">node-xmpp.ltx.</span>isElement
            <span class="apidocSignatureSpan">(el)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.ltx.isNode">
            function <span class="apidocSignatureSpan">node-xmpp.ltx.</span>isNode
            <span class="apidocSignatureSpan">(el)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.ltx.isText">
            function <span class="apidocSignatureSpan">node-xmpp.ltx.</span>isText
            <span class="apidocSignatureSpan">(el)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.ltx.nameEqual">
            function <span class="apidocSignatureSpan">node-xmpp.ltx.</span>nameEqual
            <span class="apidocSignatureSpan">(a, b)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.ltx.parse">
            function <span class="apidocSignatureSpan">node-xmpp.ltx.</span>parse
            <span class="apidocSignatureSpan">(data, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.ltx.stringify">
            function <span class="apidocSignatureSpan">node-xmpp.ltx.</span>stringify
            <span class="apidocSignatureSpan">(el, indent, level)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.ltx.tag">
            function <span class="apidocSignatureSpan">node-xmpp.ltx.</span>tag
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.ltx.tagString">
            function <span class="apidocSignatureSpan">node-xmpp.ltx.</span>tagString
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.ltx.unescapeXML">
            function <span class="apidocSignatureSpan">node-xmpp.ltx.</span>unescapeXML
            <span class="apidocSignatureSpan">(s)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.ltx.unescapeXMLText">
            function <span class="apidocSignatureSpan">node-xmpp.ltx.</span>unescapeXMLText
            <span class="apidocSignatureSpan">(s)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.node-xmpp.server">module node-xmpp.server</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.BOSHServer">
            function <span class="apidocSignatureSpan">node-xmpp.server.</span>BOSHServer
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.C2SServer">
            function <span class="apidocSignatureSpan">node-xmpp.server.</span>C2SServer
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.C2SStream">
            function <span class="apidocSignatureSpan">node-xmpp.server.</span>C2SStream
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.ComponentServer">
            function <span class="apidocSignatureSpan">node-xmpp.server.</span>ComponentServer
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.ComponentStream">
            function <span class="apidocSignatureSpan">node-xmpp.server.</span>ComponentStream
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.Connection">
            function <span class="apidocSignatureSpan">node-xmpp.server.</span>Connection
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.Element">
            function <span class="apidocSignatureSpan">node-xmpp.server.</span>Element
            <span class="apidocSignatureSpan">(name, attrs)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.IQ">
            function <span class="apidocSignatureSpan">node-xmpp.server.</span>IQ
            <span class="apidocSignatureSpan">(attrs)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.JID">
            function <span class="apidocSignatureSpan">node-xmpp.server.</span>JID
            <span class="apidocSignatureSpan">(a, b, c)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.Message">
            function <span class="apidocSignatureSpan">node-xmpp.server.</span>Message
            <span class="apidocSignatureSpan">(attrs)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.Parser">
            function <span class="apidocSignatureSpan">node-xmpp.server.</span>Parser
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.Presence">
            function <span class="apidocSignatureSpan">node-xmpp.server.</span>Presence
            <span class="apidocSignatureSpan">(attrs)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.Router">
            function <span class="apidocSignatureSpan">node-xmpp.server.</span>Router
            <span class="apidocSignatureSpan">(s2sPort, bindAddress, opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.Stanza">
            function <span class="apidocSignatureSpan">node-xmpp.server.</span>Stanza
            <span class="apidocSignatureSpan">(name, attrs)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.StreamParser">
            function <span class="apidocSignatureSpan">node-xmpp.server.</span>StreamParser
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.WebSocketServer">
            function <span class="apidocSignatureSpan">node-xmpp.server.</span>WebSocketServer
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server._Server">
            function <span class="apidocSignatureSpan">node-xmpp.server.</span>_Server
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.createElement">
            function <span class="apidocSignatureSpan">node-xmpp.server.</span>createElement
            <span class="apidocSignatureSpan">(name, attrs)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.createStanza">
            function <span class="apidocSignatureSpan">node-xmpp.server.</span>createStanza
            <span class="apidocSignatureSpan">(name, attrs)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.escapeXML">
            function <span class="apidocSignatureSpan">node-xmpp.server.</span>escapeXML
            <span class="apidocSignatureSpan">(s)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.escapeXMLText">
            function <span class="apidocSignatureSpan">node-xmpp.server.</span>escapeXMLText
            <span class="apidocSignatureSpan">(s)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.inherits">
            function <span class="apidocSignatureSpan">node-xmpp.server.</span>inherits
            <span class="apidocSignatureSpan">(ctor, superCtor)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.ltx">
            function <span class="apidocSignatureSpan">node-xmpp.server.</span>ltx
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.parse">
            function <span class="apidocSignatureSpan">node-xmpp.server.</span>parse
            <span class="apidocSignatureSpan">(data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.stanza">
            function <span class="apidocSignatureSpan">node-xmpp.server.</span>stanza
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">node-xmpp.server.</span>C2S</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">node-xmpp.server.</span>auth</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">node-xmpp.server.</span>component</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.node-xmpp.server.BOSHServer">module node-xmpp.server.BOSHServer</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.BOSHServer.BOSHServer">
            function <span class="apidocSignatureSpan">node-xmpp.server.</span>BOSHServer
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.BOSHServer.super_">
            function <span class="apidocSignatureSpan">node-xmpp.server.BOSHServer.</span>super_
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.node-xmpp.server.BOSHServer.super_.prototype">module node-xmpp.server.BOSHServer.super_.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.BOSHServer.super_.prototype.Session">
            function <span class="apidocSignatureSpan">node-xmpp.server.BOSHServer.super_.prototype.</span>Session
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.BOSHServer.super_.prototype.clearSaslMechanism">
            function <span class="apidocSignatureSpan">node-xmpp.server.BOSHServer.super_.prototype.</span>clearSaslMechanism
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.BOSHServer.super_.prototype.getSaslMechanisms">
            function <span class="apidocSignatureSpan">node-xmpp.server.BOSHServer.super_.prototype.</span>getSaslMechanisms
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.BOSHServer.super_.prototype.registerSaslMechanism">
            function <span class="apidocSignatureSpan">node-xmpp.server.BOSHServer.super_.prototype.</span>registerSaslMechanism
            <span class="apidocSignatureSpan">(method)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.BOSHServer.super_.prototype.unregisterSaslMechanism">
            function <span class="apidocSignatureSpan">node-xmpp.server.BOSHServer.super_.prototype.</span>unregisterSaslMechanism
            <span class="apidocSignatureSpan">(method)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.node-xmpp.server.C2S">module node-xmpp.server.C2S</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.C2S.BOSHServer">
            function <span class="apidocSignatureSpan">node-xmpp.server.C2S.</span>BOSHServer
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.C2S.TCPServer">
            function <span class="apidocSignatureSpan">node-xmpp.server.C2S.</span>TCPServer
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.C2S.WebSocketServer">
            function <span class="apidocSignatureSpan">node-xmpp.server.C2S.</span>WebSocketServer
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.C2S._BOSHServer">
            function <span class="apidocSignatureSpan">node-xmpp.server.C2S.</span>_BOSHServer
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.C2S._BOSHSocket">
            function <span class="apidocSignatureSpan">node-xmpp.server.C2S.</span>_BOSHSocket
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.C2S._Server">
            function <span class="apidocSignatureSpan">node-xmpp.server.C2S.</span>_Server
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.C2S._Session">
            function <span class="apidocSignatureSpan">node-xmpp.server.C2S.</span>_Session
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.C2S._WebSocketSocket">
            function <span class="apidocSignatureSpan">node-xmpp.server.C2S.</span>_WebSocketSocket
            <span class="apidocSignatureSpan">(socket)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.node-xmpp.server.C2S._BOSHServer.prototype">module node-xmpp.server.C2S._BOSHServer.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.C2S._BOSHServer.prototype._createSession">
            function <span class="apidocSignatureSpan">node-xmpp.server.C2S._BOSHServer.prototype.</span>_createSession
            <span class="apidocSignatureSpan">(req, res, bodyEl)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.C2S._BOSHServer.prototype._handlePostRequest">
            function <span class="apidocSignatureSpan">node-xmpp.server.C2S._BOSHServer.prototype.</span>_handlePostRequest
            <span class="apidocSignatureSpan">(req, res)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.C2S._BOSHServer.prototype._sendErrorResponse">
            function <span class="apidocSignatureSpan">node-xmpp.server.C2S._BOSHServer.prototype.</span>_sendErrorResponse
            <span class="apidocSignatureSpan">(res, error)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.C2S._BOSHServer.prototype._useExistingSession">
            function <span class="apidocSignatureSpan">node-xmpp.server.C2S._BOSHServer.prototype.</span>_useExistingSession
            <span class="apidocSignatureSpan">(req, res, bodyEl)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.C2S._BOSHServer.prototype.close">
            function <span class="apidocSignatureSpan">node-xmpp.server.C2S._BOSHServer.prototype.</span>close
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.C2S._BOSHServer.prototype.listen">
            function <span class="apidocSignatureSpan">node-xmpp.server.C2S._BOSHServer.prototype.</span>listen
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.C2S._BOSHServer.prototype.onRequest">
            function <span class="apidocSignatureSpan">node-xmpp.server.C2S._BOSHServer.prototype.</span>onRequest
            <span class="apidocSignatureSpan">(req, res)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.C2S._BOSHServer.prototype.setCorsHeader">
            function <span class="apidocSignatureSpan">node-xmpp.server.C2S._BOSHServer.prototype.</span>setCorsHeader
            <span class="apidocSignatureSpan">(req, res, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.C2S._BOSHServer.prototype.stop">
            function <span class="apidocSignatureSpan">node-xmpp.server.C2S._BOSHServer.prototype.</span>stop
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">node-xmpp.server.C2S._BOSHServer.prototype.</span>corsHeaders</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.node-xmpp.server.C2S._BOSHSocket.prototype">module node-xmpp.server.C2S._BOSHSocket.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.C2S._BOSHSocket.prototype.closeSocket">
            function <span class="apidocSignatureSpan">node-xmpp.server.C2S._BOSHSocket.prototype.</span>closeSocket
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.C2S._BOSHSocket.prototype.end">
            function <span class="apidocSignatureSpan">node-xmpp.server.C2S._BOSHSocket.prototype.</span>end
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.C2S._BOSHSocket.prototype.handleHTTP">
            function <span class="apidocSignatureSpan">node-xmpp.server.C2S._BOSHSocket.prototype.</span>handleHTTP
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.C2S._BOSHSocket.prototype.onReqTimeout">
            function <span class="apidocSignatureSpan">node-xmpp.server.C2S._BOSHSocket.prototype.</span>onReqTimeout
            <span class="apidocSignatureSpan">(rid)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.C2S._BOSHSocket.prototype.pause">
            function <span class="apidocSignatureSpan">node-xmpp.server.C2S._BOSHSocket.prototype.</span>pause
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.C2S._BOSHSocket.prototype.resetNextRequestTimeout">
            function <span class="apidocSignatureSpan">node-xmpp.server.C2S._BOSHSocket.prototype.</span>resetNextRequestTimeout
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.C2S._BOSHSocket.prototype.respond">
            function <span class="apidocSignatureSpan">node-xmpp.server.C2S._BOSHSocket.prototype.</span>respond
            <span class="apidocSignatureSpan">(res, attrs, children)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.C2S._BOSHSocket.prototype.resume">
            function <span class="apidocSignatureSpan">node-xmpp.server.C2S._BOSHSocket.prototype.</span>resume
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.C2S._BOSHSocket.prototype.sendData">
            function <span class="apidocSignatureSpan">node-xmpp.server.C2S._BOSHSocket.prototype.</span>sendData
            <span class="apidocSignatureSpan">(data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.C2S._BOSHSocket.prototype.serializeStanza">
            function <span class="apidocSignatureSpan">node-xmpp.server.C2S._BOSHSocket.prototype.</span>serializeStanza
            <span class="apidocSignatureSpan">(stanza, fn)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.C2S._BOSHSocket.prototype.setNextRequestTimeout">
            function <span class="apidocSignatureSpan">node-xmpp.server.C2S._BOSHSocket.prototype.</span>setNextRequestTimeout
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.C2S._BOSHSocket.prototype.streamOpen">
            function <span class="apidocSignatureSpan">node-xmpp.server.C2S._BOSHSocket.prototype.</span>streamOpen
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.C2S._BOSHSocket.prototype.workInQueue">
            function <span class="apidocSignatureSpan">node-xmpp.server.C2S._BOSHSocket.prototype.</span>workInQueue
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.C2S._BOSHSocket.prototype.workOutQueue">
            function <span class="apidocSignatureSpan">node-xmpp.server.C2S._BOSHSocket.prototype.</span>workOutQueue
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.C2S._BOSHSocket.prototype.write">
            function <span class="apidocSignatureSpan">node-xmpp.server.C2S._BOSHSocket.prototype.</span>write
            <span class="apidocSignatureSpan">(data)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">node-xmpp.server.C2S._BOSHSocket.prototype.</span>xmlnsAttrs</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">node-xmpp.server.C2S._BOSHSocket.prototype.</span>name</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.node-xmpp.server.C2S._WebSocketSocket.prototype">module node-xmpp.server.C2S._WebSocketSocket.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.C2S._WebSocketSocket.prototype.end">
            function <span class="apidocSignatureSpan">node-xmpp.server.C2S._WebSocketSocket.prototype.</span>end
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.C2S._WebSocketSocket.prototype.pause">
            function <span class="apidocSignatureSpan">node-xmpp.server.C2S._WebSocketSocket.prototype.</span>pause
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.C2S._WebSocketSocket.prototype.resume">
            function <span class="apidocSignatureSpan">node-xmpp.server.C2S._WebSocketSocket.prototype.</span>resume
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.C2S._WebSocketSocket.prototype.serializeStanza">
            function <span class="apidocSignatureSpan">node-xmpp.server.C2S._WebSocketSocket.prototype.</span>serializeStanza
            <span class="apidocSignatureSpan">(stanza, fn)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.C2S._WebSocketSocket.prototype.setupSocket">
            function <span class="apidocSignatureSpan">node-xmpp.server.C2S._WebSocketSocket.prototype.</span>setupSocket
            <span class="apidocSignatureSpan">(socket)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.C2S._WebSocketSocket.prototype.write">
            function <span class="apidocSignatureSpan">node-xmpp.server.C2S._WebSocketSocket.prototype.</span>write
            <span class="apidocSignatureSpan">(data)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">node-xmpp.server.C2S._WebSocketSocket.prototype.</span>maxStanzaSize</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.node-xmpp.server.C2SServer">module node-xmpp.server.C2SServer</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.C2SServer.C2SServer">
            function <span class="apidocSignatureSpan">node-xmpp.server.</span>C2SServer
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.C2SServer.super_">
            function <span class="apidocSignatureSpan">node-xmpp.server.C2SServer.</span>super_
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.node-xmpp.server.C2SServer.prototype">module node-xmpp.server.C2SServer.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.C2SServer.prototype._setupTls">
            function <span class="apidocSignatureSpan">node-xmpp.server.C2SServer.prototype.</span>_setupTls
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">node-xmpp.server.C2SServer.prototype.</span>DEFAULT_PORT</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.node-xmpp.server.C2SStream">module node-xmpp.server.C2SStream</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.C2SStream.C2SStream">
            function <span class="apidocSignatureSpan">node-xmpp.server.</span>C2SStream
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.C2SStream.super_">
            function <span class="apidocSignatureSpan">node-xmpp.server.C2SStream.</span>super_
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.node-xmpp.server.C2SStream.prototype">module node-xmpp.server.C2SStream.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.C2SStream.prototype._addConnectionListeners">
            function <span class="apidocSignatureSpan">node-xmpp.server.C2SStream.prototype.</span>_addConnectionListeners
            <span class="apidocSignatureSpan">(con)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.C2SStream.prototype.decode64">
            function <span class="apidocSignatureSpan">node-xmpp.server.C2SStream.prototype.</span>decode64
            <span class="apidocSignatureSpan">(encoded)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.C2SStream.prototype.end">
            function <span class="apidocSignatureSpan">node-xmpp.server.C2SStream.prototype.</span>end
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.C2SStream.prototype.onAuth">
            function <span class="apidocSignatureSpan">node-xmpp.server.C2SStream.prototype.</span>onAuth
            <span class="apidocSignatureSpan">(stanza)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.C2SStream.prototype.onAuthStanza">
            function <span class="apidocSignatureSpan">node-xmpp.server.C2SStream.prototype.</span>onAuthStanza
            <span class="apidocSignatureSpan">(stanza)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.C2SStream.prototype.onBind">
            function <span class="apidocSignatureSpan">node-xmpp.server.C2SStream.prototype.</span>onBind
            <span class="apidocSignatureSpan">(stanza)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.C2SStream.prototype.onRegistration">
            function <span class="apidocSignatureSpan">node-xmpp.server.C2SStream.prototype.</span>onRegistration
            <span class="apidocSignatureSpan">(stanza)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.C2SStream.prototype.onSession">
            function <span class="apidocSignatureSpan">node-xmpp.server.C2SStream.prototype.</span>onSession
            <span class="apidocSignatureSpan">(stanza)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.C2SStream.prototype.onStanza">
            function <span class="apidocSignatureSpan">node-xmpp.server.C2SStream.prototype.</span>onStanza
            <span class="apidocSignatureSpan">(stanza)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.C2SStream.prototype.pause">
            function <span class="apidocSignatureSpan">node-xmpp.server.C2SStream.prototype.</span>pause
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.C2SStream.prototype.resume">
            function <span class="apidocSignatureSpan">node-xmpp.server.C2SStream.prototype.</span>resume
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.C2SStream.prototype.send">
            function <span class="apidocSignatureSpan">node-xmpp.server.C2SStream.prototype.</span>send
            <span class="apidocSignatureSpan">(stanza)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.C2SStream.prototype.sendAuthError">
            function <span class="apidocSignatureSpan">node-xmpp.server.C2SStream.prototype.</span>sendAuthError
            <span class="apidocSignatureSpan">(error)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.C2SStream.prototype.sendFeatures">
            function <span class="apidocSignatureSpan">node-xmpp.server.C2SStream.prototype.</span>sendFeatures
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.C2SStream.prototype.startStream">
            function <span class="apidocSignatureSpan">node-xmpp.server.C2SStream.prototype.</span>startStream
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.node-xmpp.server.ComponentServer">module node-xmpp.server.ComponentServer</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.ComponentServer.ComponentServer">
            function <span class="apidocSignatureSpan">node-xmpp.server.</span>ComponentServer
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.ComponentServer.super_">
            function <span class="apidocSignatureSpan">node-xmpp.server.ComponentServer.</span>super_
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.node-xmpp.server.ComponentServer.prototype">module node-xmpp.server.ComponentServer.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.ComponentServer.prototype.Session">
            function <span class="apidocSignatureSpan">node-xmpp.server.ComponentServer.prototype.</span>Session
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">node-xmpp.server.ComponentServer.prototype.</span>DEFAULT_PORT</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.node-xmpp.server.ComponentStream">module node-xmpp.server.ComponentStream</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.ComponentStream.ComponentStream">
            function <span class="apidocSignatureSpan">node-xmpp.server.</span>ComponentStream
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.ComponentStream.super_">
            function <span class="apidocSignatureSpan">node-xmpp.server.ComponentStream.</span>super_
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.node-xmpp.server.ComponentStream.prototype">module node-xmpp.server.ComponentStream.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.ComponentStream.prototype._addConnectionListeners">
            function <span class="apidocSignatureSpan">node-xmpp.server.ComponentStream.prototype.</span>_addConnectionListeners
            <span class="apidocSignatureSpan">(con)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.ComponentStream.prototype._sha1Hex">
            function <span class="apidocSignatureSpan">node-xmpp.server.ComponentStream.prototype.</span>_sha1Hex
            <span class="apidocSignatureSpan">(s)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.ComponentStream.prototype.end">
            function <span class="apidocSignatureSpan">node-xmpp.server.ComponentStream.prototype.</span>end
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.ComponentStream.prototype.onStanza">
            function <span class="apidocSignatureSpan">node-xmpp.server.ComponentStream.prototype.</span>onStanza
            <span class="apidocSignatureSpan">(stanza)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.ComponentStream.prototype.onStreamStart">
            function <span class="apidocSignatureSpan">node-xmpp.server.ComponentStream.prototype.</span>onStreamStart
            <span class="apidocSignatureSpan">(streamAttrs)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.ComponentStream.prototype.send">
            function <span class="apidocSignatureSpan">node-xmpp.server.ComponentStream.prototype.</span>send
            <span class="apidocSignatureSpan">(stanza)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">node-xmpp.server.ComponentStream.prototype.</span>NS_COMPONENT</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">node-xmpp.server.ComponentStream.prototype.</span>NS_STREAM</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.node-xmpp.server.Router">module node-xmpp.server.Router</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.Router.Router">
            function <span class="apidocSignatureSpan">node-xmpp.server.</span>Router
            <span class="apidocSignatureSpan">(s2sPort, bindAddress, opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.Router.super_">
            function <span class="apidocSignatureSpan">node-xmpp.server.Router.</span>super_
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.node-xmpp.server.Router.prototype">module node-xmpp.server.Router.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.Router.prototype.acceptConnection">
            function <span class="apidocSignatureSpan">node-xmpp.server.Router.prototype.</span>acceptConnection
            <span class="apidocSignatureSpan">(socket)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.Router.prototype.addSecureDomain">
            function <span class="apidocSignatureSpan">node-xmpp.server.Router.prototype.</span>addSecureDomain
            <span class="apidocSignatureSpan">(domain)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.Router.prototype.close">
            function <span class="apidocSignatureSpan">node-xmpp.server.Router.prototype.</span>close
            <span class="apidocSignatureSpan">(callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.Router.prototype.getContext">
            function <span class="apidocSignatureSpan">node-xmpp.server.Router.prototype.</span>getContext
            <span class="apidocSignatureSpan">(domain)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.Router.prototype.hasContext">
            function <span class="apidocSignatureSpan">node-xmpp.server.Router.prototype.</span>hasContext
            <span class="apidocSignatureSpan">(domain)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.Router.prototype.loadCredentials">
            function <span class="apidocSignatureSpan">node-xmpp.server.Router.prototype.</span>loadCredentials
            <span class="apidocSignatureSpan">(domain, key, cert, ca)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.Router.prototype.loadCredentialsFromFile">
            function <span class="apidocSignatureSpan">node-xmpp.server.Router.prototype.</span>loadCredentialsFromFile
            <span class="apidocSignatureSpan">(domain, keyPath, certPath, caPath)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.Router.prototype.register">
            function <span class="apidocSignatureSpan">node-xmpp.server.Router.prototype.</span>register
            <span class="apidocSignatureSpan">(domain, listener)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.Router.prototype.send">
            function <span class="apidocSignatureSpan">node-xmpp.server.Router.prototype.</span>send
            <span class="apidocSignatureSpan">(stanza)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.Router.prototype.unregister">
            function <span class="apidocSignatureSpan">node-xmpp.server.Router.prototype.</span>unregister
            <span class="apidocSignatureSpan">(domain)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">node-xmpp.server.Router.prototype.</span>keepAlive</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">node-xmpp.server.Router.prototype.</span>maxStanzaSize</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">node-xmpp.server.Router.prototype.</span>rateLimit</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">node-xmpp.server.Router.prototype.</span>streamTimeout</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">node-xmpp.server.Router.prototype.</span>credentials</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.node-xmpp.server.WebSocketServer">module node-xmpp.server.WebSocketServer</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.WebSocketServer.WebSocketServer">
            function <span class="apidocSignatureSpan">node-xmpp.server.</span>WebSocketServer
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.WebSocketServer.super_">
            function <span class="apidocSignatureSpan">node-xmpp.server.WebSocketServer.</span>super_
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.node-xmpp.server._Server">module node-xmpp.server._Server</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server._Server._Server">
            function <span class="apidocSignatureSpan">node-xmpp.server.</span>_Server
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server._Server.super_">
            function <span class="apidocSignatureSpan">node-xmpp.server._Server.</span>super_
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.node-xmpp.server._Server.prototype">module node-xmpp.server._Server.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server._Server.prototype.acceptConnection">
            function <span class="apidocSignatureSpan">node-xmpp.server._Server.prototype.</span>acceptConnection
            <span class="apidocSignatureSpan">(socket)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server._Server.prototype.close">
            function <span class="apidocSignatureSpan">node-xmpp.server._Server.prototype.</span>close
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server._Server.prototype.end">
            function <span class="apidocSignatureSpan">node-xmpp.server._Server.prototype.</span>end
            <span class="apidocSignatureSpan">(fn)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server._Server.prototype.endSessions">
            function <span class="apidocSignatureSpan">node-xmpp.server._Server.prototype.</span>endSessions
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server._Server.prototype.listen">
            function <span class="apidocSignatureSpan">node-xmpp.server._Server.prototype.</span>listen
            <span class="apidocSignatureSpan">(port, host, fn)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server._Server.prototype.onConnection">
            function <span class="apidocSignatureSpan">node-xmpp.server._Server.prototype.</span>onConnection
            <span class="apidocSignatureSpan">(connection)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server._Server.prototype.onConnectionClosed">
            function <span class="apidocSignatureSpan">node-xmpp.server._Server.prototype.</span>onConnectionClosed
            <span class="apidocSignatureSpan">(connection)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server._Server.prototype.shutdown">
            function <span class="apidocSignatureSpan">node-xmpp.server._Server.prototype.</span>shutdown
            <span class="apidocSignatureSpan">(fn)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">node-xmpp.server._Server.prototype.</span>DEFAULT_PORT</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">node-xmpp.server._Server.prototype.</span>Session</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.node-xmpp.server.auth">module node-xmpp.server.auth</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.auth.AbstractMechanism">
            function <span class="apidocSignatureSpan">node-xmpp.server.auth.</span>AbstractMechanism
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.auth.Anonymous">
            function <span class="apidocSignatureSpan">node-xmpp.server.auth.</span>Anonymous
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.auth.DigestMD5">
            function <span class="apidocSignatureSpan">node-xmpp.server.auth.</span>DigestMD5
            <span class="apidocSignatureSpan">(domain)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.auth.Mechanism">
            function <span class="apidocSignatureSpan">node-xmpp.server.auth.</span>Mechanism
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.auth.Plain">
            function <span class="apidocSignatureSpan">node-xmpp.server.auth.</span>Plain
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.auth.XOAuth2">
            function <span class="apidocSignatureSpan">node-xmpp.server.auth.</span>XOAuth2
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.node-xmpp.server.auth.AbstractMechanism.prototype">module node-xmpp.server.auth.AbstractMechanism.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.auth.AbstractMechanism.prototype.authenticate">
            function <span class="apidocSignatureSpan">node-xmpp.server.auth.AbstractMechanism.prototype.</span>authenticate
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.auth.AbstractMechanism.prototype.extractSasl">
            function <span class="apidocSignatureSpan">node-xmpp.server.auth.AbstractMechanism.prototype.</span>extractSasl
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.auth.AbstractMechanism.prototype.failure">
            function <span class="apidocSignatureSpan">node-xmpp.server.auth.AbstractMechanism.prototype.</span>failure
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.auth.AbstractMechanism.prototype.manageAuth">
            function <span class="apidocSignatureSpan">node-xmpp.server.auth.AbstractMechanism.prototype.</span>manageAuth
            <span class="apidocSignatureSpan">(stanza)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.auth.AbstractMechanism.prototype.success">
            function <span class="apidocSignatureSpan">node-xmpp.server.auth.AbstractMechanism.prototype.</span>success
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.node-xmpp.server.auth.Anonymous.prototype">module node-xmpp.server.auth.Anonymous.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.auth.Anonymous.prototype.extractSasl">
            function <span class="apidocSignatureSpan">node-xmpp.server.auth.Anonymous.prototype.</span>extractSasl
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">node-xmpp.server.auth.Anonymous.prototype.</span>name</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.node-xmpp.server.auth.DigestMD5.prototype">module node-xmpp.server.auth.DigestMD5.prototype</a><ol>

        <li>

            <span class="apidocSignatureSpan">boolean <span class="apidocSignatureSpan">node-xmpp.server.auth.DigestMD5.prototype.</span>manage</span>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.auth.DigestMD5.prototype.auth">
            function <span class="apidocSignatureSpan">node-xmpp.server.auth.DigestMD5.prototype.</span>auth
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.auth.DigestMD5.prototype.checkResponse">
            function <span class="apidocSignatureSpan">node-xmpp.server.auth.DigestMD5.prototype.</span>checkResponse
            <span class="apidocSignatureSpan">(s)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.auth.DigestMD5.prototype.getNC">
            function <span class="apidocSignatureSpan">node-xmpp.server.auth.DigestMD5.prototype.</span>getNC
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.auth.DigestMD5.prototype.loginFailed">
            function <span class="apidocSignatureSpan">node-xmpp.server.auth.DigestMD5.prototype.</span>loginFailed
            <span class="apidocSignatureSpan">(server)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.auth.DigestMD5.prototype.manageAuth">
            function <span class="apidocSignatureSpan">node-xmpp.server.auth.DigestMD5.prototype.</span>manageAuth
            <span class="apidocSignatureSpan">(stanza, server)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.auth.DigestMD5.prototype.responseValue">
            function <span class="apidocSignatureSpan">node-xmpp.server.auth.DigestMD5.prototype.</span>responseValue
            <span class="apidocSignatureSpan">(s, password)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.auth.DigestMD5.prototype.serverChallenge">
            function <span class="apidocSignatureSpan">node-xmpp.server.auth.DigestMD5.prototype.</span>serverChallenge
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">node-xmpp.server.auth.DigestMD5.prototype.</span>name</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.node-xmpp.server.auth.Plain.prototype">module node-xmpp.server.auth.Plain.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.auth.Plain.prototype.extractSasl">
            function <span class="apidocSignatureSpan">node-xmpp.server.auth.Plain.prototype.</span>extractSasl
            <span class="apidocSignatureSpan">(auth)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">node-xmpp.server.auth.Plain.prototype.</span>name</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.node-xmpp.server.auth.XOAuth2.prototype">module node-xmpp.server.auth.XOAuth2.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.auth.XOAuth2.prototype.extractSasl">
            function <span class="apidocSignatureSpan">node-xmpp.server.auth.XOAuth2.prototype.</span>extractSasl
            <span class="apidocSignatureSpan">(auth)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">node-xmpp.server.auth.XOAuth2.prototype.</span>name</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.node-xmpp.server.component">module node-xmpp.server.component</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.component.Server">
            function <span class="apidocSignatureSpan">node-xmpp.server.component.</span>Server
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.server.component.Session">
            function <span class="apidocSignatureSpan">node-xmpp.server.component.</span>Session
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.node-xmpp.stanza">module node-xmpp.stanza</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.stanza.stanza">
            function <span class="apidocSignatureSpan">node-xmpp.</span>stanza
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.stanza.Element">
            function <span class="apidocSignatureSpan">node-xmpp.stanza.</span>Element
            <span class="apidocSignatureSpan">(name, attrs)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.stanza.IQ">
            function <span class="apidocSignatureSpan">node-xmpp.stanza.</span>IQ
            <span class="apidocSignatureSpan">(attrs)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.stanza.Message">
            function <span class="apidocSignatureSpan">node-xmpp.stanza.</span>Message
            <span class="apidocSignatureSpan">(attrs)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.stanza.Parser">
            function <span class="apidocSignatureSpan">node-xmpp.stanza.</span>Parser
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.stanza.Presence">
            function <span class="apidocSignatureSpan">node-xmpp.stanza.</span>Presence
            <span class="apidocSignatureSpan">(attrs)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.stanza.Stanza">
            function <span class="apidocSignatureSpan">node-xmpp.stanza.</span>Stanza
            <span class="apidocSignatureSpan">(name, attrs)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.stanza.attrsEqual">
            function <span class="apidocSignatureSpan">node-xmpp.stanza.</span>attrsEqual
            <span class="apidocSignatureSpan">(a, b)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.stanza.childrenEqual">
            function <span class="apidocSignatureSpan">node-xmpp.stanza.</span>childrenEqual
            <span class="apidocSignatureSpan">(a, b)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.stanza.clone">
            function <span class="apidocSignatureSpan">node-xmpp.stanza.</span>clone
            <span class="apidocSignatureSpan">(el)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.stanza.createElement">
            function <span class="apidocSignatureSpan">node-xmpp.stanza.</span>createElement
            <span class="apidocSignatureSpan">(name, attrs)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.stanza.createStanza">
            function <span class="apidocSignatureSpan">node-xmpp.stanza.</span>createStanza
            <span class="apidocSignatureSpan">(name, attrs)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.stanza.equal">
            function <span class="apidocSignatureSpan">node-xmpp.stanza.</span>equal
            <span class="apidocSignatureSpan">(a, b)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.stanza.escapeXML">
            function <span class="apidocSignatureSpan">node-xmpp.stanza.</span>escapeXML
            <span class="apidocSignatureSpan">(s)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.stanza.escapeXMLText">
            function <span class="apidocSignatureSpan">node-xmpp.stanza.</span>escapeXMLText
            <span class="apidocSignatureSpan">(s)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.stanza.isElement">
            function <span class="apidocSignatureSpan">node-xmpp.stanza.</span>isElement
            <span class="apidocSignatureSpan">(el)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.stanza.isNode">
            function <span class="apidocSignatureSpan">node-xmpp.stanza.</span>isNode
            <span class="apidocSignatureSpan">(el)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.stanza.isText">
            function <span class="apidocSignatureSpan">node-xmpp.stanza.</span>isText
            <span class="apidocSignatureSpan">(el)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.stanza.ltx">
            function <span class="apidocSignatureSpan">node-xmpp.stanza.</span>ltx
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.stanza.nameEqual">
            function <span class="apidocSignatureSpan">node-xmpp.stanza.</span>nameEqual
            <span class="apidocSignatureSpan">(a, b)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.stanza.parse">
            function <span class="apidocSignatureSpan">node-xmpp.stanza.</span>parse
            <span class="apidocSignatureSpan">(data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.stanza.stringify">
            function <span class="apidocSignatureSpan">node-xmpp.stanza.</span>stringify
            <span class="apidocSignatureSpan">(el, indent, level)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.stanza.tag">
            function <span class="apidocSignatureSpan">node-xmpp.stanza.</span>tag
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.stanza.tagString">
            function <span class="apidocSignatureSpan">node-xmpp.stanza.</span>tagString
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.stanza.unescapeXML">
            function <span class="apidocSignatureSpan">node-xmpp.stanza.</span>unescapeXML
            <span class="apidocSignatureSpan">(s)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-xmpp.stanza.unescapeXMLText">
            function <span class="apidocSignatureSpan">node-xmpp.stanza.</span>unescapeXMLText
            <span class="apidocSignatureSpan">(s)</span>
            </a>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.node-xmpp" id="apidoc.module.node-xmpp">module node-xmpp</a></h1>


    <h2>
        <a href="#apidoc.element.node-xmpp.Client" id="apidoc.element.node-xmpp.Client">
        function <span class="apidocSignatureSpan">node-xmpp.</span>Client
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Client(options) {
  this.options = {}
  if (options) this.options = options
  this.availableSaslMechanisms = [
    XOAuth2, External, DigestMD5, Plain, Anonymous
  ]

  if (this.options.autostart !== false) this.connect()
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Client.super_" id="apidoc.element.node-xmpp.Client.super_">
        function <span class="apidocSignatureSpan">node-xmpp.</span>Client.super_
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Session(opts) {
  EventEmitter.call(this)

  this.setOptions(opts)

  if (opts.websocket &#x26;&#x26; opts.websocket.url) {
    debug(&#x27;start websocket connection&#x27;)
    this._setupWebsocketConnection(opts)
  } else if (opts.bosh &#x26;&#x26; opts.bosh.url) {
    debug(&#x27;start bosh connection&#x27;)
    this._setupBoshConnection(opts)
  } else {
    debug(&#x27;start socket connection&#x27;)
    this._setupSocketConnection(opts)
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Component" id="apidoc.element.node-xmpp.Component">
        function <span class="apidocSignatureSpan">node-xmpp.</span>Component
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Component(opts) {
  EventEmitter.call(this)
  var conn = this.connection = new Connection(opts)
  this._addConnectionListeners()

  if (typeof opts.jid === &#x27;string&#x27;) {
    conn.jid = new JID(opts.jid)
  } else {
    conn.jid = opts.jid
  }
  conn.password = opts.password
  conn.xmlns[&#x27;&#x27;] = this.NS_COMPONENT
  conn.xmlns[&#x27;stream&#x27;] = this.NS_STREAM
  conn.streamTo = this.connection.jid.domain

  conn.listen({
    socket: SRV.connect({
      services: [],
      domain: opts.host,
      defaultPort: opts.port,
      socket: opts.socket
    })
  })
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Connection" id="apidoc.element.node-xmpp.Connection">
        function <span class="apidocSignatureSpan">node-xmpp.</span>Connection
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Connection(opts) {
  EventEmitter.call(this)

  this.streamAttrs = (opts &#x26;&#x26; opts.streamAttrs) || {}
  this.xmlns = (opts &#x26;&#x26; opts.xmlns) || {}
  this.xmlns.stream = NS_STREAM

  this.streamOpen = (opts &#x26;&#x26; opts.streamOpen) || STREAM_OPEN
  this.streamClose = (opts &#x26;&#x26; opts.streamClose) || STREAM_CLOSE

  this.rejectUnauthorized = !!(opts &#x26;&#x26; opts.rejectUnauthorized)
  this.serialized = !!(opts &#x26;&#x26; opts.serialized)
  this.requestCert = !!(opts &#x26;&#x26; opts.requestCert)

  this.servername = (opts &#x26;&#x26; opts.servername)

  this.boundOnData = this.onData.bind(this)
  this.boundOnClose = this.onClose.bind(this)
  this.boundEmitData = this.emit.bind(this, &#x27;data&#x27;)
  this.boundEmitDrain = this.emit.bind(this, &#x27;drain&#x27;)

  this._setupSocket(defaultInjection(this, opts))
  this.once(&#x27;reconnect&#x27;, function () {
    this.reconnect = opts &#x26;&#x26; opts.reconnect
  })
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Element" id="apidoc.element.node-xmpp.Element">
        function <span class="apidocSignatureSpan">node-xmpp.</span>Element
        <span class="apidocSignatureSpan">(name, attrs)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Element(name, attrs) {
  this.name = name
  this.parent = null
  this.children = []
  this.attrs = {}
  this.setAttrs(attrs)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.IQ" id="apidoc.element.node-xmpp.IQ">
        function <span class="apidocSignatureSpan">node-xmpp.</span>IQ
        <span class="apidocSignatureSpan">(attrs)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function IQ(attrs) {
  Stanza.call(this, &#x27;iq&#x27;, attrs)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.JID" id="apidoc.element.node-xmpp.JID">
        function <span class="apidocSignatureSpan">node-xmpp.</span>JID
        <span class="apidocSignatureSpan">(a, b, c)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function createJID(a, b, c) {
  if (Array.isArray(a)) {
    return tag.apply(null, arguments)
  }

  return new JID(a, b, c)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.JID.JID" id="apidoc.element.node-xmpp.JID.JID">
        function <span class="apidocSignatureSpan">node-xmpp.</span>JID.JID
        <span class="apidocSignatureSpan">(a, b, c)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function JID(a, b, c) {
  this._local = null
  this.user = null // DEPRECATED
  this._domain = null
  this._resource = null

  if (a &#x26;&#x26; (!b) &#x26;&#x26; (!c)) {
    this.parseJID(a)
  } else if (b) {
    this.setLocal(a)
    this.setDomain(b)
    this.setResource(c)
  } else {
    throw new Error(&#x27;Argument error&#x27;)
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Message" id="apidoc.element.node-xmpp.Message">
        function <span class="apidocSignatureSpan">node-xmpp.</span>Message
        <span class="apidocSignatureSpan">(attrs)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Message(attrs) {
  Stanza.call(this, &#x27;message&#x27;, attrs)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Parser" id="apidoc.element.node-xmpp.Parser">
        function <span class="apidocSignatureSpan">node-xmpp.</span>Parser
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Parser(options) {
  LtxParser.call(this, options)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Parser.super_" id="apidoc.element.node-xmpp.Parser.super_">
        function <span class="apidocSignatureSpan">node-xmpp.</span>Parser.super_
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Parser.super_ = function (options) {
  EventEmitter.call(this)

  var ParserInterface = this.Parser = (options &#x26;&#x26; options.Parser) || this.DefaultParser
  var ElementInterface = this.Element = (options &#x26;&#x26; options.Element) || this.DefaultElement

  this.parser = new ParserInterface()

  var el
  var self = this
  this.parser.on(&#x27;startElement&#x27;, function (name, attrs) {
    var child = new ElementInterface(name, attrs)
    if (!el) {
      el = child
    } else {
      el = el.cnode(child)
    }
  })
  this.parser.on(&#x27;endElement&#x27;, function (name) {
    if (!el) {
<span class="apidocCodeCommentSpan">      /* Err */
</span>    } else if (name === el.name) {
      if (el.parent) {
        el = el.parent
      } else if (!self.tree) {
        self.tree = el
        el = undefined
      }
    }
  })
  this.parser.on(&#x27;text&#x27;, function (str) {
    if (el) {
      el.t(str)
    }
  })
  this.parser.on(&#x27;error&#x27;, function (e) {
    self.error = e
    self.emit(&#x27;error&#x27;, e)
  })
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Parser.super_.prototype.DefaultParser" id="apidoc.element.node-xmpp.Parser.super_.prototype.DefaultParser">
        function <span class="apidocSignatureSpan">node-xmpp.</span>Parser.super_.prototype.DefaultParser
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function SaxLtx() {
  EventEmitter.call(this)

  var state = STATE_TEXT
  var remainder
  var tagName
  var attrs
  var endTag
  var selfClosing
  var attrQuote
  var recordStart = 0
  var attrName

  this._handleTagOpening = function (endTag, tagName, attrs) {
    if (!endTag) {
      this.emit(&#x27;startElement&#x27;, tagName, attrs)
      if (selfClosing) {
        this.emit(&#x27;endElement&#x27;, tagName)
      }
    } else {
      this.emit(&#x27;endElement&#x27;, tagName)
    }
  }

  this.write = function (data) {
    if (typeof data !== &#x27;string&#x27;) {
      data = data.toString()
    }
    var pos = 0

<span class="apidocCodeCommentSpan">    /* Anything from previous write()? */
</span>    if (remainder) {
      data = remainder + data
      pos += remainder.length
      remainder = null
    }

    function endRecording () {
      if (typeof recordStart === &#x27;number&#x27;) {
        var recorded = data.slice(recordStart, pos)
        recordStart = undefined
        return recorded
      }
    }

    for (; pos &#x3c; data.length; pos++) {
      var c = data.charCodeAt(pos)
      switch (state) {
        case STATE_TEXT:
          if (c === 60 /* &#x3c; */) {
            var text = endRecording()
            if (text) {
              this.emit(&#x27;text&#x27;, unescapeXML(text))
            }
            state = STATE_TAG_NAME
            recordStart = pos + 1
            attrs = {}
          }
          break
        case STATE_CDATA:
          if (c === 93 /* ] */ &#x26;&#x26; data.substr(pos + 1, 2) === &#x27;]&#x3e;&#x27;) {
            var cData = endRecording()
            if (cData) {
              this.emit(&#x27;text&#x27;, cData)
            }
            state = STATE_IGNORE_COMMENT
          }
          break
        case STATE_TAG_NAME:
          if (c === 47 /* / */ &#x26;&#x26; recordStart === pos) {
            recordStart = pos + 1
            endTag = true
          } else if (c === 33 /* ! */) {
            if (data.substr(pos + 1, 7) === &#x27;[CDATA[&#x27;) {
              recordStart = pos + 8
              state = STATE_CDATA
            } else {
              recordStart = undefined
              state = STATE_IGNORE_COMMENT
            }
          } else if (c === 63 /* ? */) {
            recordStart = undefined
            state = STATE_IGNORE_INSTRUCTION
          } else if (c &#x3c;= 32 || c === 47 /* / */ || c === 62 /* &#x3e; */) {
            tagName = endRecording()
            pos--
            state = STATE_TAG
          }
          break
        case STATE_IGNORE_COMMENT:
          if (c === 62 /* &#x3e; */) {
            var prevFirst = data.charCodeAt(pos - 1)
            var prevSecond = data.charCodeAt(pos - 2)
            if ((prevFirst === 45 /* - */ &#x26;&#x26; prevSecond === 45 /* - */) ||
                (prevFirst === 93 /* ] */ &#x26;&#x26; prevSecond === 93 /* ] */)) {
              state = STATE_TEXT
            }
          }
          break
        case STATE_IGNORE_INSTRUCTION:
          if (c === 62 /* &#x3e; */) {
            var prev = data.charCodeAt(pos - 1)
            if (prev === 63 /* ? */) {
              state = STATE_TEXT
            }
          }
          break
        case STATE_TAG:
          if (c === 62 /* &#x3e; */) {
            this._handleTagOpening(endTag, tagName, attrs)
            tagName = undefined
            attrs = undefined
            endTag = undefined
            selfClosing = undefined
            state = STATE_TEXT
            recordStart = pos + 1
          } else if (c === 47 /* / */) {
            selfClosing = true
          } else if (c &#x3e; 32) {
            recordStart = pos
            state = STATE_ATTR_NAME
          }
          break
        case STATE_ATTR_NAME:
          if (c &#x3c;= 32 || c === 61 /* = */) {
            attrName = endRecording()
            pos--
            state = STATE_ATTR_EQ
          }
          break
        case STATE_ATTR_EQ:
          if (c === 61 /* = */) {
            state = STATE_ATTR_QUOT
          }
          break
        case STATE_ATTR_QUOT:
          if (c === 34 /* &#x22; */ || c === 39 /* &#x27; */) {
            attrQuote = c
            state = STATE_ATTR_VALUE
            recordStart = pos + 1
          }
          break
        case STATE_ATTR_VALUE:
          if (c === attrQuote) { ...</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Presence" id="apidoc.element.node-xmpp.Presence">
        function <span class="apidocSignatureSpan">node-xmpp.</span>Presence
        <span class="apidocSignatureSpan">(attrs)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Presence(attrs) {
  Stanza.call(this, &#x27;presence&#x27;, attrs)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Stanza" id="apidoc.element.node-xmpp.Stanza">
        function <span class="apidocSignatureSpan">node-xmpp.</span>Stanza
        <span class="apidocSignatureSpan">(name, attrs)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Stanza(name, attrs) {
  Element.call(this, name, attrs)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.StreamParser" id="apidoc.element.node-xmpp.StreamParser">
        function <span class="apidocSignatureSpan">node-xmpp.</span>StreamParser
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function StreamParser(options) {
  EventEmitter.call(this)
  var self = this

  var ElementInterface = (options &#x26;&#x26; options.Element) || Element
  var ParserInterface = (options &#x26;&#x26; options.Parser) || LtxParser
  this.maxStanzaSize = options &#x26;&#x26; options.maxStanzaSize
  this.parser = new ParserInterface()

<span class="apidocCodeCommentSpan">  /* Count traffic for entire life-time */
</span>  this.bytesParsed = 0
  /* Will be reset upon first stanza, but enforce maxStanzaSize until it is parsed */
  this.bytesParsedOnStanzaBegin = 0

  this.parser.on(&#x27;startElement&#x27;, function (name, attrs) {
    if (!self.element) {
      self.emit(&#x27;startElement&#x27;, name, attrs)
      self.emit(&#x27;start&#x27;, new Element(name, attrs))
    }

    // TODO: refuse anything but &#x3c;stream:stream&#x3e;
    if (!self.element &#x26;&#x26; (name === &#x27;stream:stream&#x27;)) {
      self.emit(&#x27;streamStart&#x27;, attrs)
    } else {
      var child
      if (!self.element) {
        /* A new stanza */
        child = new Stanza(name, attrs)
        self.element = child
        /* For maxStanzaSize enforcement */
        self.bytesParsedOnStanzaBegin = self.bytesParsed
      } else {
        /* A child element of a stanza */
        child = new ElementInterface(name, attrs)
        self.element = self.element.cnode(child)
      }
    }
  })

  this.parser.on(&#x27;endElement&#x27;, function (name) {
    if (!self.element) {
      self.emit(&#x27;endElement&#x27;, name)
    }

    if (!self.element &#x26;&#x26; (name === &#x27;stream:stream&#x27;)) {
      self.end()
    } else if (self.element &#x26;&#x26; (name === self.element.name)) {
      if (self.element.parent) {
        self.element = self.element.parent
      } else {
        /* element complete */
        self.emit(&#x27;element&#x27;, self.element)
        self.emit(&#x27;stanza&#x27;, self.element) // FIXME deprecate
        delete self.element
        /* maxStanzaSize doesn&#x27;t apply until next startElement */
        delete self.bytesParsedOnStanzaBegin
      }
    } else {
      self.error(&#x27;xml-not-well-formed&#x27;, &#x27;XML parse error&#x27;)
    }
  })

  this.parser.on(&#x27;text&#x27;, function (str) {
    if (self.element) self.element.t(str)
  })

  this.parser.on(&#x27;entityDecl&#x27;, function () {
    /* Entity declarations are forbidden in XMPP. We must abort to
     * avoid a billion laughs.
     */
    self.error(&#x27;xml-not-well-formed&#x27;, &#x27;No entity declarations allowed&#x27;)
    self.end()
  })

  this.parser.on(&#x27;error&#x27;, this.emit.bind(this, &#x27;error&#x27;))
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.createElement" id="apidoc.element.node-xmpp.createElement">
        function <span class="apidocSignatureSpan">node-xmpp.</span>createElement
        <span class="apidocSignatureSpan">(name, attrs)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function createElement(name, attrs) {
  var el = new Element(name, attrs)

  for (var i = 2; i &#x3c; arguments.length; i++) {
    var child = arguments[i]
    if (child) el.cnode(child)
  }

  return el
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.createStanza" id="apidoc.element.node-xmpp.createStanza">
        function <span class="apidocSignatureSpan">node-xmpp.</span>createStanza
        <span class="apidocSignatureSpan">(name, attrs)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function createStanza(name, attrs) {
  var el

  switch (name) {
    case &#x27;presence&#x27;:
    case &#x27;message&#x27;:
    case &#x27;iq&#x27;:
      el = new Stanza(name, attrs)
      break
    default:
      el = new Element(name, attrs)
  }

  var children = Array.prototype.slice.call(arguments, 2)

  children.forEach(function (child) {
    el.cnode(child)
  })
  return el
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.escapeXML" id="apidoc.element.node-xmpp.escapeXML">
        function <span class="apidocSignatureSpan">node-xmpp.</span>escapeXML
        <span class="apidocSignatureSpan">(s)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function escapeXML(s) {
  return s.replace(/&#x26;|&#x3c;|&#x3e;|&#x22;|&#x27;/g, escapeXMLReplace)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.escapeXMLText" id="apidoc.element.node-xmpp.escapeXMLText">
        function <span class="apidocSignatureSpan">node-xmpp.</span>escapeXMLText
        <span class="apidocSignatureSpan">(s)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function escapeXMLText(s) {
  return s.replace(/&#x26;|&#x3c;|&#x3e;/g, escapeXMLReplace)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.inherits" id="apidoc.element.node-xmpp.inherits">
        function <span class="apidocSignatureSpan">node-xmpp.</span>inherits
        <span class="apidocSignatureSpan">(ctor, superCtor)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">inherits = function (ctor, superCtor) {

  if (ctor === undefined || ctor === null)
    throw new TypeError(&#x27;The constructor to &#x22;inherits&#x22; must not be &#x27; +
                        &#x27;null or undefined&#x27;);

  if (superCtor === undefined || superCtor === null)
    throw new TypeError(&#x27;The super constructor to &#x22;inherits&#x22; must not &#x27; +
                        &#x27;be null or undefined&#x27;);

  if (superCtor.prototype === undefined)
    throw new TypeError(&#x27;The super constructor to &#x22;inherits&#x22; must &#x27; +
                        &#x27;have a prototype&#x27;);

  ctor.super_ = superCtor;
  Object.setPrototypeOf(ctor.prototype, superCtor.prototype);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.ltx" id="apidoc.element.node-xmpp.ltx">
        function <span class="apidocSignatureSpan">node-xmpp.</span>ltx
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function ltx() {
  return tag.apply(null, arguments)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.parse" id="apidoc.element.node-xmpp.parse">
        function <span class="apidocSignatureSpan">node-xmpp.</span>parse
        <span class="apidocSignatureSpan">(data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function parse(data) {
  return ltxParse(data, Parser)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.BOSHServer" id="apidoc.element.node-xmpp.server.BOSHServer">
        function <span class="apidocSignatureSpan">node-xmpp.</span>server.BOSHServer
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function BOSHServer(opts) {
  var options = opts || {}
  var server = this.server = new Server({
    server: options.server,
    cors: options.cors,
    nextRequestTimeout: options.nextRequestTimeout
  })
  server.on(&#x27;close&#x27;, this.emit.bind(this, &#x27;close&#x27;))
  server.on(&#x27;error&#x27;, this.emit.bind(this, &#x27;error&#x27;))
  server.on(&#x27;listening&#x27;, this.emit.bind(this, &#x27;listening&#x27;))
  server.on(&#x27;connection&#x27;, this.acceptConnection.bind(this))

  C2SServer.call(this, options)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.C2SServer" id="apidoc.element.node-xmpp.server.C2SServer">
        function <span class="apidocSignatureSpan">node-xmpp.</span>server.C2SServer
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function TCPServer(options) {
  var server = this.server = serverStop(options &#x26;&#x26; options.server || net.createServer())
  server.on(&#x27;connection&#x27;, this.acceptConnection.bind(this))
  server.on(&#x27;close&#x27;, this.emit.bind(this, &#x27;close&#x27;))
  server.on(&#x27;error&#x27;, this.emit.bind(this, &#x27;error&#x27;))
  server.on(&#x27;listening&#x27;, this.emit.bind(this, &#x27;listening&#x27;))

  C2SServer.call(this, options)
  this._setupTls()
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.C2SStream" id="apidoc.element.node-xmpp.server.C2SStream">
        function <span class="apidocSignatureSpan">node-xmpp.</span>server.C2SStream
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Session(opts) {
  this.authenticated = false
  this.server = opts.server
  this.generateId = rack(opts.idBits, opts.idBitsBase, opts.idBitsExpandBy)

  this.connection = opts.connection || new Connection({
    rejectUnauthorized: opts.rejectUnauthorized,
    requestCert: opts.requestCert,
    reconnect: false,
    streamOpen: opts.streamOpen,
    streamClose: opts.streamClose,
    streamAttrs: opts.streamAttrs
  })
  this._addConnectionListeners()
  if (this.connection.xmlns) {
    this.connection.xmlns[&#x27;&#x27;] = NS_CLIENT
  }
  this.connection.streamAttrs.version = &#x27;1.0&#x27;
  this.connection.streamAttrs.id = this.generateId()

  if (this.connection.connect) {
    this.connection.connect({socket: opts.socket})
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.ComponentServer" id="apidoc.element.node-xmpp.server.ComponentServer">
        function <span class="apidocSignatureSpan">node-xmpp.</span>server.ComponentServer
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function ComponentServer(options) {
  var server = this.server = (options &#x26;&#x26; options.server || net.createServer())
  server.on(&#x27;connection&#x27;, this.acceptConnection.bind(this))
  server.on(&#x27;close&#x27;, this.emit.bind(this, &#x27;close&#x27;))
  server.on(&#x27;error&#x27;, this.emit.bind(this, &#x27;error&#x27;))
  server.on(&#x27;listening&#x27;, this.emit.bind(this, &#x27;listening&#x27;))

  Server.call(this, options)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.ComponentStream" id="apidoc.element.node-xmpp.server.ComponentStream">
        function <span class="apidocSignatureSpan">node-xmpp.</span>server.ComponentStream
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function ComponentSession(opts) {
  EventEmitter.call(this)
  this.connection = opts.connection || new Connection()
  this._addConnectionListeners()
  this.connection.xmlns[&#x27;&#x27;] = this.NS_COMPONENT
  this.connection.xmlns.stream = this.NS_STREAM
  if (this.connection.connect) {
    this.connection.connect({socket: opts.socket})
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.Router" id="apidoc.element.node-xmpp.server.Router">
        function <span class="apidocSignatureSpan">node-xmpp.</span>server.Router
        <span class="apidocSignatureSpan">(s2sPort, bindAddress, opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Router(s2sPort, bindAddress, opts) {
  EventEmitter.call(this)
  this.ctxs = {}

  opts = opts || {}

  this.generateId = rack(opts.idBits, opts.idBitsBase, opts.idBitsExpandBy)

  if (opts.secureDomains &#x26;&#x26; opts.secureDomains.length) {
    opts.secureDomains.forEach(this.addSecureDomain, this)
  }

  // start tcp socket
  this._server = net.createServer(function (socket) {
    this.acceptConnection(socket)
  }.bind(this)).listen(s2sPort || 5269, bindAddress || &#x27;::&#x27;)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.WebSocketServer" id="apidoc.element.node-xmpp.server.WebSocketServer">
        function <span class="apidocSignatureSpan">node-xmpp.</span>server.WebSocketServer
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function WebSocketServer(opts) {
  var options = opts || {}
  var server = this.server = serverStop(options.server || http.createServer())
  server.on(&#x27;close&#x27;, this.emit.bind(this, &#x27;close&#x27;))
  server.on(&#x27;error&#x27;, this.emit.bind(this, &#x27;error&#x27;))
  server.on(&#x27;listening&#x27;, this.emit.bind(this, &#x27;listening&#x27;))

  var WS = this.WS = new ws.Server({server: server})
  var self = this
  WS.on(&#x27;connection&#x27;, function (socket) {
    self.acceptConnection(new Socket(socket))
  })

  options.streamOpen = &#x27;open&#x27;
  options.streamClose = &#x27;close&#x27;
  options.streamAttrs = {&#x27;xmlns&#x27;: XMPP_FRAMING}

  C2SServer.call(this, options)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server._Server" id="apidoc.element.node-xmpp.server._Server">
        function <span class="apidocSignatureSpan">node-xmpp.</span>server._Server
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Server(options) {
  EventEmitter.call(this)

  this.options = options || {}
  this.port = this.options.port || this.DEFAULT_PORT

  this.connections = new Set()

  this.on(&#x27;connection&#x27;, this.onConnection.bind(this))

  // node-xmpp events
  this.on(&#x27;listening&#x27;, this.emit.bind(this, &#x27;online&#x27;))
  this.on(&#x27;close&#x27;, this.emit.bind(this, &#x27;offline&#x27;))
  this.on(&#x27;close&#x27;, this.emit.bind(this, &#x27;shutdown&#x27;))

<span class="apidocCodeCommentSpan">  /* And now start listening to connections on the
   * port provided as an option.
   */
</span>  if (this.server &#x26;&#x26; this.options.autostart !== false) {
    this.listen()
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.stanza" id="apidoc.element.node-xmpp.stanza">
        function <span class="apidocSignatureSpan">node-xmpp.</span>stanza
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function xml() {
  return tag.apply(null, arguments)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>
































































</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.node-xmpp.Client" id="apidoc.module.node-xmpp.Client">module node-xmpp.Client</a></h1>


    <h2>
        <a href="#apidoc.element.node-xmpp.Client.Client" id="apidoc.element.node-xmpp.Client.Client">
        function <span class="apidocSignatureSpan">node-xmpp.</span>Client
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Client(options) {
  this.options = {}
  if (options) this.options = options
  this.availableSaslMechanisms = [
    XOAuth2, External, DigestMD5, Plain, Anonymous
  ]

  if (this.options.autostart !== false) this.connect()
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Client.Connection" id="apidoc.element.node-xmpp.Client.Connection">
        function <span class="apidocSignatureSpan">node-xmpp.Client.</span>Connection
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Connection(opts) {
  EventEmitter.call(this)

  this.streamAttrs = (opts &#x26;&#x26; opts.streamAttrs) || {}
  this.xmlns = (opts &#x26;&#x26; opts.xmlns) || {}
  this.xmlns.stream = NS_STREAM

  this.streamOpen = (opts &#x26;&#x26; opts.streamOpen) || STREAM_OPEN
  this.streamClose = (opts &#x26;&#x26; opts.streamClose) || STREAM_CLOSE

  this.rejectUnauthorized = !!(opts &#x26;&#x26; opts.rejectUnauthorized)
  this.serialized = !!(opts &#x26;&#x26; opts.serialized)
  this.requestCert = !!(opts &#x26;&#x26; opts.requestCert)

  this.servername = (opts &#x26;&#x26; opts.servername)

  this.boundOnData = this.onData.bind(this)
  this.boundOnClose = this.onClose.bind(this)
  this.boundEmitData = this.emit.bind(this, &#x27;data&#x27;)
  this.boundEmitDrain = this.emit.bind(this, &#x27;drain&#x27;)

  this._setupSocket(defaultInjection(this, opts))
  this.once(&#x27;reconnect&#x27;, function () {
    this.reconnect = opts &#x26;&#x26; opts.reconnect
  })
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Client.Element" id="apidoc.element.node-xmpp.Client.Element">
        function <span class="apidocSignatureSpan">node-xmpp.Client.</span>Element
        <span class="apidocSignatureSpan">(name, attrs)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Element(name, attrs) {
  this.name = name
  this.parent = null
  this.children = []
  this.attrs = {}
  this.setAttrs(attrs)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Client.IQ" id="apidoc.element.node-xmpp.Client.IQ">
        function <span class="apidocSignatureSpan">node-xmpp.Client.</span>IQ
        <span class="apidocSignatureSpan">(attrs)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function IQ(attrs) {
  Stanza.call(this, &#x27;iq&#x27;, attrs)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Client.JID" id="apidoc.element.node-xmpp.Client.JID">
        function <span class="apidocSignatureSpan">node-xmpp.Client.</span>JID
        <span class="apidocSignatureSpan">(a, b, c)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function createJID(a, b, c) {
  if (Array.isArray(a)) {
    return tag.apply(null, arguments)
  }

  return new JID(a, b, c)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Client.Message" id="apidoc.element.node-xmpp.Client.Message">
        function <span class="apidocSignatureSpan">node-xmpp.Client.</span>Message
        <span class="apidocSignatureSpan">(attrs)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Message(attrs) {
  Stanza.call(this, &#x27;message&#x27;, attrs)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Client.Parser" id="apidoc.element.node-xmpp.Client.Parser">
        function <span class="apidocSignatureSpan">node-xmpp.Client.</span>Parser
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Parser(options) {
  LtxParser.call(this, options)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Client.Presence" id="apidoc.element.node-xmpp.Client.Presence">
        function <span class="apidocSignatureSpan">node-xmpp.Client.</span>Presence
        <span class="apidocSignatureSpan">(attrs)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Presence(attrs) {
  Stanza.call(this, &#x27;presence&#x27;, attrs)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Client.Stanza" id="apidoc.element.node-xmpp.Client.Stanza">
        function <span class="apidocSignatureSpan">node-xmpp.Client.</span>Stanza
        <span class="apidocSignatureSpan">(name, attrs)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Stanza(name, attrs) {
  Element.call(this, name, attrs)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Client.StreamParser" id="apidoc.element.node-xmpp.Client.StreamParser">
        function <span class="apidocSignatureSpan">node-xmpp.Client.</span>StreamParser
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function StreamParser(options) {
  EventEmitter.call(this)
  var self = this

  var ElementInterface = (options &#x26;&#x26; options.Element) || Element
  var ParserInterface = (options &#x26;&#x26; options.Parser) || LtxParser
  this.maxStanzaSize = options &#x26;&#x26; options.maxStanzaSize
  this.parser = new ParserInterface()

<span class="apidocCodeCommentSpan">  /* Count traffic for entire life-time */
</span>  this.bytesParsed = 0
  /* Will be reset upon first stanza, but enforce maxStanzaSize until it is parsed */
  this.bytesParsedOnStanzaBegin = 0

  this.parser.on(&#x27;startElement&#x27;, function (name, attrs) {
    if (!self.element) {
      self.emit(&#x27;startElement&#x27;, name, attrs)
      self.emit(&#x27;start&#x27;, new Element(name, attrs))
    }

    // TODO: refuse anything but &#x3c;stream:stream&#x3e;
    if (!self.element &#x26;&#x26; (name === &#x27;stream:stream&#x27;)) {
      self.emit(&#x27;streamStart&#x27;, attrs)
    } else {
      var child
      if (!self.element) {
        /* A new stanza */
        child = new Stanza(name, attrs)
        self.element = child
        /* For maxStanzaSize enforcement */
        self.bytesParsedOnStanzaBegin = self.bytesParsed
      } else {
        /* A child element of a stanza */
        child = new ElementInterface(name, attrs)
        self.element = self.element.cnode(child)
      }
    }
  })

  this.parser.on(&#x27;endElement&#x27;, function (name) {
    if (!self.element) {
      self.emit(&#x27;endElement&#x27;, name)
    }

    if (!self.element &#x26;&#x26; (name === &#x27;stream:stream&#x27;)) {
      self.end()
    } else if (self.element &#x26;&#x26; (name === self.element.name)) {
      if (self.element.parent) {
        self.element = self.element.parent
      } else {
        /* element complete */
        self.emit(&#x27;element&#x27;, self.element)
        self.emit(&#x27;stanza&#x27;, self.element) // FIXME deprecate
        delete self.element
        /* maxStanzaSize doesn&#x27;t apply until next startElement */
        delete self.bytesParsedOnStanzaBegin
      }
    } else {
      self.error(&#x27;xml-not-well-formed&#x27;, &#x27;XML parse error&#x27;)
    }
  })

  this.parser.on(&#x27;text&#x27;, function (str) {
    if (self.element) self.element.t(str)
  })

  this.parser.on(&#x27;entityDecl&#x27;, function () {
    /* Entity declarations are forbidden in XMPP. We must abort to
     * avoid a billion laughs.
     */
    self.error(&#x27;xml-not-well-formed&#x27;, &#x27;No entity declarations allowed&#x27;)
    self.end()
  })

  this.parser.on(&#x27;error&#x27;, this.emit.bind(this, &#x27;error&#x27;))
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Client.createElement" id="apidoc.element.node-xmpp.Client.createElement">
        function <span class="apidocSignatureSpan">node-xmpp.Client.</span>createElement
        <span class="apidocSignatureSpan">(name, attrs)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function createElement(name, attrs) {
  var el = new Element(name, attrs)

  for (var i = 2; i &#x3c; arguments.length; i++) {
    var child = arguments[i]
    if (child) el.cnode(child)
  }

  return el
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Client.createStanza" id="apidoc.element.node-xmpp.Client.createStanza">
        function <span class="apidocSignatureSpan">node-xmpp.Client.</span>createStanza
        <span class="apidocSignatureSpan">(name, attrs)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function createStanza(name, attrs) {
  var el

  switch (name) {
    case &#x27;presence&#x27;:
    case &#x27;message&#x27;:
    case &#x27;iq&#x27;:
      el = new Stanza(name, attrs)
      break
    default:
      el = new Element(name, attrs)
  }

  var children = Array.prototype.slice.call(arguments, 2)

  children.forEach(function (child) {
    el.cnode(child)
  })
  return el
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Client.escapeXML" id="apidoc.element.node-xmpp.Client.escapeXML">
        function <span class="apidocSignatureSpan">node-xmpp.Client.</span>escapeXML
        <span class="apidocSignatureSpan">(s)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function escapeXML(s) {
  return s.replace(/&#x26;|&#x3c;|&#x3e;|&#x22;|&#x27;/g, escapeXMLReplace)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Client.escapeXMLText" id="apidoc.element.node-xmpp.Client.escapeXMLText">
        function <span class="apidocSignatureSpan">node-xmpp.Client.</span>escapeXMLText
        <span class="apidocSignatureSpan">(s)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function escapeXMLText(s) {
  return s.replace(/&#x26;|&#x3c;|&#x3e;/g, escapeXMLReplace)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Client.inherits" id="apidoc.element.node-xmpp.Client.inherits">
        function <span class="apidocSignatureSpan">node-xmpp.Client.</span>inherits
        <span class="apidocSignatureSpan">(ctor, superCtor)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">inherits = function (ctor, superCtor) {

  if (ctor === undefined || ctor === null)
    throw new TypeError(&#x27;The constructor to &#x22;inherits&#x22; must not be &#x27; +
                        &#x27;null or undefined&#x27;);

  if (superCtor === undefined || superCtor === null)
    throw new TypeError(&#x27;The super constructor to &#x22;inherits&#x22; must not &#x27; +
                        &#x27;be null or undefined&#x27;);

  if (superCtor.prototype === undefined)
    throw new TypeError(&#x27;The super constructor to &#x22;inherits&#x22; must &#x27; +
                        &#x27;have a prototype&#x27;);

  ctor.super_ = superCtor;
  Object.setPrototypeOf(ctor.prototype, superCtor.prototype);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Client.ltx" id="apidoc.element.node-xmpp.Client.ltx">
        function <span class="apidocSignatureSpan">node-xmpp.Client.</span>ltx
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function ltx() {
  return tag.apply(null, arguments)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Client.parse" id="apidoc.element.node-xmpp.Client.parse">
        function <span class="apidocSignatureSpan">node-xmpp.Client.</span>parse
        <span class="apidocSignatureSpan">(data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function parse(data) {
  return ltxParse(data, Parser)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Client.stanza" id="apidoc.element.node-xmpp.Client.stanza">
        function <span class="apidocSignatureSpan">node-xmpp.Client.</span>stanza
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function xml() {
  return tag.apply(null, arguments)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Client.super_" id="apidoc.element.node-xmpp.Client.super_">
        function <span class="apidocSignatureSpan">node-xmpp.Client.</span>super_
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Session(opts) {
  EventEmitter.call(this)

  this.setOptions(opts)

  if (opts.websocket &#x26;&#x26; opts.websocket.url) {
    debug(&#x27;start websocket connection&#x27;)
    this._setupWebsocketConnection(opts)
  } else if (opts.bosh &#x26;&#x26; opts.bosh.url) {
    debug(&#x27;start bosh connection&#x27;)
    this._setupBoshConnection(opts)
  } else {
    debug(&#x27;start socket connection&#x27;)
    this._setupSocketConnection(opts)
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>






</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.node-xmpp.Client.SASL" id="apidoc.module.node-xmpp.Client.SASL">module node-xmpp.Client.SASL</a></h1>


    <h2>
        <a href="#apidoc.element.node-xmpp.Client.SASL.AbstractMechanism" id="apidoc.element.node-xmpp.Client.SASL.AbstractMechanism">
        function <span class="apidocSignatureSpan">node-xmpp.Client.SASL.</span>AbstractMechanism
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Mechanism() {}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Client.SASL.detectMechanisms" id="apidoc.element.node-xmpp.Client.SASL.detectMechanisms">
        function <span class="apidocSignatureSpan">node-xmpp.Client.SASL.</span>detectMechanisms
        <span class="apidocSignatureSpan">(options, availableMech)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function detectMechanisms(options, availableMech) {
  var mechClasses = availableMech || []

  var detect = []
  mechClasses.forEach(function (mechClass) {
    var match = mechClass.prototype.match
    if (match(options)) detect.push(mechClass)
  })
  return detect
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Client.SASL.selectMechanism" id="apidoc.element.node-xmpp.Client.SASL.selectMechanism">
        function <span class="apidocSignatureSpan">node-xmpp.Client.SASL.</span>selectMechanism
        <span class="apidocSignatureSpan">(offeredMechs, preferredMech, availableMech)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function selectMechanism(offeredMechs, preferredMech, availableMech) {
  var mechClasses = []
  var byName = {}
  var Mech
  if (Array.isArray(availableMech)) {
    mechClasses = mechClasses.concat(availableMech)
  }
  mechClasses.forEach(function (mechClass) {
    byName[mechClass.prototype.name] = mechClass
  })
<span class="apidocCodeCommentSpan">  /* Any preferred? */
</span>  if (byName[preferredMech] &#x26;&#x26;
    (offeredMechs.indexOf(preferredMech) &#x3e;= 0)) {
    Mech = byName[preferredMech]
  }
  /* By priority */
  mechClasses.forEach(function (mechClass) {
    if (!Mech &#x26;&#x26;
      (offeredMechs.indexOf(mechClass.prototype.name) &#x3e;= 0)) {
      Mech = mechClass
    }
  })

  return Mech ? new Mech() : null
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.node-xmpp.Client.SASL.AbstractMechanism.prototype" id="apidoc.module.node-xmpp.Client.SASL.AbstractMechanism.prototype">module node-xmpp.Client.SASL.AbstractMechanism.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.node-xmpp.Client.SASL.AbstractMechanism.prototype.authAttrs" id="apidoc.element.node-xmpp.Client.SASL.AbstractMechanism.prototype.authAttrs">
        function <span class="apidocSignatureSpan">node-xmpp.Client.SASL.AbstractMechanism.prototype.</span>authAttrs
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">authAttrs = function () {
  return {}
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.node-xmpp.Client.prototype" id="apidoc.module.node-xmpp.Client.prototype">module node-xmpp.Client.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.node-xmpp.Client.prototype._connectViaBosh" id="apidoc.element.node-xmpp.Client.prototype._connectViaBosh">
        function <span class="apidocSignatureSpan">node-xmpp.Client.prototype.</span>_connectViaBosh
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_connectViaBosh = function () {
  debug(&#x27;load bosh prebind&#x27;)
  var cb = this.options.bosh.prebind
  delete this.options.bosh.prebind
  var cmd = &#x27;node &#x27; + path.join(__dirname, &#x27;prebind.js&#x27;) + &#x27; &#x27; + encodeURI(JSON.stringify(this.options))
  exec(
    cmd,
    function (error, stdout, stderr) {
      if (error) {
        cb(error, null)
      } else {
        var r = stdout.match(/rid:+[ 0-9]*/i)
        var s = stdout.match(/sid:+[ a-z+&#x27;&#x22;-_A-Z+0-9]*/i)
        if (!r || !s) {
          return cb(stderr)
        }
        r = (r[0].split(&#x27;:&#x27;))[1].trim()

        s = (s[0].split(&#x27;:&#x27;))[1]
          .replace(&#x22;&#x27;&#x22;, &#x27;&#x27;)
          .replace(&#x22;&#x27;&#x22;, &#x27;&#x27;)
          .trim()
        if (r &#x26;&#x26; s) {
          return cb(null, { rid: r, sid: s })
        }
        cb(stderr)
      }
    }
  )
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Client.prototype._handleAuthState" id="apidoc.element.node-xmpp.Client.prototype._handleAuthState">
        function <span class="apidocSignatureSpan">node-xmpp.Client.prototype.</span>_handleAuthState
        <span class="apidocSignatureSpan">(stanza)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_handleAuthState = function (stanza) {
  if (stanza.is(&#x27;challenge&#x27;, NS_XMPP_SASL)) {
    var challengeMsg = decode64(stanza.getText())
    var responseMsg = encode64(this.mech.challenge(challengeMsg))
    var response = new Element(&#x27;response&#x27;, {xmlns: NS_XMPP_SASL}).t(responseMsg)
    this.send(response)
  } else if (stanza.is(&#x27;success&#x27;, NS_XMPP_SASL)) {
    this.mech = null
    this.state = STATE_AUTHED
    this.emit(&#x27;auth&#x27;)
  } else {
    this.emit(&#x27;error&#x27;, &#x27;XMPP authentication failure&#x27;)
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Client.prototype._handleBindState" id="apidoc.element.node-xmpp.Client.prototype._handleBindState">
        function <span class="apidocSignatureSpan">node-xmpp.Client.prototype.</span>_handleBindState
        <span class="apidocSignatureSpan">(stanza)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_handleBindState = function (stanza) {
  if (stanza.attrs.type === &#x27;result&#x27;) {
    this.state = STATE_AUTHED
    this.did_bind = true

    var bindEl = stanza.getChild(&#x27;bind&#x27;, NS_XMPP_BIND)
    if (bindEl &#x26;&#x26; bindEl.getChild(&#x27;jid&#x27;)) {
      this.jid = new JID(bindEl.getChild(&#x27;jid&#x27;).getText())
    }

<span class="apidocCodeCommentSpan">    /* no stream restart, but next feature */
</span>    this.useFeatures()
  } else {
    this.emit(&#x27;error&#x27;, &#x27;Cannot bind resource&#x27;)
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Client.prototype._handlePreAuthState" id="apidoc.element.node-xmpp.Client.prototype._handlePreAuthState">
        function <span class="apidocSignatureSpan">node-xmpp.Client.prototype.</span>_handlePreAuthState
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_handlePreAuthState = function () {
  this.state = STATE_AUTH
  var offeredMechs = this.streamFeatures.getChild(&#x27;mechanisms&#x27;, NS_XMPP_SASL).getChildren(&#x27;mechanism&#x27;, NS_XMPP_SASL).map(function
 (el) { return el.getText() })
  this.mech = sasl.selectMechanism(
    offeredMechs,
    this.preferredSaslMechanism,
    this.availableSaslMechanisms
  )
  if (this.mech) {
    this.mech.authzid = this.jid.bare().toString()
    this.mech.authcid = this.jid.local
    this.mech.password = this.password
    this.mech.api_key = this.api_key
    this.mech.access_token = this.access_token
    this.mech.oauth2_token = this.oauth2_token
    this.mech.oauth2_auth = this.oauth2_auth
    this.mech.realm = this.jid.domain // anything?
    if (this.actAs) this.mech.actAs = this.actAs.user
    this.mech.digest_uri = &#x27;xmpp/&#x27; + this.jid.domain
    var authMsg = encode64(this.mech.auth())
    var attrs = this.mech.authAttrs()
    attrs.xmlns = NS_XMPP_SASL
    attrs.mechanism = this.mech.name
    this.send(new Element(&#x27;auth&#x27;, attrs).t(authMsg))
  } else {
    this.emit(&#x27;error&#x27;, new Error(&#x27;No usable SASL mechanism&#x27;))
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Client.prototype._handleSessionState" id="apidoc.element.node-xmpp.Client.prototype._handleSessionState">
        function <span class="apidocSignatureSpan">node-xmpp.Client.prototype.</span>_handleSessionState
        <span class="apidocSignatureSpan">(stanza)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_handleSessionState = function (stanza) {
  if (stanza.attrs.type === &#x27;result&#x27;) {
    this.state = STATE_AUTHED
    this.did_session = true

<span class="apidocCodeCommentSpan">    /* no stream restart, but next feature (most probably
       we&#x27;ll go online next) */
</span>    this.useFeatures()
  } else {
    this.emit(&#x27;error&#x27;, &#x27;Cannot bind resource&#x27;)
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Client.prototype._handleStanza" id="apidoc.element.node-xmpp.Client.prototype._handleStanza">
        function <span class="apidocSignatureSpan">node-xmpp.Client.prototype.</span>_handleStanza
        <span class="apidocSignatureSpan">(stanza)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_handleStanza = function (stanza) {
  switch (this.state) {
    case STATE_ONLINE:
      this.emit(&#x27;stanza&#x27;, stanza)
      break
    case STATE_PREAUTH:
      this.emit(&#x27;stanza:preauth&#x27;, stanza)
      break
    case STATE_AUTH:
      this._handleAuthState(stanza)
      break
    case STATE_BIND:
      if (stanza.is(&#x27;iq&#x27;) &#x26;&#x26; (stanza.attrs.id === IQID_BIND)) {
        this._handleBindState(stanza)
      }
      break
    case STATE_SESSION:
      if ((stanza.is(&#x27;iq&#x27;) === true) &#x26;&#x26; (stanza.attrs.id === IQID_SESSION)) {
        this._handleSessionState(stanza)
      }
      break
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Client.prototype._handleStreamError" id="apidoc.element.node-xmpp.Client.prototype._handleStreamError">
        function <span class="apidocSignatureSpan">node-xmpp.Client.prototype.</span>_handleStreamError
        <span class="apidocSignatureSpan">(stanza)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_handleStreamError = function (stanza) {
  if (!this.reconnect) {
    this.emit(&#x27;error&#x27;, stanza)
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Client.prototype._useStandardConnect" id="apidoc.element.node-xmpp.Client.prototype._useStandardConnect">
        function <span class="apidocSignatureSpan">node-xmpp.Client.prototype.</span>_useStandardConnect
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_useStandardConnect = function () {
  this.options.xmlns = NS_CLIENT
  delete this.did_bind
  delete this.did_session

  this.state = STATE_PREAUTH
  this.on(&#x27;end&#x27;, function () {
    this.state = STATE_PREAUTH
    delete this.did_bind
    delete this.did_session
  })

  Session.call(this, this.options)
  this.options.jid = this.jid

  this.connection.on(&#x27;disconnect&#x27;, function (error) {
    this.state = STATE_PREAUTH
    if (!this.connection.reconnect) {
      if (error) this.emit(&#x27;error&#x27;, error)
      this.emit(&#x27;offline&#x27;)
    }
    delete this.did_bind
    delete this.did_session
  }.bind(this))

<span class="apidocCodeCommentSpan">  /* If server and client have multiple possible auth mechanisms
   * we try to select the preferred one
   */
</span>  if (this.options.preferred) {
    this.preferredSaslMechanism = this.options.preferred
  } else {
    this.preferredSaslMechanism = &#x27;DIGEST-MD5&#x27;
  }

  var mechs = sasl.detectMechanisms(this.options, this.availableSaslMechanisms)
  this.availableSaslMechanisms = mechs
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Client.prototype.clearSaslMechanism" id="apidoc.element.node-xmpp.Client.prototype.clearSaslMechanism">
        function <span class="apidocSignatureSpan">node-xmpp.Client.prototype.</span>clearSaslMechanism
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">clearSaslMechanism = function () {
  this.availableSaslMechanisms = []
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Client.prototype.connect" id="apidoc.element.node-xmpp.Client.prototype.connect">
        function <span class="apidocSignatureSpan">node-xmpp.Client.prototype.</span>connect
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">connect = function () {
  if (this.options.bosh &#x26;&#x26; this.options.bosh.prebind) {
    return this._connectViaBosh()
  }
  this._useStandardConnect()
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Client.prototype.doRegister" id="apidoc.element.node-xmpp.Client.prototype.doRegister">
        function <span class="apidocSignatureSpan">node-xmpp.Client.prototype.</span>doRegister
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">doRegister = function () {
  var id = &#x27;register&#x27; + Math.ceil(Math.random() * 99999)
  var iq = new Stanza(&#x27;iq&#x27;, {
    type: &#x27;set&#x27;,
    id: id,
    to: this.jid.domain
  }).c(&#x27;query&#x27;, {xmlns: NS_REGISTER})
    .c(&#x27;username&#x27;).t(this.jid.local).up()
    .c(&#x27;password&#x27;).t(this.password)
  this.send(iq)

  var self = this
  var onReply = function (reply) {
    if (reply.is(&#x27;iq&#x27;) &#x26;&#x26; (reply.attrs.id === id)) {
      self.removeListener(&#x27;stanza&#x27;, onReply)

      if (reply.attrs.type === &#x27;result&#x27;) {
<span class="apidocCodeCommentSpan">        /* Registration successful, proceed to auth */
</span>        self.useFeatures()
      } else {
        self.emit(&#x27;error&#x27;, new Error(&#x27;Registration error&#x27;))
      }
    }
  }
  this.on(&#x27;stanza:preauth&#x27;, onReply)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Client.prototype.getSaslMechanisms" id="apidoc.element.node-xmpp.Client.prototype.getSaslMechanisms">
        function <span class="apidocSignatureSpan">node-xmpp.Client.prototype.</span>getSaslMechanisms
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getSaslMechanisms = function () {
  return this.availableSaslMechanisms
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Client.prototype.onStanza" id="apidoc.element.node-xmpp.Client.prototype.onStanza">
        function <span class="apidocSignatureSpan">node-xmpp.Client.prototype.</span>onStanza
        <span class="apidocSignatureSpan">(stanza)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">onStanza = function (stanza) {
<span class="apidocCodeCommentSpan">  /* Actually, we shouldn&#x27;t wait for &#x3c;stream:features/&#x3e; if
   * this.streamAttrs.version is missing, but who uses pre-XMPP-1.0
   * these days anyway?
   */
</span>  if (stanza.name === &#x27;stream:error&#x27;) {
    return this._handleStreamError(stanza)
  }
  if ((this.state !== STATE_ONLINE) &#x26;&#x26; stanza.is(&#x27;features&#x27;)) {
    this.streamFeatures = stanza
    return this.useFeatures()
  }
  this._handleStanza(stanza)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Client.prototype.registerSaslMechanism" id="apidoc.element.node-xmpp.Client.prototype.registerSaslMechanism">
        function <span class="apidocSignatureSpan">node-xmpp.Client.prototype.</span>registerSaslMechanism
        <span class="apidocSignatureSpan">(method)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">registerSaslMechanism = function (method) {
  // check if method is registered
  if (this.availableSaslMechanisms.indexOf(method) === -1) {
    this.availableSaslMechanisms.push(method)
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Client.prototype.unregisterSaslMechanism" id="apidoc.element.node-xmpp.Client.prototype.unregisterSaslMechanism">
        function <span class="apidocSignatureSpan">node-xmpp.Client.prototype.</span>unregisterSaslMechanism
        <span class="apidocSignatureSpan">(method)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">unregisterSaslMechanism = function (method) {
  // check if method is registered
  var index = this.availableSaslMechanisms.indexOf(method)
  if (index &#x3e;= 0) {
    this.availableSaslMechanisms = this.availableSaslMechanisms.splice(index, 1)
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Client.prototype.useFeatures" id="apidoc.element.node-xmpp.Client.prototype.useFeatures">
        function <span class="apidocSignatureSpan">node-xmpp.Client.prototype.</span>useFeatures
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">useFeatures = function () {
  if ((this.state === STATE_PREAUTH) &#x26;&#x26; this.register) {
    delete this.register
    this.doRegister()
  } else if ((this.state === STATE_PREAUTH) &#x26;&#x26;
    this.streamFeatures.getChild(&#x27;mechanisms&#x27;, NS_XMPP_SASL)) {
    this._handlePreAuthState()
  } else if ((this.state === STATE_AUTHED) &#x26;&#x26;
    !this.did_bind &#x26;&#x26;
    this.streamFeatures.getChild(&#x27;bind&#x27;, NS_XMPP_BIND)) {
    this.state = STATE_BIND
    var bindEl = new Stanza(&#x27;iq&#x27;, {
      type: &#x27;set&#x27;,
      id: IQID_BIND
    }).c(&#x27;bind&#x27;, { xmlns: NS_XMPP_BIND })
    if (this.jid.resource) {
      bindEl.c(&#x27;resource&#x27;).t(this.jid.resource)
    }
    this.send(bindEl)
  } else if ((this.state === STATE_AUTHED) &#x26;&#x26;
    !this.did_session &#x26;&#x26;
    this.streamFeatures.getChild(&#x27;session&#x27;, NS_XMPP_SESSION)) {
    this.state = STATE_SESSION
    var stanza = new Stanza(&#x27;iq&#x27;, {
      type: &#x27;set&#x27;,
      to: this.jid.domain,
      id: IQID_SESSION
    }).c(&#x27;session&#x27;, { xmlns: NS_XMPP_SESSION })
    this.send(stanza)
  } else if (this.state === STATE_AUTHED) {
<span class="apidocCodeCommentSpan">    /* Ok, we&#x27;re authenticated and all features have been
       processed */
</span>    this.state = STATE_ONLINE
    this.emit(&#x27;online&#x27;, { jid: this.jid })
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.node-xmpp.Client.super_" id="apidoc.module.node-xmpp.Client.super_">module node-xmpp.Client.super_</a></h1>


    <h2>
        <a href="#apidoc.element.node-xmpp.Client.super_.super_" id="apidoc.element.node-xmpp.Client.super_.super_">
        function <span class="apidocSignatureSpan">node-xmpp.Client.</span>super_
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function EventEmitter() {
  EventEmitter.init.call(this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.node-xmpp.Client.super_.prototype" id="apidoc.module.node-xmpp.Client.super_.prototype">module node-xmpp.Client.super_.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.node-xmpp.Client.super_.prototype._addConnectionListeners" id="apidoc.element.node-xmpp.Client.super_.prototype._addConnectionListeners">
        function <span class="apidocSignatureSpan">node-xmpp.Client.super_.prototype.</span>_addConnectionListeners
        <span class="apidocSignatureSpan">(con)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_addConnectionListeners = function (con) {
  con = con || this.connection
  con.on(&#x27;stanza&#x27;, this.onStanza.bind(this))
  con.on(&#x27;drain&#x27;, this.emit.bind(this, &#x27;drain&#x27;))
  con.on(&#x27;end&#x27;, this.emit.bind(this, &#x27;end&#x27;))
  con.on(&#x27;close&#x27;, this.emit.bind(this, &#x27;close&#x27;))
  con.on(&#x27;error&#x27;, this.emit.bind(this, &#x27;error&#x27;))
  con.on(&#x27;connect&#x27;, this.emit.bind(this, &#x27;connect&#x27;))
  con.on(&#x27;reconnect&#x27;, this.emit.bind(this, &#x27;reconnect&#x27;))
  con.on(&#x27;disconnect&#x27;, this.emit.bind(this, &#x27;disconnect&#x27;))
  if (con.startStream) {
    con.on(&#x27;connect&#x27;, function () {
      // Clients start &#x3c;stream:stream&#x3e;, servers reply
      con.startStream()
    })
    this.on(&#x27;auth&#x27;, function () {
      con.startStream()
    })
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Client.super_.prototype._performSrvLookup" id="apidoc.element.node-xmpp.Client.super_.prototype._performSrvLookup">
        function <span class="apidocSignatureSpan">node-xmpp.Client.super_.prototype.</span>_performSrvLookup
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_performSrvLookup = function (opts) {
  if (opts.legacySSL) {
    throw new Error(&#x27;LegacySSL mode does not support DNS lookups&#x27;)
  }
  if (opts.credentials) {
    this.connection.credentials = tls.createSecureContext(opts.credentials)
  }
  if (opts.disallowTLS) {
    this.connection.allowTLS = false
  }
  this.connection.listen({socket: SRV.connect({
    socket: opts.socket,
    services: [&#x27;_xmpp-client._tcp&#x27;],
    domain: this.jid.domain,
    defaultPort: 5222
  })})
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Client.super_.prototype._setupBoshConnection" id="apidoc.element.node-xmpp.Client.super_.prototype._setupBoshConnection">
        function <span class="apidocSignatureSpan">node-xmpp.Client.super_.prototype.</span>_setupBoshConnection
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_setupBoshConnection = function (opts) {
  this.connection = new BOSHConnection({
    jid: this.jid,
    bosh: opts.bosh
  })
  this._addConnectionListeners()
  this.connection.on(&#x27;connected&#x27;, function () {
    // Clients start &#x3c;stream:stream&#x3e;, servers reply
    if (this.connection.startStream) {
      this.connection.startStream()
    }
  }.bind(this))
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Client.super_.prototype._setupSocketConnection" id="apidoc.element.node-xmpp.Client.super_.prototype._setupSocketConnection">
        function <span class="apidocSignatureSpan">node-xmpp.Client.super_.prototype.</span>_setupSocketConnection
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_setupSocketConnection = function (opts) {
  var params = {
    xmlns: { &#x27;&#x27;: opts.xmlns },
    streamAttrs: {
      version: &#x27;1.0&#x27;,
      to: this.jid.domain
    },
    serialized: opts.serialized
  }
  for (var key in opts) {
    if (!(key in params)) {
      params[key] = opts[key]
    }
  }

  this.connection = new Connection(params)
  this._addConnectionListeners()

  if (opts.host || opts.port) {
    this._socketConnectionToHost(opts)
  } else if (!SRV) {
    throw new Error(&#x27;Cannot load SRV&#x27;)
  } else {
    this._performSrvLookup(opts)
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Client.super_.prototype._setupWebsocketConnection" id="apidoc.element.node-xmpp.Client.super_.prototype._setupWebsocketConnection">
        function <span class="apidocSignatureSpan">node-xmpp.Client.super_.prototype.</span>_setupWebsocketConnection
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_setupWebsocketConnection = function (opts) {
  this.connection = new WSConnection({
    jid: this.jid,
    websocket: opts.websocket
  })
  this._addConnectionListeners()
  this.connection.on(&#x27;connected&#x27;, function () {
    // Clients start &#x3c;stream:stream&#x3e;, servers reply
    if (this.connection.startStream) {
      this.connection.startStream()
    }
  }.bind(this))
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Client.super_.prototype._socketConnectionToHost" id="apidoc.element.node-xmpp.Client.super_.prototype._socketConnectionToHost">
        function <span class="apidocSignatureSpan">node-xmpp.Client.super_.prototype.</span>_socketConnectionToHost
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_socketConnectionToHost = function (opts) {
  var _this = this

  if (opts.legacySSL) {
    this.connection.allowTLS = false
    this.connection.connect({
      socket: function () {
        return tls.connect(
          opts.port || 5223,
          opts.host || &#x27;localhost&#x27;,
          opts.credentials || {},
          function () {
            if (this.socket.authorized) {
              _this.emit(&#x27;connect&#x27;, this.socket)
            } else {
              _this.emit(&#x27;error&#x27;, &#x27;unauthorized&#x27;)
            }
          }.bind(this)
        )
      }
    })
  } else {
    if (opts.credentials) {
      this.connection.credentials = tls
        .createSecureContext(opts.credentials)
    }
    if (opts.disallowTLS) this.connection.allowTLS = false
    this.connection.listen({
      socket: function () {
        // wait for connect event listeners
        process.nextTick(function () {
          this.socket.connect(opts.port || 5222, opts.host)
        }.bind(this))
        var socket = opts.socket
        opts.socket = null
        return socket // maybe create new socket
      }
    })
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Client.super_.prototype.end" id="apidoc.element.node-xmpp.Client.super_.prototype.end">
        function <span class="apidocSignatureSpan">node-xmpp.Client.super_.prototype.</span>end
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">end = function () {
  if (this.connection) {
    this.connection.end()
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Client.super_.prototype.onStanza" id="apidoc.element.node-xmpp.Client.super_.prototype.onStanza">
        function <span class="apidocSignatureSpan">node-xmpp.Client.super_.prototype.</span>onStanza
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">onStanza = function () {}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Client.super_.prototype.pause" id="apidoc.element.node-xmpp.Client.super_.prototype.pause">
        function <span class="apidocSignatureSpan">node-xmpp.Client.super_.prototype.</span>pause
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">pause = function () {
  if (this.connection &#x26;&#x26; this.connection.pause) {
    this.connection.pause()
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Client.super_.prototype.resume" id="apidoc.element.node-xmpp.Client.super_.prototype.resume">
        function <span class="apidocSignatureSpan">node-xmpp.Client.super_.prototype.</span>resume
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">resume = function () {
  if (this.connection &#x26;&#x26; this.connection.resume) {
    this.connection.resume()
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Client.super_.prototype.send" id="apidoc.element.node-xmpp.Client.super_.prototype.send">
        function <span class="apidocSignatureSpan">node-xmpp.Client.super_.prototype.</span>send
        <span class="apidocSignatureSpan">(stanza)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">send = function (stanza) {
  return this.connection ? this.connection.send(stanza) : false
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Client.super_.prototype.setOptions" id="apidoc.element.node-xmpp.Client.super_.prototype.setOptions">
        function <span class="apidocSignatureSpan">node-xmpp.Client.super_.prototype.</span>setOptions
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">setOptions = function (opts) {
  this.jid = (typeof opts.jid === &#x27;string&#x27;) ? new JID(opts.jid) : opts.jid
  this.password = opts.password
  this.preferredSaslMechanism = opts.preferredSaslMechanism
  this.api_key = opts.api_key
  this.access_token = opts.access_token
  this.oauth2_token = opts.oauth2_token
  this.oauth2_auth = opts.oauth2_auth
  this.register = opts.register
  if (typeof opts.actAs === &#x27;string&#x27;) {
    this.actAs = new JID(opts.actAs)
  } else {
    this.actAs = opts.actAs
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.node-xmpp.Component" id="apidoc.module.node-xmpp.Component">module node-xmpp.Component</a></h1>


    <h2>
        <a href="#apidoc.element.node-xmpp.Component.Component" id="apidoc.element.node-xmpp.Component.Component">
        function <span class="apidocSignatureSpan">node-xmpp.</span>Component
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Component(opts) {
  EventEmitter.call(this)
  var conn = this.connection = new Connection(opts)
  this._addConnectionListeners()

  if (typeof opts.jid === &#x27;string&#x27;) {
    conn.jid = new JID(opts.jid)
  } else {
    conn.jid = opts.jid
  }
  conn.password = opts.password
  conn.xmlns[&#x27;&#x27;] = this.NS_COMPONENT
  conn.xmlns[&#x27;stream&#x27;] = this.NS_STREAM
  conn.streamTo = this.connection.jid.domain

  conn.listen({
    socket: SRV.connect({
      services: [],
      domain: opts.host,
      defaultPort: opts.port,
      socket: opts.socket
    })
  })
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Component.Connection" id="apidoc.element.node-xmpp.Component.Connection">
        function <span class="apidocSignatureSpan">node-xmpp.Component.</span>Connection
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Connection(opts) {
  EventEmitter.call(this)

  this.streamAttrs = (opts &#x26;&#x26; opts.streamAttrs) || {}
  this.xmlns = (opts &#x26;&#x26; opts.xmlns) || {}
  this.xmlns.stream = NS_STREAM

  this.streamOpen = (opts &#x26;&#x26; opts.streamOpen) || STREAM_OPEN
  this.streamClose = (opts &#x26;&#x26; opts.streamClose) || STREAM_CLOSE

  this.rejectUnauthorized = !!(opts &#x26;&#x26; opts.rejectUnauthorized)
  this.serialized = !!(opts &#x26;&#x26; opts.serialized)
  this.requestCert = !!(opts &#x26;&#x26; opts.requestCert)

  this.servername = (opts &#x26;&#x26; opts.servername)

  this.boundOnData = this.onData.bind(this)
  this.boundOnClose = this.onClose.bind(this)
  this.boundEmitData = this.emit.bind(this, &#x27;data&#x27;)
  this.boundEmitDrain = this.emit.bind(this, &#x27;drain&#x27;)

  this._setupSocket(defaultInjection(this, opts))
  this.once(&#x27;reconnect&#x27;, function () {
    this.reconnect = opts &#x26;&#x26; opts.reconnect
  })
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Component.Element" id="apidoc.element.node-xmpp.Component.Element">
        function <span class="apidocSignatureSpan">node-xmpp.Component.</span>Element
        <span class="apidocSignatureSpan">(name, attrs)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Element(name, attrs) {
  this.name = name
  this.parent = null
  this.children = []
  this.attrs = {}
  this.setAttrs(attrs)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Component.IQ" id="apidoc.element.node-xmpp.Component.IQ">
        function <span class="apidocSignatureSpan">node-xmpp.Component.</span>IQ
        <span class="apidocSignatureSpan">(attrs)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function IQ(attrs) {
  Stanza.call(this, &#x27;iq&#x27;, attrs)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Component.JID" id="apidoc.element.node-xmpp.Component.JID">
        function <span class="apidocSignatureSpan">node-xmpp.Component.</span>JID
        <span class="apidocSignatureSpan">(a, b, c)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function createJID(a, b, c) {
  if (Array.isArray(a)) {
    return tag.apply(null, arguments)
  }

  return new JID(a, b, c)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Component.Message" id="apidoc.element.node-xmpp.Component.Message">
        function <span class="apidocSignatureSpan">node-xmpp.Component.</span>Message
        <span class="apidocSignatureSpan">(attrs)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Message(attrs) {
  Stanza.call(this, &#x27;message&#x27;, attrs)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Component.Parser" id="apidoc.element.node-xmpp.Component.Parser">
        function <span class="apidocSignatureSpan">node-xmpp.Component.</span>Parser
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Parser(options) {
  LtxParser.call(this, options)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Component.Presence" id="apidoc.element.node-xmpp.Component.Presence">
        function <span class="apidocSignatureSpan">node-xmpp.Component.</span>Presence
        <span class="apidocSignatureSpan">(attrs)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Presence(attrs) {
  Stanza.call(this, &#x27;presence&#x27;, attrs)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Component.Stanza" id="apidoc.element.node-xmpp.Component.Stanza">
        function <span class="apidocSignatureSpan">node-xmpp.Component.</span>Stanza
        <span class="apidocSignatureSpan">(name, attrs)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Stanza(name, attrs) {
  Element.call(this, name, attrs)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Component.StreamParser" id="apidoc.element.node-xmpp.Component.StreamParser">
        function <span class="apidocSignatureSpan">node-xmpp.Component.</span>StreamParser
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function StreamParser(options) {
  EventEmitter.call(this)
  var self = this

  var ElementInterface = (options &#x26;&#x26; options.Element) || Element
  var ParserInterface = (options &#x26;&#x26; options.Parser) || LtxParser
  this.maxStanzaSize = options &#x26;&#x26; options.maxStanzaSize
  this.parser = new ParserInterface()

<span class="apidocCodeCommentSpan">  /* Count traffic for entire life-time */
</span>  this.bytesParsed = 0
  /* Will be reset upon first stanza, but enforce maxStanzaSize until it is parsed */
  this.bytesParsedOnStanzaBegin = 0

  this.parser.on(&#x27;startElement&#x27;, function (name, attrs) {
    if (!self.element) {
      self.emit(&#x27;startElement&#x27;, name, attrs)
      self.emit(&#x27;start&#x27;, new Element(name, attrs))
    }

    // TODO: refuse anything but &#x3c;stream:stream&#x3e;
    if (!self.element &#x26;&#x26; (name === &#x27;stream:stream&#x27;)) {
      self.emit(&#x27;streamStart&#x27;, attrs)
    } else {
      var child
      if (!self.element) {
        /* A new stanza */
        child = new Stanza(name, attrs)
        self.element = child
        /* For maxStanzaSize enforcement */
        self.bytesParsedOnStanzaBegin = self.bytesParsed
      } else {
        /* A child element of a stanza */
        child = new ElementInterface(name, attrs)
        self.element = self.element.cnode(child)
      }
    }
  })

  this.parser.on(&#x27;endElement&#x27;, function (name) {
    if (!self.element) {
      self.emit(&#x27;endElement&#x27;, name)
    }

    if (!self.element &#x26;&#x26; (name === &#x27;stream:stream&#x27;)) {
      self.end()
    } else if (self.element &#x26;&#x26; (name === self.element.name)) {
      if (self.element.parent) {
        self.element = self.element.parent
      } else {
        /* element complete */
        self.emit(&#x27;element&#x27;, self.element)
        self.emit(&#x27;stanza&#x27;, self.element) // FIXME deprecate
        delete self.element
        /* maxStanzaSize doesn&#x27;t apply until next startElement */
        delete self.bytesParsedOnStanzaBegin
      }
    } else {
      self.error(&#x27;xml-not-well-formed&#x27;, &#x27;XML parse error&#x27;)
    }
  })

  this.parser.on(&#x27;text&#x27;, function (str) {
    if (self.element) self.element.t(str)
  })

  this.parser.on(&#x27;entityDecl&#x27;, function () {
    /* Entity declarations are forbidden in XMPP. We must abort to
     * avoid a billion laughs.
     */
    self.error(&#x27;xml-not-well-formed&#x27;, &#x27;No entity declarations allowed&#x27;)
    self.end()
  })

  this.parser.on(&#x27;error&#x27;, this.emit.bind(this, &#x27;error&#x27;))
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Component.createElement" id="apidoc.element.node-xmpp.Component.createElement">
        function <span class="apidocSignatureSpan">node-xmpp.Component.</span>createElement
        <span class="apidocSignatureSpan">(name, attrs)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function createElement(name, attrs) {
  var el = new Element(name, attrs)

  for (var i = 2; i &#x3c; arguments.length; i++) {
    var child = arguments[i]
    if (child) el.cnode(child)
  }

  return el
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Component.createStanza" id="apidoc.element.node-xmpp.Component.createStanza">
        function <span class="apidocSignatureSpan">node-xmpp.Component.</span>createStanza
        <span class="apidocSignatureSpan">(name, attrs)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function createStanza(name, attrs) {
  var el

  switch (name) {
    case &#x27;presence&#x27;:
    case &#x27;message&#x27;:
    case &#x27;iq&#x27;:
      el = new Stanza(name, attrs)
      break
    default:
      el = new Element(name, attrs)
  }

  var children = Array.prototype.slice.call(arguments, 2)

  children.forEach(function (child) {
    el.cnode(child)
  })
  return el
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Component.escapeXML" id="apidoc.element.node-xmpp.Component.escapeXML">
        function <span class="apidocSignatureSpan">node-xmpp.Component.</span>escapeXML
        <span class="apidocSignatureSpan">(s)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function escapeXML(s) {
  return s.replace(/&#x26;|&#x3c;|&#x3e;|&#x22;|&#x27;/g, escapeXMLReplace)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Component.escapeXMLText" id="apidoc.element.node-xmpp.Component.escapeXMLText">
        function <span class="apidocSignatureSpan">node-xmpp.Component.</span>escapeXMLText
        <span class="apidocSignatureSpan">(s)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function escapeXMLText(s) {
  return s.replace(/&#x26;|&#x3c;|&#x3e;/g, escapeXMLReplace)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Component.inherits" id="apidoc.element.node-xmpp.Component.inherits">
        function <span class="apidocSignatureSpan">node-xmpp.Component.</span>inherits
        <span class="apidocSignatureSpan">(ctor, superCtor)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">inherits = function (ctor, superCtor) {

  if (ctor === undefined || ctor === null)
    throw new TypeError(&#x27;The constructor to &#x22;inherits&#x22; must not be &#x27; +
                        &#x27;null or undefined&#x27;);

  if (superCtor === undefined || superCtor === null)
    throw new TypeError(&#x27;The super constructor to &#x22;inherits&#x22; must not &#x27; +
                        &#x27;be null or undefined&#x27;);

  if (superCtor.prototype === undefined)
    throw new TypeError(&#x27;The super constructor to &#x22;inherits&#x22; must &#x27; +
                        &#x27;have a prototype&#x27;);

  ctor.super_ = superCtor;
  Object.setPrototypeOf(ctor.prototype, superCtor.prototype);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Component.ltx" id="apidoc.element.node-xmpp.Component.ltx">
        function <span class="apidocSignatureSpan">node-xmpp.Component.</span>ltx
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function ltx() {
  return tag.apply(null, arguments)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Component.parse" id="apidoc.element.node-xmpp.Component.parse">
        function <span class="apidocSignatureSpan">node-xmpp.Component.</span>parse
        <span class="apidocSignatureSpan">(data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function parse(data) {
  return ltxParse(data, Parser)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Component.stanza" id="apidoc.element.node-xmpp.Component.stanza">
        function <span class="apidocSignatureSpan">node-xmpp.Component.</span>stanza
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function xml() {
  return tag.apply(null, arguments)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Component.super_" id="apidoc.element.node-xmpp.Component.super_">
        function <span class="apidocSignatureSpan">node-xmpp.Component.</span>super_
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function EventEmitter() {
  EventEmitter.init.call(this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.node-xmpp.Component.prototype" id="apidoc.module.node-xmpp.Component.prototype">module node-xmpp.Component.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.node-xmpp.Component.prototype._addConnectionListeners" id="apidoc.element.node-xmpp.Component.prototype._addConnectionListeners">
        function <span class="apidocSignatureSpan">node-xmpp.Component.prototype.</span>_addConnectionListeners
        <span class="apidocSignatureSpan">(con)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_addConnectionListeners = function (con) {
  con = con || this.connection
  con.on(&#x27;streamStart&#x27;, this.onStreamStart.bind(this))
  con.on(&#x27;stanza&#x27;, this.onStanza.bind(this))
  con.on(&#x27;drain&#x27;, this.emit.bind(this, &#x27;drain&#x27;))
  con.on(&#x27;data&#x27;, this.emit.bind(this, &#x27;data&#x27;))
  con.on(&#x27;end&#x27;, this.emit.bind(this, &#x27;end&#x27;))
  con.on(&#x27;close&#x27;, this.emit.bind(this, &#x27;close&#x27;))
  con.on(&#x27;error&#x27;, this.emit.bind(this, &#x27;error&#x27;))
  con.on(&#x27;connect&#x27;, this.emit.bind(this, &#x27;connect&#x27;))
  con.on(&#x27;reconnect&#x27;, this.emit.bind(this, &#x27;reconnect&#x27;))
  con.on(&#x27;disconnect&#x27;, this.emit.bind(this, &#x27;disconnect&#x27;))
  con.on(&#x27;disconnect&#x27;, this.emit.bind(this, &#x27;offline&#x27;))
  if (con.startStream) {
    con.on(&#x27;connect&#x27;, function () {
      // Components start &#x3c;stream:stream&#x3e;, servers reply
      con.startStream()
    })
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Component.prototype._sha1Hex" id="apidoc.element.node-xmpp.Component.prototype._sha1Hex">
        function <span class="apidocSignatureSpan">node-xmpp.Component.prototype.</span>_sha1Hex
        <span class="apidocSignatureSpan">(s)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_sha1Hex = function (s) {
  var hash = crypto.createHash(&#x27;sha1&#x27;)
  hash.update(s, &#x27;binary&#x27;)
  return hash.digest(&#x27;hex&#x27;)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Component.prototype.end" id="apidoc.element.node-xmpp.Component.prototype.end">
        function <span class="apidocSignatureSpan">node-xmpp.Component.prototype.</span>end
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">end = function () {
  this.connection.end()
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Component.prototype.onStanza" id="apidoc.element.node-xmpp.Component.prototype.onStanza">
        function <span class="apidocSignatureSpan">node-xmpp.Component.prototype.</span>onStanza
        <span class="apidocSignatureSpan">(stanza)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">onStanza = function (stanza) {
  if (stanza.is(&#x27;handshake&#x27;)) {
    this.emit(&#x27;online&#x27;)
    return
  }
  this.emit(&#x27;stanza&#x27;, stanza)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Component.prototype.onStreamStart" id="apidoc.element.node-xmpp.Component.prototype.onStreamStart">
        function <span class="apidocSignatureSpan">node-xmpp.Component.prototype.</span>onStreamStart
        <span class="apidocSignatureSpan">(streamAttrs)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">onStreamStart = function (streamAttrs) {
  var digest = this._sha1Hex(streamAttrs.id + this.connection.password)
  this.connection.send(new Element(&#x27;handshake&#x27;).t(digest))
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Component.prototype.send" id="apidoc.element.node-xmpp.Component.prototype.send">
        function <span class="apidocSignatureSpan">node-xmpp.Component.prototype.</span>send
        <span class="apidocSignatureSpan">(stanza)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">send = function (stanza) {
  // TODO node-xmpp-core Connection should probably do this
  // and always add from attribute to outgoing stanzas if absent
  if (!stanza.attrs.from) {
    stanza.attrs.from = this.connection.jid.toString()
  }
  this.connection.send(stanza)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>






</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.node-xmpp.Connection" id="apidoc.module.node-xmpp.Connection">module node-xmpp.Connection</a></h1>


    <h2>
        <a href="#apidoc.element.node-xmpp.Connection.Connection" id="apidoc.element.node-xmpp.Connection.Connection">
        function <span class="apidocSignatureSpan">node-xmpp.</span>Connection
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Connection(opts) {
  EventEmitter.call(this)

  this.streamAttrs = (opts &#x26;&#x26; opts.streamAttrs) || {}
  this.xmlns = (opts &#x26;&#x26; opts.xmlns) || {}
  this.xmlns.stream = NS_STREAM

  this.streamOpen = (opts &#x26;&#x26; opts.streamOpen) || STREAM_OPEN
  this.streamClose = (opts &#x26;&#x26; opts.streamClose) || STREAM_CLOSE

  this.rejectUnauthorized = !!(opts &#x26;&#x26; opts.rejectUnauthorized)
  this.serialized = !!(opts &#x26;&#x26; opts.serialized)
  this.requestCert = !!(opts &#x26;&#x26; opts.requestCert)

  this.servername = (opts &#x26;&#x26; opts.servername)

  this.boundOnData = this.onData.bind(this)
  this.boundOnClose = this.onClose.bind(this)
  this.boundEmitData = this.emit.bind(this, &#x27;data&#x27;)
  this.boundEmitDrain = this.emit.bind(this, &#x27;drain&#x27;)

  this._setupSocket(defaultInjection(this, opts))
  this.once(&#x27;reconnect&#x27;, function () {
    this.reconnect = opts &#x26;&#x26; opts.reconnect
  })
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Connection.super_" id="apidoc.element.node-xmpp.Connection.super_">
        function <span class="apidocSignatureSpan">node-xmpp.Connection.</span>super_
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function EventEmitter() {
  EventEmitter.init.call(this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.node-xmpp.Connection.prototype" id="apidoc.module.node-xmpp.Connection.prototype">module node-xmpp.Connection.prototype</a></h1>




    <h2>
        <a href="#apidoc.element.node-xmpp.Connection.prototype._setupSocket" id="apidoc.element.node-xmpp.Connection.prototype._setupSocket">
        function <span class="apidocSignatureSpan">node-xmpp.Connection.prototype.</span>_setupSocket
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_setupSocket = function (options) {
  debug(&#x27;setup socket&#x27;)
  var previousOptions = {}
  var inject = reconnect(function (opts) {
    var previousSocket = this.socket
<span class="apidocCodeCommentSpan">    /* if this opts.preserve is on
     * the previous options are stored until next time.
     * this is needed to restore from a setSecure call.
     */
</span>    if (opts.preserve === &#x27;on&#x27;) {
      opts.preserve = previousOptions
      previousOptions = opts
    } else if (opts.preserve) {
      // switch back to the preversed options
      opts = previousOptions = opts.preserve
    } else {
      // keep some state for eg SRV.connect
      opts = previousOptions = opts || previousOptions
    }

    if (typeof opts.socket === &#x27;function&#x27;) {
      debug(&#x27;use lazy socket&#x27;)
      /* lazy evaluation
       * (can be retriggered by calling connection.connect()
       *  without arguments after a previous
       *  connection.connect({socket:function() {  }})) */
      this.socket = opts.socket.call(this)
    } else {
      debug(&#x27;use standard socket&#x27;)
      // only use this socket once
      this.socket = opts.socket
      opts.socket = null
      if (this.socket) {
        this.once(&#x27;connect&#x27;, function () {
          inject.options.immediate = false
        })
      }
    }
    this.socket = this.socket || new net.Socket()
    if (previousSocket !== this.socket) {
      this.setupStream()
    }
    return this.socket
  }.bind(this))

  inject(inject.options = options)

  // wrap the end function provided by reconnect-core to trigger the stream end logic
  var end = this.end
  this.end = this.disconnect = function () {
    this.closeStream()
    end()
  }

  this.on(&#x27;connection&#x27;, function () {
    if (!this.parser) this.startParser()
  })
  this.on(&#x27;end&#x27;, function () {
    previousOptions = {}
  })
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Connection.prototype.addStreamNs" id="apidoc.element.node-xmpp.Connection.prototype.addStreamNs">
        function <span class="apidocSignatureSpan">node-xmpp.Connection.prototype.</span>addStreamNs
        <span class="apidocSignatureSpan">(stanza)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">addStreamNs = function (stanza) {
  for (var attr in this.streamNsAttrs) {
    if (!stanza.attrs[attr] &#x26;&#x26;
      !((attr === &#x27;xmlns&#x27;) &#x26;&#x26; (this.streamNsAttrs[attr] === this.xmlns[&#x27;&#x27;]))
    ) {
      stanza.attrs[attr] = this.streamNsAttrs[attr]
    }
  }
  return stanza
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Connection.prototype.closeStream" id="apidoc.element.node-xmpp.Connection.prototype.closeStream">
        function <span class="apidocSignatureSpan">node-xmpp.Connection.prototype.</span>closeStream
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">closeStream = function () {
  this.send(this.streamClose)
  this.streamOpened = false
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Connection.prototype.endStream" id="apidoc.element.node-xmpp.Connection.prototype.endStream">
        function <span class="apidocSignatureSpan">node-xmpp.Connection.prototype.</span>endStream
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">endStream = function () {
  this.send(this.streamClose)
  this.streamOpened = false
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Connection.prototype.error" id="apidoc.element.node-xmpp.Connection.prototype.error">
        function <span class="apidocSignatureSpan">node-xmpp.Connection.prototype.</span>error
        <span class="apidocSignatureSpan">(condition, message)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">error = function (condition, message) {
  this.emit(&#x27;error&#x27;, new Error(message))

  if (!this.socket || !this.socket.writable) return

<span class="apidocCodeCommentSpan">  /* RFC 3920, 4.7.1 stream-level errors rules */
</span>  if (!this.streamOpened) this.openStream()

  var error = new Element(&#x27;stream:error&#x27;)
  error.c(condition, { xmlns: NS_XMPP_STREAMS })
  if (message) {
    error.c(&#x27;text&#x27;, {
      xmlns: NS_XMPP_STREAMS,
      &#x27;xml:lang&#x27;: &#x27;en&#x27;
    }).t(message)
  }

  this.send(error)
  this.end()
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Connection.prototype.onClose" id="apidoc.element.node-xmpp.Connection.prototype.onClose">
        function <span class="apidocSignatureSpan">node-xmpp.Connection.prototype.</span>onClose
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">onClose = function () {
  if (!this.reconnect) {
    this.emit(&#x27;close&#x27;)
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Connection.prototype.onData" id="apidoc.element.node-xmpp.Connection.prototype.onData">
        function <span class="apidocSignatureSpan">node-xmpp.Connection.prototype.</span>onData
        <span class="apidocSignatureSpan">(data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">onData = function (data) {
  debug(&#x27;receive: &#x27; + data.toString(&#x27;utf8&#x27;))
  if (this.parser) {
    this.parser.write(data)
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Connection.prototype.onEnd" id="apidoc.element.node-xmpp.Connection.prototype.onEnd">
        function <span class="apidocSignatureSpan">node-xmpp.Connection.prototype.</span>onEnd
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">onEnd = function () {
  this.closeStream()
  if (!this.reconnect) {
    this.emit(&#x27;end&#x27;)
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Connection.prototype.onStanza" id="apidoc.element.node-xmpp.Connection.prototype.onStanza">
        function <span class="apidocSignatureSpan">node-xmpp.Connection.prototype.</span>onStanza
        <span class="apidocSignatureSpan">(stanza)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">onStanza = function (stanza) {
  if (stanza.is(&#x27;error&#x27;, NS_STREAM)) {
    var error = new Error(&#x27;&#x27; + getAllText(stanza))
    error.stanza = stanza
    this.socket.emit(&#x27;error&#x27;, error)
  } else if (stanza.is(&#x27;features&#x27;, this.NS_STREAM) &#x26;&#x26;
    this.allowTLS &#x26;&#x26;
    !this.isSecure &#x26;&#x26;
    stanza.getChild(&#x27;starttls&#x27;, this.NS_XMPP_TLS)) {
<span class="apidocCodeCommentSpan">    /* Signal willingness to perform TLS handshake */
</span>    this.send(new Element(&#x27;starttls&#x27;, { xmlns: this.NS_XMPP_TLS }))
  } else if (this.allowTLS &#x26;&#x26;
    stanza.is(&#x27;proceed&#x27;, this.NS_XMPP_TLS)) {
    /* Server is waiting for TLS handshake */
    this.setSecure()
  } else {
    this.emit(&#x27;stanza&#x27;, stanza)
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Connection.prototype.openStream" id="apidoc.element.node-xmpp.Connection.prototype.openStream">
        function <span class="apidocSignatureSpan">node-xmpp.Connection.prototype.</span>openStream
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">openStream = function () {
  var attrs = {}
  for (var k in this.xmlns) {
    if (this.xmlns.hasOwnProperty(k)) {
      if (!k) {
        attrs.xmlns = this.xmlns[k]
      } else {
        attrs[&#x27;xmlns:&#x27; + k] = this.xmlns[k]
      }
    }
  }
  for (k in this.streamAttrs) {
    if (this.streamAttrs.hasOwnProperty(k)) {
      attrs[k] = this.streamAttrs[k]
    }
  }

  if (this.streamTo) { // in case of a component connecting
    attrs.to = this.streamTo
  }

  var el = new Element(this.streamOpen, attrs)
  var streamOpen
  if (el.name === &#x27;stream:stream&#x27;) {
    // make it non-empty to cut the closing tag
    el.t(&#x27; &#x27;)
    var s = el.toString()
    streamOpen = s.substr(0, s.indexOf(&#x27; &#x3c;/stream:stream&#x3e;&#x27;))
  } else {
    streamOpen = el.toString()
  }

  this.streamOpened = true
  this.send(streamOpen)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Connection.prototype.pause" id="apidoc.element.node-xmpp.Connection.prototype.pause">
        function <span class="apidocSignatureSpan">node-xmpp.Connection.prototype.</span>pause
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">pause = function () {
  if (this.socket.pause) this.socket.pause()
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Connection.prototype.resume" id="apidoc.element.node-xmpp.Connection.prototype.resume">
        function <span class="apidocSignatureSpan">node-xmpp.Connection.prototype.</span>resume
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">resume = function () {
  if (this.socket.resume) this.socket.resume()
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Connection.prototype.rmXmlns" id="apidoc.element.node-xmpp.Connection.prototype.rmXmlns">
        function <span class="apidocSignatureSpan">node-xmpp.Connection.prototype.</span>rmXmlns
        <span class="apidocSignatureSpan">(stanza)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">rmXmlns = function (stanza) {
  for (var prefix in this.xmlns) {
    var attr = prefix ? &#x27;xmlns:&#x27; + prefix : &#x27;xmlns&#x27;
    if (stanza.attrs[attr] === this.xmlns[prefix]) {
      stanza.attrs[attr] = null
    }
  }
  return stanza
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Connection.prototype.send" id="apidoc.element.node-xmpp.Connection.prototype.send">
        function <span class="apidocSignatureSpan">node-xmpp.Connection.prototype.</span>send
        <span class="apidocSignatureSpan">(stanza)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">send = function (stanza) {
  if (!this.socket || !this.streamOpened) return

  if (!this.socket.writable) {
    this.socket.end()
    return
  }

  debug(&#x27;send: &#x27; + stanza.toString())

  var flushed = true

  if (stanza.root) {
    var el = this.rmXmlns(stanza.root())
    this.socket.serializeStanza(el, function (s) {
      flushed = this.write(s)
    }.bind(this.socket))
  } else {
    flushed = this.socket.write(stanza)
  }
  return flushed
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Connection.prototype.setSecure" id="apidoc.element.node-xmpp.Connection.prototype.setSecure">
        function <span class="apidocSignatureSpan">node-xmpp.Connection.prototype.</span>setSecure
        <span class="apidocSignatureSpan">(credentials, isServer, servername)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">setSecure = function (credentials, isServer, servername) {
  // Remove old event listeners
  this.socket.removeListener(&#x27;data&#x27;, this.boundOnData)
  this.socket.removeListener(&#x27;data&#x27;, this.boundEmitData)

  // retain socket &#x27;end&#x27; listeners because ssl layer doesn&#x27;t support it
  this.socket.removeListener(&#x27;drain&#x27;, this.boundEmitDrain)
  this.socket.removeListener(&#x27;close&#x27;, this.boundOnClose)
  // remove idle_timeout
  if (this.socket.clearTimer) {
    this.socket.clearTimer()
  }

  var cleartext = starttls({
    socket: this.socket,
    rejectUnauthorized: this.rejectUnauthorized,
    credentials: credentials || this.credentials,
    requestCert: this.requestCert,
    isServer: !!isServer,
    servername: isServer &#x26;&#x26; servername
  }, function () {
    this.isSecure = true
    this.once(&#x27;disconnect&#x27;, function () {
      this.isSecure = false
    })
    cleartext.emit(&#x27;connect&#x27;, cleartext)
  }.bind(this))
  cleartext.on(&#x27;clientError&#x27;, this.emit.bind(this, &#x27;error&#x27;))
  if (!this.reconnect) {
    this.reconnect = true // need this so stopParser works properly
    this.once(&#x27;reconnect&#x27;, function () { this.reconnect = false })
  }
  this.stopParser()
  // if we reconnect we need to get back to the previous socket creation
  this.listen({ socket: cleartext, preserve: &#x27;on&#x27; })
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Connection.prototype.setupStream" id="apidoc.element.node-xmpp.Connection.prototype.setupStream">
        function <span class="apidocSignatureSpan">node-xmpp.Connection.prototype.</span>setupStream
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">setupStream = function () {
  debug(&#x27;setup stream&#x27;)
  this.socket.on(&#x27;end&#x27;, this.onEnd.bind(this))
  this.socket.on(&#x27;data&#x27;, this.boundOnData)
  this.socket.on(&#x27;close&#x27;, this.boundOnClose)
  // let them sniff unparsed XML
  this.socket.on(&#x27;data&#x27;, this.boundEmitData)
  this.socket.on(&#x27;drain&#x27;, this.boundEmitDrain)
  // ignore errors after disconnect
  this.socket.on(&#x27;error&#x27;, function () {})

  if (!this.socket.serializeStanza) {
<span class="apidocCodeCommentSpan">    /**
    * This is optimized for continuous TCP streams. If your &#x22;socket&#x22;
    * actually transports frames (WebSockets) and you can&#x27;t have
    * stanzas split across those, use:
    *     cb(el.toString())
    */
</span>    if (this.serialized) {
      this.socket.serializeStanza = function (el, cb) {
        // Continuously write out
        el.write(function (s) {
          cb(s)
        })
      }
    } else {
      this.socket.serializeStanza = function (el, cb) {
        cb(el.toString())
      }
    }
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Connection.prototype.startParser" id="apidoc.element.node-xmpp.Connection.prototype.startParser">
        function <span class="apidocSignatureSpan">node-xmpp.Connection.prototype.</span>startParser
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">startParser = function () {
  var self = this
  this.parser = new StreamParser(this.maxStanzaSize)

  this.parser.on(&#x27;streamStart&#x27;, function (attrs) {
<span class="apidocCodeCommentSpan">    /* We need those xmlns often, store them extra */
</span>    self.streamNsAttrs = {}
    for (var k in attrs) {
      if (k === &#x27;xmlns&#x27; || (k.substr(0, 6) === &#x27;xmlns:&#x27;)) {
        self.streamNsAttrs[k] = attrs[k]
      }
    }

    /* Notify in case we don&#x27;t wait for &#x3c;stream:features/&#x3e;
       (Component or non-1.0 streams)
     */
    self.emit(&#x27;streamStart&#x27;, attrs)
  })
  this.parser.on(&#x27;stanza&#x27;, function (stanza) {
    self.onStanza(self.addStreamNs(stanza))
  })
  this.parser.on(&#x27;error&#x27;, function (e) {
    self.error(e.condition || &#x27;internal-server-error&#x27;, e.message)
  })
  this.parser.once(&#x27;end&#x27;, function () {
    self.stopParser()
    if (self.reconnect) {
      self.once(&#x27;reconnect&#x27;, self.startParser.bind(self))
    } else {
      self.end()
    }
  })
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Connection.prototype.startStream" id="apidoc.element.node-xmpp.Connection.prototype.startStream">
        function <span class="apidocSignatureSpan">node-xmpp.Connection.prototype.</span>startStream
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">startStream = function () {
  var attrs = {}
  for (var k in this.xmlns) {
    if (this.xmlns.hasOwnProperty(k)) {
      if (!k) {
        attrs.xmlns = this.xmlns[k]
      } else {
        attrs[&#x27;xmlns:&#x27; + k] = this.xmlns[k]
      }
    }
  }
  for (k in this.streamAttrs) {
    if (this.streamAttrs.hasOwnProperty(k)) {
      attrs[k] = this.streamAttrs[k]
    }
  }

  if (this.streamTo) { // in case of a component connecting
    attrs.to = this.streamTo
  }

  var el = new Element(this.streamOpen, attrs)
  var streamOpen
  if (el.name === &#x27;stream:stream&#x27;) {
    // make it non-empty to cut the closing tag
    el.t(&#x27; &#x27;)
    var s = el.toString()
    streamOpen = s.substr(0, s.indexOf(&#x27; &#x3c;/stream:stream&#x3e;&#x27;))
  } else {
    streamOpen = el.toString()
  }

  this.streamOpened = true
  this.send(streamOpen)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Connection.prototype.stopParser" id="apidoc.element.node-xmpp.Connection.prototype.stopParser">
        function <span class="apidocSignatureSpan">node-xmpp.Connection.prototype.</span>stopParser
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">stopParser = function () {
<span class="apidocCodeCommentSpan">  /* No more events, please (may happen however) */
</span>  if (this.parser) {
    var parser = this.parser
    /* Get GC&#x27;ed */
    this.parser = null
    parser.end()
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>






</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.node-xmpp.Element" id="apidoc.module.node-xmpp.Element">module node-xmpp.Element</a></h1>


    <h2>
        <a href="#apidoc.element.node-xmpp.Element.Element" id="apidoc.element.node-xmpp.Element.Element">
        function <span class="apidocSignatureSpan">node-xmpp.</span>Element
        <span class="apidocSignatureSpan">(name, attrs)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Element(name, attrs) {
  this.name = name
  this.parent = null
  this.children = []
  this.attrs = {}
  this.setAttrs(attrs)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.node-xmpp.Element.prototype" id="apidoc.module.node-xmpp.Element.prototype">module node-xmpp.Element.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.node-xmpp.Element.prototype._addChildren" id="apidoc.element.node-xmpp.Element.prototype._addChildren">
        function <span class="apidocSignatureSpan">node-xmpp.Element.prototype.</span>_addChildren
        <span class="apidocSignatureSpan">(writer)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_addChildren = function (writer) {
  writer(&#x27;&#x3e;&#x27;)
  for (var i = 0; i &#x3c; this.children.length; i++) {
    var child = this.children[i]
<span class="apidocCodeCommentSpan">    /* Skip null/undefined */
</span>    if (child || (child === 0)) {
      if (child.write) {
        child.write(writer)
      } else if (typeof child === &#x27;string&#x27;) {
        writer(escapeXMLText(child))
      } else if (child.toString) {
        writer(escapeXMLText(child.toString(10)))
      }
    }
  }
  writer(&#x27;&#x3c;/&#x27;)
  writer(this.name)
  writer(&#x27;&#x3e;&#x27;)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Element.prototype.attr" id="apidoc.element.node-xmpp.Element.prototype.attr">
        function <span class="apidocSignatureSpan">node-xmpp.Element.prototype.</span>attr
        <span class="apidocSignatureSpan">(attr, val)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">attr = function (attr, val) {
  if (typeof val !== &#x27;undefined&#x27; || val === null) {
    if (!this.attrs) {
      this.attrs = {}
    }
    this.attrs[attr] = val
    return this
  }
  return this.attrs[attr]
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Element.prototype.attrsEquals" id="apidoc.element.node-xmpp.Element.prototype.attrsEquals">
        function <span class="apidocSignatureSpan">node-xmpp.Element.prototype.</span>attrsEquals
        <span class="apidocSignatureSpan">(el)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">attrsEquals = function (el) {
  return attrsEqual(this, el)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Element.prototype.c" id="apidoc.element.node-xmpp.Element.prototype.c">
        function <span class="apidocSignatureSpan">node-xmpp.Element.prototype.</span>c
        <span class="apidocSignatureSpan">(name, attrs)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">c = function (name, attrs) {
  return this.cnode(new Element(name, attrs))
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Element.prototype.childrenEquals" id="apidoc.element.node-xmpp.Element.prototype.childrenEquals">
        function <span class="apidocSignatureSpan">node-xmpp.Element.prototype.</span>childrenEquals
        <span class="apidocSignatureSpan">(el)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">childrenEquals = function (el) {
  return childrenEqual(this, el)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Element.prototype.clone" id="apidoc.element.node-xmpp.Element.prototype.clone">
        function <span class="apidocSignatureSpan">node-xmpp.Element.prototype.</span>clone
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">clone = function () {
  return clone(this)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Element.prototype.cnode" id="apidoc.element.node-xmpp.Element.prototype.cnode">
        function <span class="apidocSignatureSpan">node-xmpp.Element.prototype.</span>cnode
        <span class="apidocSignatureSpan">(child)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">cnode = function (child) {
  this.children.push(child)
  if (typeof child === &#x27;object&#x27;) {
    child.parent = this
  }
  return child
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Element.prototype.equals" id="apidoc.element.node-xmpp.Element.prototype.equals">
        function <span class="apidocSignatureSpan">node-xmpp.Element.prototype.</span>equals
        <span class="apidocSignatureSpan">(el)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">equals = function (el) {
  return equal(this, el)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Element.prototype.findNS" id="apidoc.element.node-xmpp.Element.prototype.findNS">
        function <span class="apidocSignatureSpan">node-xmpp.Element.prototype.</span>findNS
        <span class="apidocSignatureSpan">(prefix)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">findNS = function (prefix) {
  if (!prefix) {
<span class="apidocCodeCommentSpan">    /* default namespace */
</span>    if (this.attrs.xmlns) {
      return this.attrs.xmlns
    } else if (this.parent) {
      return this.parent.findNS()
    }
  } else {
    /* prefixed namespace */
    var attr = &#x27;xmlns:&#x27; + prefix
    if (this.attrs[attr]) {
      return this.attrs[attr]
    } else if (this.parent) {
      return this.parent.findNS(prefix)
    }
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Element.prototype.getAttr" id="apidoc.element.node-xmpp.Element.prototype.getAttr">
        function <span class="apidocSignatureSpan">node-xmpp.Element.prototype.</span>getAttr
        <span class="apidocSignatureSpan">(name, xmlns)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getAttr = function (name, xmlns) {
  if (!xmlns) {
    return this.attrs[name]
  }

  var namespaces = this.getXmlns()

  if (!namespaces[xmlns]) {
    return null
  }

  return this.attrs[[namespaces[xmlns], name].join(&#x27;:&#x27;)]
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Element.prototype.getChild" id="apidoc.element.node-xmpp.Element.prototype.getChild">
        function <span class="apidocSignatureSpan">node-xmpp.Element.prototype.</span>getChild
        <span class="apidocSignatureSpan">(name, xmlns)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getChild = function (name, xmlns) {
  return this.getChildren(name, xmlns)[0]
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Element.prototype.getChildByAttr" id="apidoc.element.node-xmpp.Element.prototype.getChildByAttr">
        function <span class="apidocSignatureSpan">node-xmpp.Element.prototype.</span>getChildByAttr
        <span class="apidocSignatureSpan">(attr, val, xmlns, recursive)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getChildByAttr = function (attr, val, xmlns, recursive) {
  return this.getChildrenByAttr(attr, val, xmlns, recursive)[0]
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Element.prototype.getChildElements" id="apidoc.element.node-xmpp.Element.prototype.getChildElements">
        function <span class="apidocSignatureSpan">node-xmpp.Element.prototype.</span>getChildElements
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getChildElements = function () {
  return this.getChildrenByFilter(function (child) {
    return child instanceof Element
  })
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Element.prototype.getChildText" id="apidoc.element.node-xmpp.Element.prototype.getChildText">
        function <span class="apidocSignatureSpan">node-xmpp.Element.prototype.</span>getChildText
        <span class="apidocSignatureSpan">(name, xmlns)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getChildText = function (name, xmlns) {
  var child = this.getChild(name, xmlns)
  return child ? child.getText() : null
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Element.prototype.getChildren" id="apidoc.element.node-xmpp.Element.prototype.getChildren">
        function <span class="apidocSignatureSpan">node-xmpp.Element.prototype.</span>getChildren
        <span class="apidocSignatureSpan">(name, xmlns)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getChildren = function (name, xmlns) {
  var result = []
  for (var i = 0; i &#x3c; this.children.length; i++) {
    var child = this.children[i]
    if (child.getName &#x26;&#x26;
      (child.getName() === name) &#x26;&#x26;
      (!xmlns || (child.getNS() === xmlns))) {
      result.push(child)
    }
  }
  return result
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Element.prototype.getChildrenByAttr" id="apidoc.element.node-xmpp.Element.prototype.getChildrenByAttr">
        function <span class="apidocSignatureSpan">node-xmpp.Element.prototype.</span>getChildrenByAttr
        <span class="apidocSignatureSpan">(attr, val, xmlns, recursive)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getChildrenByAttr = function (attr, val, xmlns, recursive) {
  var result = []
  for (var i = 0; i &#x3c; this.children.length; i++) {
    var child = this.children[i]
    if (child.attrs &#x26;&#x26;
      (child.attrs[attr] === val) &#x26;&#x26;
      (!xmlns || (child.getNS() === xmlns))) {
      result.push(child)
    }
    if (recursive &#x26;&#x26; child.getChildrenByAttr) {
      result.push(child.getChildrenByAttr(attr, val, xmlns, true))
    }
  }
  if (recursive) {
    result = [].concat.apply([], result)
  }
  return result
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Element.prototype.getChildrenByFilter" id="apidoc.element.node-xmpp.Element.prototype.getChildrenByFilter">
        function <span class="apidocSignatureSpan">node-xmpp.Element.prototype.</span>getChildrenByFilter
        <span class="apidocSignatureSpan">(filter, recursive)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getChildrenByFilter = function (filter, recursive) {
  var result = []
  for (var i = 0; i &#x3c; this.children.length; i++) {
    var child = this.children[i]
    if (filter(child)) {
      result.push(child)
    }
    if (recursive &#x26;&#x26; child.getChildrenByFilter) {
      result.push(child.getChildrenByFilter(filter, true))
    }
  }
  if (recursive) {
    result = [].concat.apply([], result)
  }
  return result
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Element.prototype.getNS" id="apidoc.element.node-xmpp.Element.prototype.getNS">
        function <span class="apidocSignatureSpan">node-xmpp.Element.prototype.</span>getNS
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getNS = function () {
  if (this.name.indexOf(&#x27;:&#x27;) &#x3e;= 0) {
    var prefix = this.name.substr(0, this.name.indexOf(&#x27;:&#x27;))
    return this.findNS(prefix)
  }
  return this.findNS()
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Element.prototype.getName" id="apidoc.element.node-xmpp.Element.prototype.getName">
        function <span class="apidocSignatureSpan">node-xmpp.Element.prototype.</span>getName
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getName = function () {
  if (this.name.indexOf(&#x27;:&#x27;) &#x3e;= 0) {
    return this.name.substr(this.name.indexOf(&#x27;:&#x27;) + 1)
  } else {
    return this.name
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Element.prototype.getText" id="apidoc.element.node-xmpp.Element.prototype.getText">
        function <span class="apidocSignatureSpan">node-xmpp.Element.prototype.</span>getText
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getText = function () {
  var text = &#x27;&#x27;
  for (var i = 0; i &#x3c; this.children.length; i++) {
    var child = this.children[i]
    if ((typeof child === &#x27;string&#x27;) || (typeof child === &#x27;number&#x27;)) {
      text += child
    }
  }
  return text
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Element.prototype.getXmlns" id="apidoc.element.node-xmpp.Element.prototype.getXmlns">
        function <span class="apidocSignatureSpan">node-xmpp.Element.prototype.</span>getXmlns
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getXmlns = function () {
  var namespaces = {}

  if (this.parent) {
    namespaces = this.parent.getXmlns()
  }

  for (var attr in this.attrs) {
    var m = attr.match(&#x27;xmlns:?(.*)&#x27;)
    if (this.attrs.hasOwnProperty(attr) &#x26;&#x26; m) {
      namespaces[this.attrs[attr]] = m[1]
    }
  }
  return namespaces
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Element.prototype.is" id="apidoc.element.node-xmpp.Element.prototype.is">
        function <span class="apidocSignatureSpan">node-xmpp.Element.prototype.</span>is
        <span class="apidocSignatureSpan">(name, xmlns)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">is = function (name, xmlns) {
  return (this.getName() === name) &#x26;&#x26;
  (!xmlns || (this.getNS() === xmlns))
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Element.prototype.nameEquals" id="apidoc.element.node-xmpp.Element.prototype.nameEquals">
        function <span class="apidocSignatureSpan">node-xmpp.Element.prototype.</span>nameEquals
        <span class="apidocSignatureSpan">(el)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">nameEquals = function (el) {
  return nameEqual(this, el)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Element.prototype.remove" id="apidoc.element.node-xmpp.Element.prototype.remove">
        function <span class="apidocSignatureSpan">node-xmpp.Element.prototype.</span>remove
        <span class="apidocSignatureSpan">(el, xmlns)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">remove = function (el, xmlns) {
  var filter
  if (typeof el === &#x27;string&#x27;) {
<span class="apidocCodeCommentSpan">    /* 1st parameter is tag name */
</span>    filter = function (child) {
      return !(child.is &#x26;&#x26;
      child.is(el, xmlns))
    }
  } else {
    /* 1st parameter is element */
    filter = function (child) {
      return child !== el
    }
  }

  this.children = this.children.filter(filter)

  return this
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Element.prototype.root" id="apidoc.element.node-xmpp.Element.prototype.root">
        function <span class="apidocSignatureSpan">node-xmpp.Element.prototype.</span>root
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">root = function () {
  if (this.parent) {
    return this.parent.root()
  }
  return this
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Element.prototype.setAttrs" id="apidoc.element.node-xmpp.Element.prototype.setAttrs">
        function <span class="apidocSignatureSpan">node-xmpp.Element.prototype.</span>setAttrs
        <span class="apidocSignatureSpan">(attrs)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">setAttrs = function (attrs) {
  if (typeof attrs === &#x27;string&#x27;) {
    this.attrs.xmlns = attrs
  } else if (attrs) {
    Object.keys(attrs).forEach(function (key) {
      this.attrs[key] = attrs[key]
    }, this)
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Element.prototype.t" id="apidoc.element.node-xmpp.Element.prototype.t">
        function <span class="apidocSignatureSpan">node-xmpp.Element.prototype.</span>t
        <span class="apidocSignatureSpan">(text)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">t = function (text) {
  this.children.push(text)
  return this
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Element.prototype.text" id="apidoc.element.node-xmpp.Element.prototype.text">
        function <span class="apidocSignatureSpan">node-xmpp.Element.prototype.</span>text
        <span class="apidocSignatureSpan">(val)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">text = function (val) {
  if (val &#x26;&#x26; this.children.length === 1) {
    this.children[0] = val
    return this
  }
  return this.getText()
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Element.prototype.toJSON" id="apidoc.element.node-xmpp.Element.prototype.toJSON">
        function <span class="apidocSignatureSpan">node-xmpp.Element.prototype.</span>toJSON
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">toJSON = function () {
  return {
    name: this.name,
    attrs: this.attrs,
    children: this.children.map(function (child) {
      return child &#x26;&#x26; child.toJSON ? child.toJSON() : child
    })
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Element.prototype.toString" id="apidoc.element.node-xmpp.Element.prototype.toString">
        function <span class="apidocSignatureSpan">node-xmpp.Element.prototype.</span>toString
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">toString = function () {
  var s = &#x27;&#x27;
  this.write(function (c) {
    s += c
  })
  return s
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Element.prototype.tree" id="apidoc.element.node-xmpp.Element.prototype.tree">
        function <span class="apidocSignatureSpan">node-xmpp.Element.prototype.</span>tree
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">tree = function () {
  if (this.parent) {
    return this.parent.root()
  }
  return this
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Element.prototype.up" id="apidoc.element.node-xmpp.Element.prototype.up">
        function <span class="apidocSignatureSpan">node-xmpp.Element.prototype.</span>up
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">up = function () {
  if (this.parent) {
    return this.parent
  }
  return this
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Element.prototype.write" id="apidoc.element.node-xmpp.Element.prototype.write">
        function <span class="apidocSignatureSpan">node-xmpp.Element.prototype.</span>write
        <span class="apidocSignatureSpan">(writer)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">write = function (writer) {
  writer(&#x27;&#x3c;&#x27;)
  writer(this.name)
  for (var k in this.attrs) {
    var v = this.attrs[k]
    if (v != null) { // === null || undefined
      writer(&#x27; &#x27;)
      writer(k)
      writer(&#x27;=&#x22;&#x27;)
      if (typeof v !== &#x27;string&#x27;) {
        v = v.toString()
      }
      writer(escapeXML(v))
      writer(&#x27;&#x22;&#x27;)
    }
  }
  if (this.children.length === 0) {
    writer(&#x27;/&#x3e;&#x27;)
  } else {
    this._addChildren(writer)
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.node-xmpp.IQ" id="apidoc.module.node-xmpp.IQ">module node-xmpp.IQ</a></h1>


    <h2>
        <a href="#apidoc.element.node-xmpp.IQ.IQ" id="apidoc.element.node-xmpp.IQ.IQ">
        function <span class="apidocSignatureSpan">node-xmpp.</span>IQ
        <span class="apidocSignatureSpan">(attrs)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function IQ(attrs) {
  Stanza.call(this, &#x27;iq&#x27;, attrs)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.IQ.super_" id="apidoc.element.node-xmpp.IQ.super_">
        function <span class="apidocSignatureSpan">node-xmpp.IQ.</span>super_
        <span class="apidocSignatureSpan">(name, attrs)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Stanza(name, attrs) {
  Element.call(this, name, attrs)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.node-xmpp.JID" id="apidoc.module.node-xmpp.JID">module node-xmpp.JID</a></h1>


    <h2>
        <a href="#apidoc.element.node-xmpp.JID.JID" id="apidoc.element.node-xmpp.JID.JID">
        function <span class="apidocSignatureSpan">node-xmpp.</span>JID
        <span class="apidocSignatureSpan">(a, b, c)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function JID(a, b, c) {
  this._local = null
  this.user = null // DEPRECATED
  this._domain = null
  this._resource = null

  if (a &#x26;&#x26; (!b) &#x26;&#x26; (!c)) {
    this.parseJID(a)
  } else if (b) {
    this.setLocal(a)
    this.setDomain(b)
    this.setResource(c)
  } else {
    throw new Error(&#x27;Argument error&#x27;)
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.JID.equal" id="apidoc.element.node-xmpp.JID.equal">
        function <span class="apidocSignatureSpan">node-xmpp.JID.</span>equal
        <span class="apidocSignatureSpan">(a, b)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">equal = function (a, b) {
  return a.equals(b)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.JID.is" id="apidoc.element.node-xmpp.JID.is">
        function <span class="apidocSignatureSpan">node-xmpp.JID.</span>is
        <span class="apidocSignatureSpan">(a)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">is = function (a) {
  return a instanceof JID
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.JID.tag" id="apidoc.element.node-xmpp.JID.tag">
        function <span class="apidocSignatureSpan">node-xmpp.JID.</span>tag
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function tag() {
  var literals = arguments[0]
  var substitutions = Array.prototype.slice.call(arguments, 1)

  var str = &#x27;&#x27;

  for (var i = 0; i &#x3c; substitutions.length; i++) {
    str += literals[i]
    str += substitutions[i]
  }
  str += literals[literals.length - 1]

  return new JID(str)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.node-xmpp.JID.JID" id="apidoc.module.node-xmpp.JID.JID">module node-xmpp.JID.JID</a></h1>


    <h2>
        <a href="#apidoc.element.node-xmpp.JID.JID.JID" id="apidoc.element.node-xmpp.JID.JID.JID">
        function <span class="apidocSignatureSpan">node-xmpp.JID.</span>JID
        <span class="apidocSignatureSpan">(a, b, c)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function JID(a, b, c) {
  this._local = null
  this.user = null // DEPRECATED
  this._domain = null
  this._resource = null

  if (a &#x26;&#x26; (!b) &#x26;&#x26; (!c)) {
    this.parseJID(a)
  } else if (b) {
    this.setLocal(a)
    this.setDomain(b)
    this.setResource(c)
  } else {
    throw new Error(&#x27;Argument error&#x27;)
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.node-xmpp.JID.JID.prototype" id="apidoc.module.node-xmpp.JID.JID.prototype">module node-xmpp.JID.JID.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.node-xmpp.JID.JID.prototype.bare" id="apidoc.element.node-xmpp.JID.JID.prototype.bare">
        function <span class="apidocSignatureSpan">node-xmpp.JID.JID.prototype.</span>bare
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">bare = function () {
  if (this._resource) {
    return new JID(this._local, this._domain, null)
  } else {
    return this
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.JID.JID.prototype.equals" id="apidoc.element.node-xmpp.JID.JID.prototype.equals">
        function <span class="apidocSignatureSpan">node-xmpp.JID.JID.prototype.</span>equals
        <span class="apidocSignatureSpan">(other)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">equals = function (other) {
  return (this._local === other._local) &#x26;&#x26;
    (this._domain === other._domain) &#x26;&#x26;
    (this._resource === other._resource)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.JID.JID.prototype.escapeLocal" id="apidoc.element.node-xmpp.JID.JID.prototype.escapeLocal">
        function <span class="apidocSignatureSpan">node-xmpp.JID.JID.prototype.</span>escapeLocal
        <span class="apidocSignatureSpan">(local)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">escapeLocal = function (local) {
  if (local === null) return null

  return local
    .replace(/^\s+|\s+$/g, &#x27;&#x27;)
    .replace(/\\/g, &#x27;\\5c&#x27;)
    .replace(/ /g, &#x27;\\20&#x27;)
    .replace(/&#x22;/g, &#x27;\\22&#x27;)
    .replace(/&#x26;/g, &#x27;\\26&#x27;)
    .replace(/&#x27;/g, &#x27;\\27&#x27;)
    .replace(/\//g, &#x27;\\2f&#x27;)
    .replace(/:/g, &#x27;\\3a&#x27;)
    .replace(/&#x3c;/g, &#x27;\\3c&#x27;)
    .replace(/&#x3e;/g, &#x27;\\3e&#x27;)
    .replace(/@/g, &#x27;\\40&#x27;)
    .replace(/\3a/g, &#x27;\u0005c3a&#x27;)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.JID.JID.prototype.getDomain" id="apidoc.element.node-xmpp.JID.JID.prototype.getDomain">
        function <span class="apidocSignatureSpan">node-xmpp.JID.JID.prototype.</span>getDomain
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getDomain = function () {
  return this._domain
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.JID.JID.prototype.getLocal" id="apidoc.element.node-xmpp.JID.JID.prototype.getLocal">
        function <span class="apidocSignatureSpan">node-xmpp.JID.JID.prototype.</span>getLocal
        <span class="apidocSignatureSpan">(unescape)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getLocal = function (unescape) {
  unescape = unescape || false
  var local = null

  if (unescape) {
    local = escaping.unescape(this._local)
  } else {
    local = this._local
  }

  return local
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.JID.JID.prototype.getResource" id="apidoc.element.node-xmpp.JID.JID.prototype.getResource">
        function <span class="apidocSignatureSpan">node-xmpp.JID.JID.prototype.</span>getResource
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getResource = function () {
  return this._resource
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.JID.JID.prototype.getUser" id="apidoc.element.node-xmpp.JID.JID.prototype.getUser">
        function <span class="apidocSignatureSpan">node-xmpp.JID.JID.prototype.</span>getUser
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getUser = function () {
  console.log(&#x27;JID.getUser: Use JID.getLocal instead&#x27;)
  return this.getLocal.apply(this, arguments)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.JID.JID.prototype.parseJID" id="apidoc.element.node-xmpp.JID.JID.prototype.parseJID">
        function <span class="apidocSignatureSpan">node-xmpp.JID.JID.prototype.</span>parseJID
        <span class="apidocSignatureSpan">(s)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">parseJID = function (s) {
  var resourceStart = s.indexOf(&#x27;/&#x27;)
  if (resourceStart !== -1) {
    this.setResource(s.substr(resourceStart + 1))
    s = s.substr(0, resourceStart)
  }

  var atStart = s.indexOf(&#x27;@&#x27;)
  if (atStart !== -1) {
    this.setLocal(s.substr(0, atStart))
    s = s.substr(atStart + 1)
  }

  this.setDomain(s)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.JID.JID.prototype.setDomain" id="apidoc.element.node-xmpp.JID.JID.prototype.setDomain">
        function <span class="apidocSignatureSpan">node-xmpp.JID.JID.prototype.</span>setDomain
        <span class="apidocSignatureSpan">(domain)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">setDomain = function (domain) {
  this._domain = domain.toLowerCase()
  return this
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.JID.JID.prototype.setLocal" id="apidoc.element.node-xmpp.JID.JID.prototype.setLocal">
        function <span class="apidocSignatureSpan">node-xmpp.JID.JID.prototype.</span>setLocal
        <span class="apidocSignatureSpan">(local, escape)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">setLocal = function (local, escape) {
  escape = escape || escaping.detect(local)

  if (escape) {
    local = escaping.escape(local)
  }

  this._local = local &#x26;&#x26; local.toLowerCase()
  this.user = this._local
  return this
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.JID.JID.prototype.setResource" id="apidoc.element.node-xmpp.JID.JID.prototype.setResource">
        function <span class="apidocSignatureSpan">node-xmpp.JID.JID.prototype.</span>setResource
        <span class="apidocSignatureSpan">(resource)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">setResource = function (resource) {
  this._resource = resource
  return this
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.JID.JID.prototype.setUser" id="apidoc.element.node-xmpp.JID.JID.prototype.setUser">
        function <span class="apidocSignatureSpan">node-xmpp.JID.JID.prototype.</span>setUser
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">setUser = function () {
  console.log(&#x27;JID.setUser: Use JID.setLocal instead&#x27;)
  this.setLocal.apply(this, arguments)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.JID.JID.prototype.toString" id="apidoc.element.node-xmpp.JID.JID.prototype.toString">
        function <span class="apidocSignatureSpan">node-xmpp.JID.JID.prototype.</span>toString
        <span class="apidocSignatureSpan">(unescape)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">toString = function (unescape) {
  var s = this._domain
  if (this._local) s = this.getLocal(unescape) + &#x27;@&#x27; + s
  if (this._resource) s = s + &#x27;/&#x27; + this._resource
  return s
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.JID.JID.prototype.unescapeLocal" id="apidoc.element.node-xmpp.JID.JID.prototype.unescapeLocal">
        function <span class="apidocSignatureSpan">node-xmpp.JID.JID.prototype.</span>unescapeLocal
        <span class="apidocSignatureSpan">(local)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">unescapeLocal = function (local) {
  if (local === null) return null

  return local
    .replace(/\\20/g, &#x27; &#x27;)
    .replace(/\\22/g, &#x27;&#x22;&#x27;)
    .replace(/\\26/g, &#x27;&#x26;&#x27;)
    .replace(/\\27/g, &#x27;\&#x27;&#x27;)
    .replace(/\\2f/g, &#x27;/&#x27;)
    .replace(/\\3a/g, &#x27;:&#x27;)
    .replace(/\\3c/g, &#x27;&#x3c;&#x27;)
    .replace(/\\3e/g, &#x27;&#x3e;&#x27;)
    .replace(/\\40/g, &#x27;@&#x27;)
    .replace(/\\5c/g, &#x27;\\&#x27;)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.node-xmpp.Message" id="apidoc.module.node-xmpp.Message">module node-xmpp.Message</a></h1>


    <h2>
        <a href="#apidoc.element.node-xmpp.Message.Message" id="apidoc.element.node-xmpp.Message.Message">
        function <span class="apidocSignatureSpan">node-xmpp.</span>Message
        <span class="apidocSignatureSpan">(attrs)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Message(attrs) {
  Stanza.call(this, &#x27;message&#x27;, attrs)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Message.super_" id="apidoc.element.node-xmpp.Message.super_">
        function <span class="apidocSignatureSpan">node-xmpp.Message.</span>super_
        <span class="apidocSignatureSpan">(name, attrs)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Stanza(name, attrs) {
  Element.call(this, name, attrs)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.node-xmpp.Parser" id="apidoc.module.node-xmpp.Parser">module node-xmpp.Parser</a></h1>


    <h2>
        <a href="#apidoc.element.node-xmpp.Parser.Parser" id="apidoc.element.node-xmpp.Parser.Parser">
        function <span class="apidocSignatureSpan">node-xmpp.</span>Parser
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Parser(options) {
  LtxParser.call(this, options)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Parser.super_" id="apidoc.element.node-xmpp.Parser.super_">
        function <span class="apidocSignatureSpan">node-xmpp.Parser.</span>super_
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">super_ = function (options) {
  EventEmitter.call(this)

  var ParserInterface = this.Parser = (options &#x26;&#x26; options.Parser) || this.DefaultParser
  var ElementInterface = this.Element = (options &#x26;&#x26; options.Element) || this.DefaultElement

  this.parser = new ParserInterface()

  var el
  var self = this
  this.parser.on(&#x27;startElement&#x27;, function (name, attrs) {
    var child = new ElementInterface(name, attrs)
    if (!el) {
      el = child
    } else {
      el = el.cnode(child)
    }
  })
  this.parser.on(&#x27;endElement&#x27;, function (name) {
    if (!el) {
<span class="apidocCodeCommentSpan">      /* Err */
</span>    } else if (name === el.name) {
      if (el.parent) {
        el = el.parent
      } else if (!self.tree) {
        self.tree = el
        el = undefined
      }
    }
  })
  this.parser.on(&#x27;text&#x27;, function (str) {
    if (el) {
      el.t(str)
    }
  })
  this.parser.on(&#x27;error&#x27;, function (e) {
    self.error = e
    self.emit(&#x27;error&#x27;, e)
  })
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.node-xmpp.Parser.prototype" id="apidoc.module.node-xmpp.Parser.prototype">module node-xmpp.Parser.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.node-xmpp.Parser.prototype.DefaultElement" id="apidoc.element.node-xmpp.Parser.prototype.DefaultElement">
        function <span class="apidocSignatureSpan">node-xmpp.Parser.prototype.</span>DefaultElement
        <span class="apidocSignatureSpan">(name, attrs)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function createStanza(name, attrs) {
  var el

  switch (name) {
    case &#x27;presence&#x27;:
    case &#x27;message&#x27;:
    case &#x27;iq&#x27;:
      el = new Stanza(name, attrs)
      break
    default:
      el = new Element(name, attrs)
  }

  var children = Array.prototype.slice.call(arguments, 2)

  children.forEach(function (child) {
    el.cnode(child)
  })
  return el
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.node-xmpp.Parser.super_" id="apidoc.module.node-xmpp.Parser.super_">module node-xmpp.Parser.super_</a></h1>


    <h2>
        <a href="#apidoc.element.node-xmpp.Parser.super_.super_" id="apidoc.element.node-xmpp.Parser.super_.super_">
        function <span class="apidocSignatureSpan">node-xmpp.Parser.</span>super_
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function EventEmitter() {
  EventEmitter.init.call(this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.node-xmpp.Parser.super_.prototype" id="apidoc.module.node-xmpp.Parser.super_.prototype">module node-xmpp.Parser.super_.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.node-xmpp.Parser.super_.prototype.DefaultElement" id="apidoc.element.node-xmpp.Parser.super_.prototype.DefaultElement">
        function <span class="apidocSignatureSpan">node-xmpp.Parser.super_.prototype.</span>DefaultElement
        <span class="apidocSignatureSpan">(name, attrs)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Element(name, attrs) {
  this.name = name
  this.parent = null
  this.children = []
  this.attrs = {}
  this.setAttrs(attrs)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Parser.super_.prototype.DefaultParser" id="apidoc.element.node-xmpp.Parser.super_.prototype.DefaultParser">
        function <span class="apidocSignatureSpan">node-xmpp.Parser.super_.prototype.</span>DefaultParser
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function SaxLtx() {
  EventEmitter.call(this)

  var state = STATE_TEXT
  var remainder
  var tagName
  var attrs
  var endTag
  var selfClosing
  var attrQuote
  var recordStart = 0
  var attrName

  this._handleTagOpening = function (endTag, tagName, attrs) {
    if (!endTag) {
      this.emit(&#x27;startElement&#x27;, tagName, attrs)
      if (selfClosing) {
        this.emit(&#x27;endElement&#x27;, tagName)
      }
    } else {
      this.emit(&#x27;endElement&#x27;, tagName)
    }
  }

  this.write = function (data) {
    if (typeof data !== &#x27;string&#x27;) {
      data = data.toString()
    }
    var pos = 0

<span class="apidocCodeCommentSpan">    /* Anything from previous write()? */
</span>    if (remainder) {
      data = remainder + data
      pos += remainder.length
      remainder = null
    }

    function endRecording () {
      if (typeof recordStart === &#x27;number&#x27;) {
        var recorded = data.slice(recordStart, pos)
        recordStart = undefined
        return recorded
      }
    }

    for (; pos &#x3c; data.length; pos++) {
      var c = data.charCodeAt(pos)
      switch (state) {
        case STATE_TEXT:
          if (c === 60 /* &#x3c; */) {
            var text = endRecording()
            if (text) {
              this.emit(&#x27;text&#x27;, unescapeXML(text))
            }
            state = STATE_TAG_NAME
            recordStart = pos + 1
            attrs = {}
          }
          break
        case STATE_CDATA:
          if (c === 93 /* ] */ &#x26;&#x26; data.substr(pos + 1, 2) === &#x27;]&#x3e;&#x27;) {
            var cData = endRecording()
            if (cData) {
              this.emit(&#x27;text&#x27;, cData)
            }
            state = STATE_IGNORE_COMMENT
          }
          break
        case STATE_TAG_NAME:
          if (c === 47 /* / */ &#x26;&#x26; recordStart === pos) {
            recordStart = pos + 1
            endTag = true
          } else if (c === 33 /* ! */) {
            if (data.substr(pos + 1, 7) === &#x27;[CDATA[&#x27;) {
              recordStart = pos + 8
              state = STATE_CDATA
            } else {
              recordStart = undefined
              state = STATE_IGNORE_COMMENT
            }
          } else if (c === 63 /* ? */) {
            recordStart = undefined
            state = STATE_IGNORE_INSTRUCTION
          } else if (c &#x3c;= 32 || c === 47 /* / */ || c === 62 /* &#x3e; */) {
            tagName = endRecording()
            pos--
            state = STATE_TAG
          }
          break
        case STATE_IGNORE_COMMENT:
          if (c === 62 /* &#x3e; */) {
            var prevFirst = data.charCodeAt(pos - 1)
            var prevSecond = data.charCodeAt(pos - 2)
            if ((prevFirst === 45 /* - */ &#x26;&#x26; prevSecond === 45 /* - */) ||
                (prevFirst === 93 /* ] */ &#x26;&#x26; prevSecond === 93 /* ] */)) {
              state = STATE_TEXT
            }
          }
          break
        case STATE_IGNORE_INSTRUCTION:
          if (c === 62 /* &#x3e; */) {
            var prev = data.charCodeAt(pos - 1)
            if (prev === 63 /* ? */) {
              state = STATE_TEXT
            }
          }
          break
        case STATE_TAG:
          if (c === 62 /* &#x3e; */) {
            this._handleTagOpening(endTag, tagName, attrs)
            tagName = undefined
            attrs = undefined
            endTag = undefined
            selfClosing = undefined
            state = STATE_TEXT
            recordStart = pos + 1
          } else if (c === 47 /* / */) {
            selfClosing = true
          } else if (c &#x3e; 32) {
            recordStart = pos
            state = STATE_ATTR_NAME
          }
          break
        case STATE_ATTR_NAME:
          if (c &#x3c;= 32 || c === 61 /* = */) {
            attrName = endRecording()
            pos--
            state = STATE_ATTR_EQ
          }
          break
        case STATE_ATTR_EQ:
          if (c === 61 /* = */) {
            state = STATE_ATTR_QUOT
          }
          break
        case STATE_ATTR_QUOT:
          if (c === 34 /* &#x22; */ || c === 39 /* &#x27; */) {
            attrQuote = c
            state = STATE_ATTR_VALUE
            recordStart = pos + 1
          }
          break
        case STATE_ATTR_VALUE:
          if (c === attrQuote) { ...</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Parser.super_.prototype.end" id="apidoc.element.node-xmpp.Parser.super_.prototype.end">
        function <span class="apidocSignatureSpan">node-xmpp.Parser.super_.prototype.</span>end
        <span class="apidocSignatureSpan">(data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">end = function (data) {
  this.parser.end(data)

  if (!this.error) {
    if (this.tree) {
      this.emit(&#x27;tree&#x27;, this.tree)
    } else {
      this.emit(&#x27;error&#x27;, new Error(&#x27;Incomplete document&#x27;))
    }
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Parser.super_.prototype.write" id="apidoc.element.node-xmpp.Parser.super_.prototype.write">
        function <span class="apidocSignatureSpan">node-xmpp.Parser.super_.prototype.</span>write
        <span class="apidocSignatureSpan">(data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">write = function (data) {
  this.parser.write(data)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.node-xmpp.Parser.super_.prototype.DefaultParser" id="apidoc.module.node-xmpp.Parser.super_.prototype.DefaultParser">module node-xmpp.Parser.super_.prototype.DefaultParser</a></h1>


    <h2>
        <a href="#apidoc.element.node-xmpp.Parser.super_.prototype.DefaultParser.DefaultParser" id="apidoc.element.node-xmpp.Parser.super_.prototype.DefaultParser.DefaultParser">
        function <span class="apidocSignatureSpan">node-xmpp.Parser.super_.prototype.</span>DefaultParser
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function SaxLtx() {
  EventEmitter.call(this)

  var state = STATE_TEXT
  var remainder
  var tagName
  var attrs
  var endTag
  var selfClosing
  var attrQuote
  var recordStart = 0
  var attrName

  this._handleTagOpening = function (endTag, tagName, attrs) {
    if (!endTag) {
      this.emit(&#x27;startElement&#x27;, tagName, attrs)
      if (selfClosing) {
        this.emit(&#x27;endElement&#x27;, tagName)
      }
    } else {
      this.emit(&#x27;endElement&#x27;, tagName)
    }
  }

  this.write = function (data) {
    if (typeof data !== &#x27;string&#x27;) {
      data = data.toString()
    }
    var pos = 0

<span class="apidocCodeCommentSpan">    /* Anything from previous write()? */
</span>    if (remainder) {
      data = remainder + data
      pos += remainder.length
      remainder = null
    }

    function endRecording () {
      if (typeof recordStart === &#x27;number&#x27;) {
        var recorded = data.slice(recordStart, pos)
        recordStart = undefined
        return recorded
      }
    }

    for (; pos &#x3c; data.length; pos++) {
      var c = data.charCodeAt(pos)
      switch (state) {
        case STATE_TEXT:
          if (c === 60 /* &#x3c; */) {
            var text = endRecording()
            if (text) {
              this.emit(&#x27;text&#x27;, unescapeXML(text))
            }
            state = STATE_TAG_NAME
            recordStart = pos + 1
            attrs = {}
          }
          break
        case STATE_CDATA:
          if (c === 93 /* ] */ &#x26;&#x26; data.substr(pos + 1, 2) === &#x27;]&#x3e;&#x27;) {
            var cData = endRecording()
            if (cData) {
              this.emit(&#x27;text&#x27;, cData)
            }
            state = STATE_IGNORE_COMMENT
          }
          break
        case STATE_TAG_NAME:
          if (c === 47 /* / */ &#x26;&#x26; recordStart === pos) {
            recordStart = pos + 1
            endTag = true
          } else if (c === 33 /* ! */) {
            if (data.substr(pos + 1, 7) === &#x27;[CDATA[&#x27;) {
              recordStart = pos + 8
              state = STATE_CDATA
            } else {
              recordStart = undefined
              state = STATE_IGNORE_COMMENT
            }
          } else if (c === 63 /* ? */) {
            recordStart = undefined
            state = STATE_IGNORE_INSTRUCTION
          } else if (c &#x3c;= 32 || c === 47 /* / */ || c === 62 /* &#x3e; */) {
            tagName = endRecording()
            pos--
            state = STATE_TAG
          }
          break
        case STATE_IGNORE_COMMENT:
          if (c === 62 /* &#x3e; */) {
            var prevFirst = data.charCodeAt(pos - 1)
            var prevSecond = data.charCodeAt(pos - 2)
            if ((prevFirst === 45 /* - */ &#x26;&#x26; prevSecond === 45 /* - */) ||
                (prevFirst === 93 /* ] */ &#x26;&#x26; prevSecond === 93 /* ] */)) {
              state = STATE_TEXT
            }
          }
          break
        case STATE_IGNORE_INSTRUCTION:
          if (c === 62 /* &#x3e; */) {
            var prev = data.charCodeAt(pos - 1)
            if (prev === 63 /* ? */) {
              state = STATE_TEXT
            }
          }
          break
        case STATE_TAG:
          if (c === 62 /* &#x3e; */) {
            this._handleTagOpening(endTag, tagName, attrs)
            tagName = undefined
            attrs = undefined
            endTag = undefined
            selfClosing = undefined
            state = STATE_TEXT
            recordStart = pos + 1
          } else if (c === 47 /* / */) {
            selfClosing = true
          } else if (c &#x3e; 32) {
            recordStart = pos
            state = STATE_ATTR_NAME
          }
          break
        case STATE_ATTR_NAME:
          if (c &#x3c;= 32 || c === 61 /* = */) {
            attrName = endRecording()
            pos--
            state = STATE_ATTR_EQ
          }
          break
        case STATE_ATTR_EQ:
          if (c === 61 /* = */) {
            state = STATE_ATTR_QUOT
          }
          break
        case STATE_ATTR_QUOT:
          if (c === 34 /* &#x22; */ || c === 39 /* &#x27; */) {
            attrQuote = c
            state = STATE_ATTR_VALUE
            recordStart = pos + 1
          }
          break
        case STATE_ATTR_VALUE:
          if (c === attrQuote) { ...</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Parser.super_.prototype.DefaultParser.super_" id="apidoc.element.node-xmpp.Parser.super_.prototype.DefaultParser.super_">
        function <span class="apidocSignatureSpan">node-xmpp.Parser.super_.prototype.DefaultParser.</span>super_
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function EventEmitter() {
  EventEmitter.init.call(this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.node-xmpp.Parser.super_.prototype.DefaultParser.prototype" id="apidoc.module.node-xmpp.Parser.super_.prototype.DefaultParser.prototype">module node-xmpp.Parser.super_.prototype.DefaultParser.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.node-xmpp.Parser.super_.prototype.DefaultParser.prototype.end" id="apidoc.element.node-xmpp.Parser.super_.prototype.DefaultParser.prototype.end">
        function <span class="apidocSignatureSpan">node-xmpp.Parser.super_.prototype.DefaultParser.prototype.</span>end
        <span class="apidocSignatureSpan">(data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">end = function (data) {
  if (data) {
    this.write(data)
  }

<span class="apidocCodeCommentSpan">  /* Uh, yeah */
</span>  this.write = function () {}
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.node-xmpp.Presence" id="apidoc.module.node-xmpp.Presence">module node-xmpp.Presence</a></h1>


    <h2>
        <a href="#apidoc.element.node-xmpp.Presence.Presence" id="apidoc.element.node-xmpp.Presence.Presence">
        function <span class="apidocSignatureSpan">node-xmpp.</span>Presence
        <span class="apidocSignatureSpan">(attrs)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Presence(attrs) {
  Stanza.call(this, &#x27;presence&#x27;, attrs)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Presence.super_" id="apidoc.element.node-xmpp.Presence.super_">
        function <span class="apidocSignatureSpan">node-xmpp.Presence.</span>super_
        <span class="apidocSignatureSpan">(name, attrs)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Stanza(name, attrs) {
  Element.call(this, name, attrs)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.node-xmpp.Stanza" id="apidoc.module.node-xmpp.Stanza">module node-xmpp.Stanza</a></h1>


    <h2>
        <a href="#apidoc.element.node-xmpp.Stanza.Stanza" id="apidoc.element.node-xmpp.Stanza.Stanza">
        function <span class="apidocSignatureSpan">node-xmpp.</span>Stanza
        <span class="apidocSignatureSpan">(name, attrs)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Stanza(name, attrs) {
  Element.call(this, name, attrs)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.Stanza.super_" id="apidoc.element.node-xmpp.Stanza.super_">
        function <span class="apidocSignatureSpan">node-xmpp.Stanza.</span>super_
        <span class="apidocSignatureSpan">(name, attrs)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Element(name, attrs) {
  this.name = name
  this.parent = null
  this.children = []
  this.attrs = {}
  this.setAttrs(attrs)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.node-xmpp.StreamParser" id="apidoc.module.node-xmpp.StreamParser">module node-xmpp.StreamParser</a></h1>


    <h2>
        <a href="#apidoc.element.node-xmpp.StreamParser.StreamParser" id="apidoc.element.node-xmpp.StreamParser.StreamParser">
        function <span class="apidocSignatureSpan">node-xmpp.</span>StreamParser
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function StreamParser(options) {
  EventEmitter.call(this)
  var self = this

  var ElementInterface = (options &#x26;&#x26; options.Element) || Element
  var ParserInterface = (options &#x26;&#x26; options.Parser) || LtxParser
  this.maxStanzaSize = options &#x26;&#x26; options.maxStanzaSize
  this.parser = new ParserInterface()

<span class="apidocCodeCommentSpan">  /* Count traffic for entire life-time */
</span>  this.bytesParsed = 0
  /* Will be reset upon first stanza, but enforce maxStanzaSize until it is parsed */
  this.bytesParsedOnStanzaBegin = 0

  this.parser.on(&#x27;startElement&#x27;, function (name, attrs) {
    if (!self.element) {
      self.emit(&#x27;startElement&#x27;, name, attrs)
      self.emit(&#x27;start&#x27;, new Element(name, attrs))
    }

    // TODO: refuse anything but &#x3c;stream:stream&#x3e;
    if (!self.element &#x26;&#x26; (name === &#x27;stream:stream&#x27;)) {
      self.emit(&#x27;streamStart&#x27;, attrs)
    } else {
      var child
      if (!self.element) {
        /* A new stanza */
        child = new Stanza(name, attrs)
        self.element = child
        /* For maxStanzaSize enforcement */
        self.bytesParsedOnStanzaBegin = self.bytesParsed
      } else {
        /* A child element of a stanza */
        child = new ElementInterface(name, attrs)
        self.element = self.element.cnode(child)
      }
    }
  })

  this.parser.on(&#x27;endElement&#x27;, function (name) {
    if (!self.element) {
      self.emit(&#x27;endElement&#x27;, name)
    }

    if (!self.element &#x26;&#x26; (name === &#x27;stream:stream&#x27;)) {
      self.end()
    } else if (self.element &#x26;&#x26; (name === self.element.name)) {
      if (self.element.parent) {
        self.element = self.element.parent
      } else {
        /* element complete */
        self.emit(&#x27;element&#x27;, self.element)
        self.emit(&#x27;stanza&#x27;, self.element) // FIXME deprecate
        delete self.element
        /* maxStanzaSize doesn&#x27;t apply until next startElement */
        delete self.bytesParsedOnStanzaBegin
      }
    } else {
      self.error(&#x27;xml-not-well-formed&#x27;, &#x27;XML parse error&#x27;)
    }
  })

  this.parser.on(&#x27;text&#x27;, function (str) {
    if (self.element) self.element.t(str)
  })

  this.parser.on(&#x27;entityDecl&#x27;, function () {
    /* Entity declarations are forbidden in XMPP. We must abort to
     * avoid a billion laughs.
     */
    self.error(&#x27;xml-not-well-formed&#x27;, &#x27;No entity declarations allowed&#x27;)
    self.end()
  })

  this.parser.on(&#x27;error&#x27;, this.emit.bind(this, &#x27;error&#x27;))
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.StreamParser.super_" id="apidoc.element.node-xmpp.StreamParser.super_">
        function <span class="apidocSignatureSpan">node-xmpp.StreamParser.</span>super_
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function EventEmitter() {
  EventEmitter.init.call(this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.node-xmpp.StreamParser.prototype" id="apidoc.module.node-xmpp.StreamParser.prototype">module node-xmpp.StreamParser.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.node-xmpp.StreamParser.prototype.checkXMLHeader" id="apidoc.element.node-xmpp.StreamParser.prototype.checkXMLHeader">
        function <span class="apidocSignatureSpan">node-xmpp.StreamParser.prototype.</span>checkXMLHeader
        <span class="apidocSignatureSpan">(data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">checkXMLHeader = function (data) {
  // check for xml tag
  var index = data.indexOf(&#x27;&#x3c;?xml&#x27;)

  if (index !== -1) {
    var end = data.indexOf(&#x27;?&#x3e;&#x27;)
    if (index &#x3e;= 0 &#x26;&#x26; end &#x3e;= 0 &#x26;&#x26; index &#x3c; end + 2) {
      var search = data.substring(index, end + 2)
      data = data.replace(search, &#x27;&#x27;)
    }
  }

  return data
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.StreamParser.prototype.end" id="apidoc.element.node-xmpp.StreamParser.prototype.end">
        function <span class="apidocSignatureSpan">node-xmpp.StreamParser.prototype.</span>end
        <span class="apidocSignatureSpan">(data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">end = function (data) {
  if (data) {
    this.write(data)
  }
<span class="apidocCodeCommentSpan">  /* Get GC&#x27;ed */
</span>  delete this.parser
  this.emit(&#x27;end&#x27;)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.StreamParser.prototype.error" id="apidoc.element.node-xmpp.StreamParser.prototype.error">
        function <span class="apidocSignatureSpan">node-xmpp.StreamParser.prototype.</span>error
        <span class="apidocSignatureSpan">(condition, message)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">error = function (condition, message) {
  var e = new Error(message)
  e.condition = condition
  this.emit(&#x27;error&#x27;, e)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.StreamParser.prototype.write" id="apidoc.element.node-xmpp.StreamParser.prototype.write">
        function <span class="apidocSignatureSpan">node-xmpp.StreamParser.prototype.</span>write
        <span class="apidocSignatureSpan">(data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">write = function (data) {
  // if (/^&#x3c;stream:stream [^&#x3e;]+\/&#x3e;$/.test(data)) {
  //   data = data.replace(/\/&#x3e;$/, &#x22;&#x3e;&#x22;)
  // }
  if (this.parser) {
    data = data.toString(&#x27;utf8&#x27;)
    data = this.checkXMLHeader(data)

<span class="apidocCodeCommentSpan">    /* If a maxStanzaSize is configured, the current stanza must consist only of this many bytes */
</span>    if (this.bytesParsedOnStanzaBegin &#x26;&#x26; this.maxStanzaSize &#x26;&#x26;
      this.bytesParsed &#x3e; this.bytesParsedOnStanzaBegin + this.maxStanzaSize) {
      this.error(&#x27;policy-violation&#x27;, &#x27;Maximum stanza size exceeded&#x27;)
      return
    }
    this.bytesParsed += data.length

    this.parser.write(data)
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.node-xmpp.ltx" id="apidoc.module.node-xmpp.ltx">module node-xmpp.ltx</a></h1>


    <h2>
        <a href="#apidoc.element.node-xmpp.ltx.ltx" id="apidoc.element.node-xmpp.ltx.ltx">
        function <span class="apidocSignatureSpan">node-xmpp.</span>ltx
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function ltx() {
  return tag.apply(null, arguments)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.ltx.Element" id="apidoc.element.node-xmpp.ltx.Element">
        function <span class="apidocSignatureSpan">node-xmpp.ltx.</span>Element
        <span class="apidocSignatureSpan">(name, attrs)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Element(name, attrs) {
  this.name = name
  this.parent = null
  this.children = []
  this.attrs = {}
  this.setAttrs(attrs)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.ltx.Parser" id="apidoc.element.node-xmpp.ltx.Parser">
        function <span class="apidocSignatureSpan">node-xmpp.ltx.</span>Parser
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Parser = function (options) {
  EventEmitter.call(this)

  var ParserInterface = this.Parser = (options &#x26;&#x26; options.Parser) || this.DefaultParser
  var ElementInterface = this.Element = (options &#x26;&#x26; options.Element) || this.DefaultElement

  this.parser = new ParserInterface()

  var el
  var self = this
  this.parser.on(&#x27;startElement&#x27;, function (name, attrs) {
    var child = new ElementInterface(name, attrs)
    if (!el) {
      el = child
    } else {
      el = el.cnode(child)
    }
  })
  this.parser.on(&#x27;endElement&#x27;, function (name) {
    if (!el) {
<span class="apidocCodeCommentSpan">      /* Err */
</span>    } else if (name === el.name) {
      if (el.parent) {
        el = el.parent
      } else if (!self.tree) {
        self.tree = el
        el = undefined
      }
    }
  })
  this.parser.on(&#x27;text&#x27;, function (str) {
    if (el) {
      el.t(str)
    }
  })
  this.parser.on(&#x27;error&#x27;, function (e) {
    self.error = e
    self.emit(&#x27;error&#x27;, e)
  })
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.ltx.attrsEqual" id="apidoc.element.node-xmpp.ltx.attrsEqual">
        function <span class="apidocSignatureSpan">node-xmpp.ltx.</span>attrsEqual
        <span class="apidocSignatureSpan">(a, b)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function attrsEqual(a, b) {
  var attrs = a.attrs
  var keys = Object.keys(attrs)
  var length = keys.length
  if (length !== Object.keys(b.attrs).length) return false
  for (var i = 0, l = length; i &#x3c; l; i++) {
    var key = keys[i]
    var value = attrs[key]
    if (value == null || b.attrs[key] == null) { // === null || undefined
      if (value !== b.attrs[key]) return false
    } else if (value.toString() !== b.attrs[key].toString()) {
      return false
    }
  }
  return true
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.ltx.childrenEqual" id="apidoc.element.node-xmpp.ltx.childrenEqual">
        function <span class="apidocSignatureSpan">node-xmpp.ltx.</span>childrenEqual
        <span class="apidocSignatureSpan">(a, b)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function childrenEqual(a, b) {
  var children = a.children
  var length = children.length
  if (length !== b.children.length) return false
  for (var i = 0, l = length; i &#x3c; l; i++) {
    var child = children[i]
    if (typeof child === &#x27;string&#x27;) {
      if (child !== b.children[i]) return false
    } else {
      if (!child.equals(b.children[i])) return false
    }
  }
  return true
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.ltx.clone" id="apidoc.element.node-xmpp.ltx.clone">
        function <span class="apidocSignatureSpan">node-xmpp.ltx.</span>clone
        <span class="apidocSignatureSpan">(el)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function clone(el) {
  var clone = new el.constructor(el.name, el.attrs)
  for (var i = 0; i &#x3c; el.children.length; i++) {
    var child = el.children[i]
    clone.cnode(child.clone ? child.clone() : child)
  }
  return clone
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.ltx.createElement" id="apidoc.element.node-xmpp.ltx.createElement">
        function <span class="apidocSignatureSpan">node-xmpp.ltx.</span>createElement
        <span class="apidocSignatureSpan">(name, attrs)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function createElement(name, attrs) {
  var el = new Element(name, attrs)

  for (var i = 2; i &#x3c; arguments.length; i++) {
    var child = arguments[i]
    if (child) el.cnode(child)
  }

  return el
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.ltx.equal" id="apidoc.element.node-xmpp.ltx.equal">
        function <span class="apidocSignatureSpan">node-xmpp.ltx.</span>equal
        <span class="apidocSignatureSpan">(a, b)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function equal(a, b) {
  if (!nameEqual(a, b)) return false
  if (!attrsEqual(a, b)) return false
  if (!childrenEqual(a, b)) return false
  return true
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.ltx.escapeXML" id="apidoc.element.node-xmpp.ltx.escapeXML">
        function <span class="apidocSignatureSpan">node-xmpp.ltx.</span>escapeXML
        <span class="apidocSignatureSpan">(s)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function escapeXML(s) {
  return s.replace(/&#x26;|&#x3c;|&#x3e;|&#x22;|&#x27;/g, escapeXMLReplace)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.ltx.escapeXMLText" id="apidoc.element.node-xmpp.ltx.escapeXMLText">
        function <span class="apidocSignatureSpan">node-xmpp.ltx.</span>escapeXMLText
        <span class="apidocSignatureSpan">(s)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function escapeXMLText(s) {
  return s.replace(/&#x26;|&#x3c;|&#x3e;/g, escapeXMLReplace)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.ltx.isElement" id="apidoc.element.node-xmpp.ltx.isElement">
        function <span class="apidocSignatureSpan">node-xmpp.ltx.</span>isElement
        <span class="apidocSignatureSpan">(el)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function isElement(el) {
  return el instanceof Element
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.ltx.isNode" id="apidoc.element.node-xmpp.ltx.isNode">
        function <span class="apidocSignatureSpan">node-xmpp.ltx.</span>isNode
        <span class="apidocSignatureSpan">(el)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function is(el) {
  return el instanceof Element || typeof el === &#x27;string&#x27;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.ltx.isText" id="apidoc.element.node-xmpp.ltx.isText">
        function <span class="apidocSignatureSpan">node-xmpp.ltx.</span>isText
        <span class="apidocSignatureSpan">(el)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function isText(el) {
  return typeof el === &#x27;string&#x27;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.ltx.nameEqual" id="apidoc.element.node-xmpp.ltx.nameEqual">
        function <span class="apidocSignatureSpan">node-xmpp.ltx.</span>nameEqual
        <span class="apidocSignatureSpan">(a, b)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function nameEqual(a, b) {
  return a.name === b.name
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.ltx.parse" id="apidoc.element.node-xmpp.ltx.parse">
        function <span class="apidocSignatureSpan">node-xmpp.ltx.</span>parse
        <span class="apidocSignatureSpan">(data, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function parse(data, options) {
  var p
  if (typeof options === &#x27;function&#x27;) {
    p = new options() // eslint-disable-line
  } else {
    p = new Parser(options)
  }

  var result = null
  var error = null

  p.on(&#x27;tree&#x27;, function (tree) {
    result = tree
  })
  p.on(&#x27;error&#x27;, function (e) {
    error = e
  })

  p.write(data)
  p.end()

  if (error) {
    throw error
  } else {
    return result
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.ltx.stringify" id="apidoc.element.node-xmpp.ltx.stringify">
        function <span class="apidocSignatureSpan">node-xmpp.ltx.</span>stringify
        <span class="apidocSignatureSpan">(el, indent, level)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function stringify(el, indent, level) {
  if (typeof indent === &#x27;number&#x27;) indent = &#x27; &#x27;.repeat(indent)
  if (!level) level = 1
  var s = &#x27;&#x27;
  s += &#x27;&#x3c;&#x27; + el.name

  Object.keys(el.attrs).forEach(function (k) {
    s += &#x27; &#x27; + k + &#x27;=&#x27; + &#x27;&#x22;&#x27; + el.attrs[k] + &#x27;&#x22;&#x27;
  })

  if (el.children.length) {
    s += &#x27;&#x3e;&#x27;
    el.children.forEach(function (child, i) {
      if (indent) s += &#x27;\n&#x27; + indent.repeat(level)
      if (typeof child === &#x27;string&#x27;) {
        s += child
      } else {
        s += stringify(child, indent, level + 1)
      }
    })
    if (indent) s += &#x27;\n&#x27; + indent.repeat(level - 1)
    s += &#x27;&#x3c;/&#x27; + el.name + &#x27;&#x3e;&#x27;
  } else {
    s += &#x27;/&#x3e;&#x27;
  }

  return s
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.ltx.tag" id="apidoc.element.node-xmpp.ltx.tag">
        function <span class="apidocSignatureSpan">node-xmpp.ltx.</span>tag
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function tag() {
  return parse(tagString.apply(null, arguments))
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.ltx.tagString" id="apidoc.element.node-xmpp.ltx.tagString">
        function <span class="apidocSignatureSpan">node-xmpp.ltx.</span>tagString
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function tagString() {
  var literals = arguments[0]

  var str = &#x27;&#x27;

  for (var i = 1; i &#x3c; arguments.length; i++) {
    str += literals[i - 1]
    str += escape(arguments[i])
  }
  str += literals[literals.length - 1]

  return str
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.ltx.unescapeXML" id="apidoc.element.node-xmpp.ltx.unescapeXML">
        function <span class="apidocSignatureSpan">node-xmpp.ltx.</span>unescapeXML
        <span class="apidocSignatureSpan">(s)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function unescapeXML(s) {
  return s.replace(/&#x26;(amp|#38|lt|#60|gt|#62|quot|#34|apos|#39);/g, unescapeXMLReplace)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.ltx.unescapeXMLText" id="apidoc.element.node-xmpp.ltx.unescapeXMLText">
        function <span class="apidocSignatureSpan">node-xmpp.ltx.</span>unescapeXMLText
        <span class="apidocSignatureSpan">(s)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function unescapeXMLText(s) {
  return s.replace(/&#x26;(amp|#38|lt|#60|gt|#62);/g, unescapeXMLReplace)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.node-xmpp.server" id="apidoc.module.node-xmpp.server">module node-xmpp.server</a></h1>


    <h2>
        <a href="#apidoc.element.node-xmpp.server.BOSHServer" id="apidoc.element.node-xmpp.server.BOSHServer">
        function <span class="apidocSignatureSpan">node-xmpp.server.</span>BOSHServer
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function BOSHServer(opts) {
  var options = opts || {}
  var server = this.server = new Server({
    server: options.server,
    cors: options.cors,
    nextRequestTimeout: options.nextRequestTimeout
  })
  server.on(&#x27;close&#x27;, this.emit.bind(this, &#x27;close&#x27;))
  server.on(&#x27;error&#x27;, this.emit.bind(this, &#x27;error&#x27;))
  server.on(&#x27;listening&#x27;, this.emit.bind(this, &#x27;listening&#x27;))
  server.on(&#x27;connection&#x27;, this.acceptConnection.bind(this))

  C2SServer.call(this, options)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.C2SServer" id="apidoc.element.node-xmpp.server.C2SServer">
        function <span class="apidocSignatureSpan">node-xmpp.server.</span>C2SServer
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function TCPServer(options) {
  var server = this.server = serverStop(options &#x26;&#x26; options.server || net.createServer())
  server.on(&#x27;connection&#x27;, this.acceptConnection.bind(this))
  server.on(&#x27;close&#x27;, this.emit.bind(this, &#x27;close&#x27;))
  server.on(&#x27;error&#x27;, this.emit.bind(this, &#x27;error&#x27;))
  server.on(&#x27;listening&#x27;, this.emit.bind(this, &#x27;listening&#x27;))

  C2SServer.call(this, options)
  this._setupTls()
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.C2SStream" id="apidoc.element.node-xmpp.server.C2SStream">
        function <span class="apidocSignatureSpan">node-xmpp.server.</span>C2SStream
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Session(opts) {
  this.authenticated = false
  this.server = opts.server
  this.generateId = rack(opts.idBits, opts.idBitsBase, opts.idBitsExpandBy)

  this.connection = opts.connection || new Connection({
    rejectUnauthorized: opts.rejectUnauthorized,
    requestCert: opts.requestCert,
    reconnect: false,
    streamOpen: opts.streamOpen,
    streamClose: opts.streamClose,
    streamAttrs: opts.streamAttrs
  })
  this._addConnectionListeners()
  if (this.connection.xmlns) {
    this.connection.xmlns[&#x27;&#x27;] = NS_CLIENT
  }
  this.connection.streamAttrs.version = &#x27;1.0&#x27;
  this.connection.streamAttrs.id = this.generateId()

  if (this.connection.connect) {
    this.connection.connect({socket: opts.socket})
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.ComponentServer" id="apidoc.element.node-xmpp.server.ComponentServer">
        function <span class="apidocSignatureSpan">node-xmpp.server.</span>ComponentServer
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function ComponentServer(options) {
  var server = this.server = (options &#x26;&#x26; options.server || net.createServer())
  server.on(&#x27;connection&#x27;, this.acceptConnection.bind(this))
  server.on(&#x27;close&#x27;, this.emit.bind(this, &#x27;close&#x27;))
  server.on(&#x27;error&#x27;, this.emit.bind(this, &#x27;error&#x27;))
  server.on(&#x27;listening&#x27;, this.emit.bind(this, &#x27;listening&#x27;))

  Server.call(this, options)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.ComponentStream" id="apidoc.element.node-xmpp.server.ComponentStream">
        function <span class="apidocSignatureSpan">node-xmpp.server.</span>ComponentStream
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function ComponentSession(opts) {
  EventEmitter.call(this)
  this.connection = opts.connection || new Connection()
  this._addConnectionListeners()
  this.connection.xmlns[&#x27;&#x27;] = this.NS_COMPONENT
  this.connection.xmlns.stream = this.NS_STREAM
  if (this.connection.connect) {
    this.connection.connect({socket: opts.socket})
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.Connection" id="apidoc.element.node-xmpp.server.Connection">
        function <span class="apidocSignatureSpan">node-xmpp.server.</span>Connection
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Connection(opts) {
  EventEmitter.call(this)

  this.streamAttrs = (opts &#x26;&#x26; opts.streamAttrs) || {}
  this.xmlns = (opts &#x26;&#x26; opts.xmlns) || {}
  this.xmlns.stream = NS_STREAM

  this.streamOpen = (opts &#x26;&#x26; opts.streamOpen) || STREAM_OPEN
  this.streamClose = (opts &#x26;&#x26; opts.streamClose) || STREAM_CLOSE

  this.rejectUnauthorized = !!(opts &#x26;&#x26; opts.rejectUnauthorized)
  this.serialized = !!(opts &#x26;&#x26; opts.serialized)
  this.requestCert = !!(opts &#x26;&#x26; opts.requestCert)

  this.servername = (opts &#x26;&#x26; opts.servername)

  this.boundOnData = this.onData.bind(this)
  this.boundOnClose = this.onClose.bind(this)
  this.boundEmitData = this.emit.bind(this, &#x27;data&#x27;)
  this.boundEmitDrain = this.emit.bind(this, &#x27;drain&#x27;)

  this._setupSocket(defaultInjection(this, opts))
  this.once(&#x27;reconnect&#x27;, function () {
    this.reconnect = opts &#x26;&#x26; opts.reconnect
  })
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.Element" id="apidoc.element.node-xmpp.server.Element">
        function <span class="apidocSignatureSpan">node-xmpp.server.</span>Element
        <span class="apidocSignatureSpan">(name, attrs)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Element(name, attrs) {
  this.name = name
  this.parent = null
  this.children = []
  this.attrs = {}
  this.setAttrs(attrs)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.IQ" id="apidoc.element.node-xmpp.server.IQ">
        function <span class="apidocSignatureSpan">node-xmpp.server.</span>IQ
        <span class="apidocSignatureSpan">(attrs)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function IQ(attrs) {
  Stanza.call(this, &#x27;iq&#x27;, attrs)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.JID" id="apidoc.element.node-xmpp.server.JID">
        function <span class="apidocSignatureSpan">node-xmpp.server.</span>JID
        <span class="apidocSignatureSpan">(a, b, c)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function createJID(a, b, c) {
  if (Array.isArray(a)) {
    return tag.apply(null, arguments)
  }

  return new JID(a, b, c)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.Message" id="apidoc.element.node-xmpp.server.Message">
        function <span class="apidocSignatureSpan">node-xmpp.server.</span>Message
        <span class="apidocSignatureSpan">(attrs)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Message(attrs) {
  Stanza.call(this, &#x27;message&#x27;, attrs)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.Parser" id="apidoc.element.node-xmpp.server.Parser">
        function <span class="apidocSignatureSpan">node-xmpp.server.</span>Parser
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Parser(options) {
  LtxParser.call(this, options)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.Presence" id="apidoc.element.node-xmpp.server.Presence">
        function <span class="apidocSignatureSpan">node-xmpp.server.</span>Presence
        <span class="apidocSignatureSpan">(attrs)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Presence(attrs) {
  Stanza.call(this, &#x27;presence&#x27;, attrs)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.Router" id="apidoc.element.node-xmpp.server.Router">
        function <span class="apidocSignatureSpan">node-xmpp.server.</span>Router
        <span class="apidocSignatureSpan">(s2sPort, bindAddress, opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Router(s2sPort, bindAddress, opts) {
  EventEmitter.call(this)
  this.ctxs = {}

  opts = opts || {}

  this.generateId = rack(opts.idBits, opts.idBitsBase, opts.idBitsExpandBy)

  if (opts.secureDomains &#x26;&#x26; opts.secureDomains.length) {
    opts.secureDomains.forEach(this.addSecureDomain, this)
  }

  // start tcp socket
  this._server = net.createServer(function (socket) {
    this.acceptConnection(socket)
  }.bind(this)).listen(s2sPort || 5269, bindAddress || &#x27;::&#x27;)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.Stanza" id="apidoc.element.node-xmpp.server.Stanza">
        function <span class="apidocSignatureSpan">node-xmpp.server.</span>Stanza
        <span class="apidocSignatureSpan">(name, attrs)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Stanza(name, attrs) {
  Element.call(this, name, attrs)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.StreamParser" id="apidoc.element.node-xmpp.server.StreamParser">
        function <span class="apidocSignatureSpan">node-xmpp.server.</span>StreamParser
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function StreamParser(options) {
  EventEmitter.call(this)
  var self = this

  var ElementInterface = (options &#x26;&#x26; options.Element) || Element
  var ParserInterface = (options &#x26;&#x26; options.Parser) || LtxParser
  this.maxStanzaSize = options &#x26;&#x26; options.maxStanzaSize
  this.parser = new ParserInterface()

<span class="apidocCodeCommentSpan">  /* Count traffic for entire life-time */
</span>  this.bytesParsed = 0
  /* Will be reset upon first stanza, but enforce maxStanzaSize until it is parsed */
  this.bytesParsedOnStanzaBegin = 0

  this.parser.on(&#x27;startElement&#x27;, function (name, attrs) {
    if (!self.element) {
      self.emit(&#x27;startElement&#x27;, name, attrs)
      self.emit(&#x27;start&#x27;, new Element(name, attrs))
    }

    // TODO: refuse anything but &#x3c;stream:stream&#x3e;
    if (!self.element &#x26;&#x26; (name === &#x27;stream:stream&#x27;)) {
      self.emit(&#x27;streamStart&#x27;, attrs)
    } else {
      var child
      if (!self.element) {
        /* A new stanza */
        child = new Stanza(name, attrs)
        self.element = child
        /* For maxStanzaSize enforcement */
        self.bytesParsedOnStanzaBegin = self.bytesParsed
      } else {
        /* A child element of a stanza */
        child = new ElementInterface(name, attrs)
        self.element = self.element.cnode(child)
      }
    }
  })

  this.parser.on(&#x27;endElement&#x27;, function (name) {
    if (!self.element) {
      self.emit(&#x27;endElement&#x27;, name)
    }

    if (!self.element &#x26;&#x26; (name === &#x27;stream:stream&#x27;)) {
      self.end()
    } else if (self.element &#x26;&#x26; (name === self.element.name)) {
      if (self.element.parent) {
        self.element = self.element.parent
      } else {
        /* element complete */
        self.emit(&#x27;element&#x27;, self.element)
        self.emit(&#x27;stanza&#x27;, self.element) // FIXME deprecate
        delete self.element
        /* maxStanzaSize doesn&#x27;t apply until next startElement */
        delete self.bytesParsedOnStanzaBegin
      }
    } else {
      self.error(&#x27;xml-not-well-formed&#x27;, &#x27;XML parse error&#x27;)
    }
  })

  this.parser.on(&#x27;text&#x27;, function (str) {
    if (self.element) self.element.t(str)
  })

  this.parser.on(&#x27;entityDecl&#x27;, function () {
    /* Entity declarations are forbidden in XMPP. We must abort to
     * avoid a billion laughs.
     */
    self.error(&#x27;xml-not-well-formed&#x27;, &#x27;No entity declarations allowed&#x27;)
    self.end()
  })

  this.parser.on(&#x27;error&#x27;, this.emit.bind(this, &#x27;error&#x27;))
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.WebSocketServer" id="apidoc.element.node-xmpp.server.WebSocketServer">
        function <span class="apidocSignatureSpan">node-xmpp.server.</span>WebSocketServer
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function WebSocketServer(opts) {
  var options = opts || {}
  var server = this.server = serverStop(options.server || http.createServer())
  server.on(&#x27;close&#x27;, this.emit.bind(this, &#x27;close&#x27;))
  server.on(&#x27;error&#x27;, this.emit.bind(this, &#x27;error&#x27;))
  server.on(&#x27;listening&#x27;, this.emit.bind(this, &#x27;listening&#x27;))

  var WS = this.WS = new ws.Server({server: server})
  var self = this
  WS.on(&#x27;connection&#x27;, function (socket) {
    self.acceptConnection(new Socket(socket))
  })

  options.streamOpen = &#x27;open&#x27;
  options.streamClose = &#x27;close&#x27;
  options.streamAttrs = {&#x27;xmlns&#x27;: XMPP_FRAMING}

  C2SServer.call(this, options)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server._Server" id="apidoc.element.node-xmpp.server._Server">
        function <span class="apidocSignatureSpan">node-xmpp.server.</span>_Server
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Server(options) {
  EventEmitter.call(this)

  this.options = options || {}
  this.port = this.options.port || this.DEFAULT_PORT

  this.connections = new Set()

  this.on(&#x27;connection&#x27;, this.onConnection.bind(this))

  // node-xmpp events
  this.on(&#x27;listening&#x27;, this.emit.bind(this, &#x27;online&#x27;))
  this.on(&#x27;close&#x27;, this.emit.bind(this, &#x27;offline&#x27;))
  this.on(&#x27;close&#x27;, this.emit.bind(this, &#x27;shutdown&#x27;))

<span class="apidocCodeCommentSpan">  /* And now start listening to connections on the
   * port provided as an option.
   */
</span>  if (this.server &#x26;&#x26; this.options.autostart !== false) {
    this.listen()
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.createElement" id="apidoc.element.node-xmpp.server.createElement">
        function <span class="apidocSignatureSpan">node-xmpp.server.</span>createElement
        <span class="apidocSignatureSpan">(name, attrs)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function createElement(name, attrs) {
  var el = new Element(name, attrs)

  for (var i = 2; i &#x3c; arguments.length; i++) {
    var child = arguments[i]
    if (child) el.cnode(child)
  }

  return el
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.createStanza" id="apidoc.element.node-xmpp.server.createStanza">
        function <span class="apidocSignatureSpan">node-xmpp.server.</span>createStanza
        <span class="apidocSignatureSpan">(name, attrs)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function createStanza(name, attrs) {
  var el

  switch (name) {
    case &#x27;presence&#x27;:
    case &#x27;message&#x27;:
    case &#x27;iq&#x27;:
      el = new Stanza(name, attrs)
      break
    default:
      el = new Element(name, attrs)
  }

  var children = Array.prototype.slice.call(arguments, 2)

  children.forEach(function (child) {
    el.cnode(child)
  })
  return el
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.escapeXML" id="apidoc.element.node-xmpp.server.escapeXML">
        function <span class="apidocSignatureSpan">node-xmpp.server.</span>escapeXML
        <span class="apidocSignatureSpan">(s)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function escapeXML(s) {
  return s.replace(/&#x26;|&#x3c;|&#x3e;|&#x22;|&#x27;/g, escapeXMLReplace)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.escapeXMLText" id="apidoc.element.node-xmpp.server.escapeXMLText">
        function <span class="apidocSignatureSpan">node-xmpp.server.</span>escapeXMLText
        <span class="apidocSignatureSpan">(s)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function escapeXMLText(s) {
  return s.replace(/&#x26;|&#x3c;|&#x3e;/g, escapeXMLReplace)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.inherits" id="apidoc.element.node-xmpp.server.inherits">
        function <span class="apidocSignatureSpan">node-xmpp.server.</span>inherits
        <span class="apidocSignatureSpan">(ctor, superCtor)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">inherits = function (ctor, superCtor) {

  if (ctor === undefined || ctor === null)
    throw new TypeError(&#x27;The constructor to &#x22;inherits&#x22; must not be &#x27; +
                        &#x27;null or undefined&#x27;);

  if (superCtor === undefined || superCtor === null)
    throw new TypeError(&#x27;The super constructor to &#x22;inherits&#x22; must not &#x27; +
                        &#x27;be null or undefined&#x27;);

  if (superCtor.prototype === undefined)
    throw new TypeError(&#x27;The super constructor to &#x22;inherits&#x22; must &#x27; +
                        &#x27;have a prototype&#x27;);

  ctor.super_ = superCtor;
  Object.setPrototypeOf(ctor.prototype, superCtor.prototype);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.ltx" id="apidoc.element.node-xmpp.server.ltx">
        function <span class="apidocSignatureSpan">node-xmpp.server.</span>ltx
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function ltx() {
  return tag.apply(null, arguments)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.parse" id="apidoc.element.node-xmpp.server.parse">
        function <span class="apidocSignatureSpan">node-xmpp.server.</span>parse
        <span class="apidocSignatureSpan">(data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function parse(data) {
  return ltxParse(data, Parser)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.stanza" id="apidoc.element.node-xmpp.server.stanza">
        function <span class="apidocSignatureSpan">node-xmpp.server.</span>stanza
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function xml() {
  return tag.apply(null, arguments)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>








</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.node-xmpp.server.BOSHServer" id="apidoc.module.node-xmpp.server.BOSHServer">module node-xmpp.server.BOSHServer</a></h1>


    <h2>
        <a href="#apidoc.element.node-xmpp.server.BOSHServer.BOSHServer" id="apidoc.element.node-xmpp.server.BOSHServer.BOSHServer">
        function <span class="apidocSignatureSpan">node-xmpp.server.</span>BOSHServer
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function BOSHServer(opts) {
  var options = opts || {}
  var server = this.server = new Server({
    server: options.server,
    cors: options.cors,
    nextRequestTimeout: options.nextRequestTimeout
  })
  server.on(&#x27;close&#x27;, this.emit.bind(this, &#x27;close&#x27;))
  server.on(&#x27;error&#x27;, this.emit.bind(this, &#x27;error&#x27;))
  server.on(&#x27;listening&#x27;, this.emit.bind(this, &#x27;listening&#x27;))
  server.on(&#x27;connection&#x27;, this.acceptConnection.bind(this))

  C2SServer.call(this, options)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.BOSHServer.super_" id="apidoc.element.node-xmpp.server.BOSHServer.super_">
        function <span class="apidocSignatureSpan">node-xmpp.server.BOSHServer.</span>super_
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function C2SServer(options) {
  Server.call(this, options)

  this.availableSaslMechanisms = [Plain]

  // don&#x27;t allow anybody by default when using client cert auth
  if ((this.options.requestCert) &#x26;&#x26;
    (this.options.rejectUnauthorized !== false)) {
    this.options.rejectUnauthorized = true
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.node-xmpp.server.BOSHServer.super_.prototype" id="apidoc.module.node-xmpp.server.BOSHServer.super_.prototype">module node-xmpp.server.BOSHServer.super_.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.node-xmpp.server.BOSHServer.super_.prototype.Session" id="apidoc.element.node-xmpp.server.BOSHServer.super_.prototype.Session">
        function <span class="apidocSignatureSpan">node-xmpp.server.BOSHServer.super_.prototype.</span>Session
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Session(opts) {
  this.authenticated = false
  this.server = opts.server
  this.generateId = rack(opts.idBits, opts.idBitsBase, opts.idBitsExpandBy)

  this.connection = opts.connection || new Connection({
    rejectUnauthorized: opts.rejectUnauthorized,
    requestCert: opts.requestCert,
    reconnect: false,
    streamOpen: opts.streamOpen,
    streamClose: opts.streamClose,
    streamAttrs: opts.streamAttrs
  })
  this._addConnectionListeners()
  if (this.connection.xmlns) {
    this.connection.xmlns[&#x27;&#x27;] = NS_CLIENT
  }
  this.connection.streamAttrs.version = &#x27;1.0&#x27;
  this.connection.streamAttrs.id = this.generateId()

  if (this.connection.connect) {
    this.connection.connect({socket: opts.socket})
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.BOSHServer.super_.prototype.clearSaslMechanism" id="apidoc.element.node-xmpp.server.BOSHServer.super_.prototype.clearSaslMechanism">
        function <span class="apidocSignatureSpan">node-xmpp.server.BOSHServer.super_.prototype.</span>clearSaslMechanism
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">clearSaslMechanism = function () {
  this.availableSaslMechanisms = []
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.BOSHServer.super_.prototype.getSaslMechanisms" id="apidoc.element.node-xmpp.server.BOSHServer.super_.prototype.getSaslMechanisms">
        function <span class="apidocSignatureSpan">node-xmpp.server.BOSHServer.super_.prototype.</span>getSaslMechanisms
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getSaslMechanisms = function () {
  return this.availableSaslMechanisms
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.BOSHServer.super_.prototype.registerSaslMechanism" id="apidoc.element.node-xmpp.server.BOSHServer.super_.prototype.registerSaslMechanism">
        function <span class="apidocSignatureSpan">node-xmpp.server.BOSHServer.super_.prototype.</span>registerSaslMechanism
        <span class="apidocSignatureSpan">(method)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">registerSaslMechanism = function (method) {
  // check if method is registered
  if (this.availableSaslMechanisms.indexOf(method) === -1) {
    this.availableSaslMechanisms.push(method)
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.BOSHServer.super_.prototype.unregisterSaslMechanism" id="apidoc.element.node-xmpp.server.BOSHServer.super_.prototype.unregisterSaslMechanism">
        function <span class="apidocSignatureSpan">node-xmpp.server.BOSHServer.super_.prototype.</span>unregisterSaslMechanism
        <span class="apidocSignatureSpan">(method)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">unregisterSaslMechanism = function (method) {
  // check if method is registered
  var index = this.availableSaslMechanisms.indexOf(method)
  if (index &#x3e;= 0) {
    this.availableSaslMechanisms.splice(index, 1)
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.node-xmpp.server.C2S" id="apidoc.module.node-xmpp.server.C2S">module node-xmpp.server.C2S</a></h1>


    <h2>
        <a href="#apidoc.element.node-xmpp.server.C2S.BOSHServer" id="apidoc.element.node-xmpp.server.C2S.BOSHServer">
        function <span class="apidocSignatureSpan">node-xmpp.server.C2S.</span>BOSHServer
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function BOSHServer(opts) {
  var options = opts || {}
  var server = this.server = new Server({
    server: options.server,
    cors: options.cors,
    nextRequestTimeout: options.nextRequestTimeout
  })
  server.on(&#x27;close&#x27;, this.emit.bind(this, &#x27;close&#x27;))
  server.on(&#x27;error&#x27;, this.emit.bind(this, &#x27;error&#x27;))
  server.on(&#x27;listening&#x27;, this.emit.bind(this, &#x27;listening&#x27;))
  server.on(&#x27;connection&#x27;, this.acceptConnection.bind(this))

  C2SServer.call(this, options)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.C2S.TCPServer" id="apidoc.element.node-xmpp.server.C2S.TCPServer">
        function <span class="apidocSignatureSpan">node-xmpp.server.C2S.</span>TCPServer
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function TCPServer(options) {
  var server = this.server = serverStop(options &#x26;&#x26; options.server || net.createServer())
  server.on(&#x27;connection&#x27;, this.acceptConnection.bind(this))
  server.on(&#x27;close&#x27;, this.emit.bind(this, &#x27;close&#x27;))
  server.on(&#x27;error&#x27;, this.emit.bind(this, &#x27;error&#x27;))
  server.on(&#x27;listening&#x27;, this.emit.bind(this, &#x27;listening&#x27;))

  C2SServer.call(this, options)
  this._setupTls()
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.C2S.WebSocketServer" id="apidoc.element.node-xmpp.server.C2S.WebSocketServer">
        function <span class="apidocSignatureSpan">node-xmpp.server.C2S.</span>WebSocketServer
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function WebSocketServer(opts) {
  var options = opts || {}
  var server = this.server = serverStop(options.server || http.createServer())
  server.on(&#x27;close&#x27;, this.emit.bind(this, &#x27;close&#x27;))
  server.on(&#x27;error&#x27;, this.emit.bind(this, &#x27;error&#x27;))
  server.on(&#x27;listening&#x27;, this.emit.bind(this, &#x27;listening&#x27;))

  var WS = this.WS = new ws.Server({server: server})
  var self = this
  WS.on(&#x27;connection&#x27;, function (socket) {
    self.acceptConnection(new Socket(socket))
  })

  options.streamOpen = &#x27;open&#x27;
  options.streamClose = &#x27;close&#x27;
  options.streamAttrs = {&#x27;xmlns&#x27;: XMPP_FRAMING}

  C2SServer.call(this, options)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.C2S._BOSHServer" id="apidoc.element.node-xmpp.server.C2S._BOSHServer">
        function <span class="apidocSignatureSpan">node-xmpp.server.C2S.</span>_BOSHServer
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function BOSHServer(options) {
  EventEmitter.call(this)
  this.options = options || {}
  this.nextRequestTimeout = this.options.nextRequestTimeout || NEXT_REQUEST_TIMEOUT

  // set default cors properties
  if (!this.options.cors) {
    this.options.cors = {}
  }
  for (var i in this.corsHeaders) {
    if (typeof this.options.cors[i] === &#x27;undefined&#x27;) {
      this.options.cors[i] = this.corsHeaders[i]
    }
  }

  this.sessions = Object.create(null)

  var server = this.server = serverStop(this.options.server || http.createServer())
  server.on(&#x27;request&#x27;, this.onRequest.bind(this))
  server.on(&#x27;close&#x27;, this.emit.bind(this, &#x27;close&#x27;))
  server.on(&#x27;error&#x27;, this.emit.bind(this, &#x27;error&#x27;))
  server.on(&#x27;listening&#x27;, this.emit.bind(this, &#x27;listening&#x27;))
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.C2S._BOSHSocket" id="apidoc.element.node-xmpp.server.C2S._BOSHSocket">
        function <span class="apidocSignatureSpan">node-xmpp.server.C2S.</span>_BOSHSocket
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function BOSHSession(opts) {
  // socket properties
  this.writable = true
  this.readable = true

  // BOSH settings
  this.nextRequestTimeout = opts.nextRequestTimeout
  if (opts.xmlns) {
    for (var prefix in opts.xmlns) {
      if (prefix) {
        this.xmlnsAttrs[&#x27;xmlns:&#x27; + prefix] = opts.xmlns[prefix]
      } else {
        this.xmlnsAttrs.xmlns = opts.xmlns[prefix]
      }
    }
  }
  this.streamAttrs = opts.streamAttrs || {}
  this.handshakeAttrs = opts.bodyEl.attrs

  // generate sid
  this.sid = opts.sid || hat()
  // add sid to properties
  this.xmlnsAttrs.sid = this.sid

  this.nextRid = parseInt(opts.bodyEl.attrs.rid, 10)
  this.wait = parseInt(opts.bodyEl.attrs.wait || &#x27;30&#x27;, 10)
  this.hold = parseInt(opts.bodyEl.attrs.hold || &#x27;1&#x27;, 10)
  this.inQueue = Object.create(null)
  this.outQueue = []
  this.stanzaQueue = []

  this.emit(&#x27;connect&#x27;)

  this.inQueue[opts.bodyEl.attrs.rid] = opts
  process.nextTick(this.workInQueue.bind(this))
  this.setNextRequestTimeout()
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.C2S._Server" id="apidoc.element.node-xmpp.server.C2S._Server">
        function <span class="apidocSignatureSpan">node-xmpp.server.C2S.</span>_Server
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function C2SServer(options) {
  Server.call(this, options)

  this.availableSaslMechanisms = [Plain]

  // don&#x27;t allow anybody by default when using client cert auth
  if ((this.options.requestCert) &#x26;&#x26;
    (this.options.rejectUnauthorized !== false)) {
    this.options.rejectUnauthorized = true
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.C2S._Session" id="apidoc.element.node-xmpp.server.C2S._Session">
        function <span class="apidocSignatureSpan">node-xmpp.server.C2S.</span>_Session
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Session(opts) {
  this.authenticated = false
  this.server = opts.server
  this.generateId = rack(opts.idBits, opts.idBitsBase, opts.idBitsExpandBy)

  this.connection = opts.connection || new Connection({
    rejectUnauthorized: opts.rejectUnauthorized,
    requestCert: opts.requestCert,
    reconnect: false,
    streamOpen: opts.streamOpen,
    streamClose: opts.streamClose,
    streamAttrs: opts.streamAttrs
  })
  this._addConnectionListeners()
  if (this.connection.xmlns) {
    this.connection.xmlns[&#x27;&#x27;] = NS_CLIENT
  }
  this.connection.streamAttrs.version = &#x27;1.0&#x27;
  this.connection.streamAttrs.id = this.generateId()

  if (this.connection.connect) {
    this.connection.connect({socket: opts.socket})
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.C2S._WebSocketSocket" id="apidoc.element.node-xmpp.server.C2S._WebSocketSocket">
        function <span class="apidocSignatureSpan">node-xmpp.server.C2S.</span>_WebSocketSocket
        <span class="apidocSignatureSpan">(socket)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Socket(socket) {
  EventEmitter.call(this)

  this.xmlns = {}
  this.websocket = null

  this.writable = true
  this.readable = true
  this.setupSocket(socket)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.node-xmpp.server.C2S._BOSHServer.prototype" id="apidoc.module.node-xmpp.server.C2S._BOSHServer.prototype">module node-xmpp.server.C2S._BOSHServer.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.node-xmpp.server.C2S._BOSHServer.prototype._createSession" id="apidoc.element.node-xmpp.server.C2S._BOSHServer.prototype._createSession">
        function <span class="apidocSignatureSpan">node-xmpp.server.C2S._BOSHServer.prototype.</span>_createSession
        <span class="apidocSignatureSpan">(req, res, bodyEl)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_createSession = function (req, res, bodyEl) {
  debug(&#x27;create a new session&#x27;)

  var self = this
  var session = new Socket({
    req: req,
    res: res,
    bodyEl: bodyEl,
    nextRequestTimeout: this.nextRequestTimeout
  })
  this.sessions[session.sid] = session

  // Hook for destruction
  session.once(&#x27;close&#x27;, function () {
    delete self.sessions[session.sid]
  })

  res.boshAttrs = {&#x27;xmpp:restartlogic&#x27;: true}

  // emit new connection
  this.emit(&#x27;connection&#x27;, session)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.C2S._BOSHServer.prototype._handlePostRequest" id="apidoc.element.node-xmpp.server.C2S._BOSHServer.prototype._handlePostRequest">
        function <span class="apidocSignatureSpan">node-xmpp.server.C2S._BOSHServer.prototype.</span>_handlePostRequest
        <span class="apidocSignatureSpan">(req, res)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_handlePostRequest = function (req, res) {
  debug(&#x27;handle POST request&#x27;)
  var self = this
  parseBody(req, function (error, bodyEl) {
    if (error ||
      !bodyEl || !bodyEl.attrs || !bodyEl.is ||
      !bodyEl.is(&#x27;body&#x27;, NS_HTTPBIND)
    ) {
      return self._sendErrorResponse(res, error)
    }

    debug(&#x27;got: &#x27; + bodyEl.toString())

    if (bodyEl.attrs.sid) {
      debug(&#x27;sid found, reuse existing session&#x27;)
      self._useExistingSession(req, res, bodyEl)
    } else {
      debug(&#x27;no sid found, create a new session&#x27;)
      self._createSession(req, res, bodyEl)
    }
  })
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.C2S._BOSHServer.prototype._sendErrorResponse" id="apidoc.element.node-xmpp.server.C2S._BOSHServer.prototype._sendErrorResponse">
        function <span class="apidocSignatureSpan">node-xmpp.server.C2S._BOSHServer.prototype.</span>_sendErrorResponse
        <span class="apidocSignatureSpan">(res, error)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_sendErrorResponse = function (res, error) {
  res.writeHead(400, { &#x27;Content-Type&#x27;: &#x27;text/plain&#x27; })

  var body
  if (error instanceof Error) {
    body = error.message || error.stack
  } else if (typeof error === &#x27;string&#x27;) {
    body = error
  } else {
    body = &#x27;error&#x27;
  }

  res.end(body)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.C2S._BOSHServer.prototype._useExistingSession" id="apidoc.element.node-xmpp.server.C2S._BOSHServer.prototype._useExistingSession">
        function <span class="apidocSignatureSpan">node-xmpp.server.C2S._BOSHServer.prototype.</span>_useExistingSession
        <span class="apidocSignatureSpan">(req, res, bodyEl)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_useExistingSession = function (req, res, bodyEl) {
  var session = this.sessions[bodyEl.attrs.sid]
  if (session) {
    debug(&#x27;session for sid&#x27;, bodyEl.attrs.sid, &#x27;found&#x27;, process.pid)
    session.handleHTTP(
      { req: req, res: res, bodyEl: bodyEl }
    )
    res.once(&#x27;close&#x27;, function () {
      session.closeSocket()
    })
  } else {
    debug(&#x27;no session found for sid&#x27;, bodyEl.attrs.sid, process.pid)
    res.writeHead(
      404, { &#x27;Content-Type&#x27;: &#x27;text/plain&#x27; }
    )
    res.end(&#x27;BOSH session not found&#x27;)
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.C2S._BOSHServer.prototype.close" id="apidoc.element.node-xmpp.server.C2S._BOSHServer.prototype.close">
        function <span class="apidocSignatureSpan">node-xmpp.server.C2S._BOSHServer.prototype.</span>close
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">close = function () {
  this.server.close.apply(this.server, arguments)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.C2S._BOSHServer.prototype.listen" id="apidoc.element.node-xmpp.server.C2S._BOSHServer.prototype.listen">
        function <span class="apidocSignatureSpan">node-xmpp.server.C2S._BOSHServer.prototype.</span>listen
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">listen = function () {
  this.server.listen.apply(this.server, arguments)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.C2S._BOSHServer.prototype.onRequest" id="apidoc.element.node-xmpp.server.C2S._BOSHServer.prototype.onRequest">
        function <span class="apidocSignatureSpan">node-xmpp.server.C2S._BOSHServer.prototype.</span>onRequest
        <span class="apidocSignatureSpan">(req, res)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">onRequest = function (req, res) {
  debug(&#x27;handle http&#x27;)
  this.setCorsHeader(req, res, this.options.cors)
  if (req.method === &#x27;OPTIONS&#x27;) {
    res.writeHead(200)
    res.end()
  } else if (req.method === &#x27;POST&#x27;) {
    this._handlePostRequest(req, res)
  } else {
    res.writeHead(405, {
      &#x27;Allow&#x27;: &#x27;OPTIONS, POST&#x27;
    })
    res.end()
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.C2S._BOSHServer.prototype.setCorsHeader" id="apidoc.element.node-xmpp.server.C2S._BOSHServer.prototype.setCorsHeader">
        function <span class="apidocSignatureSpan">node-xmpp.server.C2S._BOSHServer.prototype.</span>setCorsHeader
        <span class="apidocSignatureSpan">(req, res, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">setCorsHeader = function (req, res, options) {
  var origin = options.origin
  if (Array.isArray(options.origin)) {
    origin = options.origin.indexOf(req.headers.origin) &#x3e; -1 ? req.headers.origin : undefined
  } else if (options.origin === &#x27;*&#x27;) {
    origin = req.headers.origin
  }

  if (origin) {
    res.setHeader(&#x27;Access-Control-Allow-Origin&#x27;, origin)
  }
  res.setHeader(&#x27;Access-Control-Allow-Credentials&#x27;, options.credentials)
  res.setHeader(&#x27;Access-Control-Allow-Methods&#x27;, options.methods.join(&#x27;, &#x27;))
  res.setHeader(&#x27;Access-Control-Allow-Headers&#x27;, options.headers.join(&#x27;, &#x27;))
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.C2S._BOSHServer.prototype.stop" id="apidoc.element.node-xmpp.server.C2S._BOSHServer.prototype.stop">
        function <span class="apidocSignatureSpan">node-xmpp.server.C2S._BOSHServer.prototype.</span>stop
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">stop = function () {
  this.server.stop.apply(this.server, arguments)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.node-xmpp.server.C2S._BOSHSocket.prototype" id="apidoc.module.node-xmpp.server.C2S._BOSHSocket.prototype">module node-xmpp.server.C2S._BOSHSocket.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.node-xmpp.server.C2S._BOSHSocket.prototype.closeSocket" id="apidoc.element.node-xmpp.server.C2S._BOSHSocket.prototype.closeSocket">
        function <span class="apidocSignatureSpan">node-xmpp.server.C2S._BOSHSocket.prototype.</span>closeSocket
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">closeSocket = function () {
  debug(&#x27;close socket&#x27;)
  this.resetNextRequestTimeout()
  this.emit(&#x27;end&#x27;)
  this.emit(&#x27;close&#x27;)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.C2S._BOSHSocket.prototype.end" id="apidoc.element.node-xmpp.server.C2S._BOSHSocket.prototype.end">
        function <span class="apidocSignatureSpan">node-xmpp.server.C2S._BOSHSocket.prototype.</span>end
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">end = function () {
  debug(&#x27;close connection&#x27;)
  this.closeSocket()
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.C2S._BOSHSocket.prototype.handleHTTP" id="apidoc.element.node-xmpp.server.C2S._BOSHSocket.prototype.handleHTTP">
        function <span class="apidocSignatureSpan">node-xmpp.server.C2S._BOSHSocket.prototype.</span>handleHTTP
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">handleHTTP = function (opts) {
  debug(&#x27;handle http&#x27;)
  var oldOpts = this.inQueue[opts.bodyEl.attrs.rid]
  if (oldOpts) {
    // Already queued? Replace with this request
    oldOpts.res.writeHead(
      403,
      { &#x27;Content-Type&#x27;: &#x27;text/plain&#x27; }
    )
    oldOpts.res.end(&#x27;Request replaced by same RID&#x27;)
  } else if (parseInt(opts.bodyEl.attrs.rid, 10) &#x3c; parseInt(this.nextRid, 10)) {
    // This req has already been processed.
    this.outQueue.push(opts)
    return
  }

  this.resetNextRequestTimeout()

  // Set up timeout:
  var self = this
  opts.timer = setTimeout(function () {
    delete opts.timer
    self.onReqTimeout(opts.bodyEl.attrs.rid)
  }, this.wait * 1000)

  // Process...
  this.inQueue[opts.bodyEl.attrs.rid] = opts
  process.nextTick(this.workInQueue.bind(this))
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.C2S._BOSHSocket.prototype.onReqTimeout" id="apidoc.element.node-xmpp.server.C2S._BOSHSocket.prototype.onReqTimeout">
        function <span class="apidocSignatureSpan">node-xmpp.server.C2S._BOSHSocket.prototype.</span>onReqTimeout
        <span class="apidocSignatureSpan">(rid)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">onReqTimeout = function (rid) {
  var opts = this.inQueue[rid]

  if (opts) {
    delete this.inQueue[rid]
  } else {
    for (var i = 0; i &#x3c; this.outQueue.length; i++) {
      if (this.outQueue[i].bodyEl.attrs.rid === rid) break
    }

    if (i &#x3c; this.outQueue.length) {
      opts = this.outQueue[i]
      this.outQueue.splice(i, 1)
    } else {
      console.warn(&#x27;Spurious timeout for BOSH rid&#x27;, rid)
      return
    }
  }
  this.respond(opts.res, {})
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.C2S._BOSHSocket.prototype.pause" id="apidoc.element.node-xmpp.server.C2S._BOSHSocket.prototype.pause">
        function <span class="apidocSignatureSpan">node-xmpp.server.C2S._BOSHSocket.prototype.</span>pause
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">pause = function () {}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.C2S._BOSHSocket.prototype.resetNextRequestTimeout" id="apidoc.element.node-xmpp.server.C2S._BOSHSocket.prototype.resetNextRequestTimeout">
        function <span class="apidocSignatureSpan">node-xmpp.server.C2S._BOSHSocket.prototype.</span>resetNextRequestTimeout
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">resetNextRequestTimeout = function () {
  if (!this.NRTimeout) {
    return
  }

  clearTimeout(this.NRTimeout)
  delete this.NRTimeout
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.C2S._BOSHSocket.prototype.respond" id="apidoc.element.node-xmpp.server.C2S._BOSHSocket.prototype.respond">
        function <span class="apidocSignatureSpan">node-xmpp.server.C2S._BOSHSocket.prototype.</span>respond
        <span class="apidocSignatureSpan">(res, attrs, children)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">respond = function (res, attrs, children) {
  res.writeHead(
    200,
    { &#x27;Content-Type&#x27;: &#x27;text/xml; charset=utf-8&#x27; }
  )
  for (var k in this.xmlnsAttrs) {
    attrs[k] = this.xmlnsAttrs[k]
  }
  if (res.boshAttrs) {
    for (var i in res.boshAttrs) {
      attrs[i] = res.boshAttrs[i]
    }
  }
  var bodyEl = new ltx.Element(&#x27;body&#x27;, attrs)
  if (children) {
    // TODO, we need to filter the stream element
    children.forEach(function (element) {
      try {
        bodyEl.cnode(ltx.parse(element))
      } catch (err) {
        console.error(&#x27;could not parse&#x27; + element)
      }
    })
  }
  bodyEl.write(function (s) {
    res.write(s)
  })
  res.end()
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.C2S._BOSHSocket.prototype.resume" id="apidoc.element.node-xmpp.server.C2S._BOSHSocket.prototype.resume">
        function <span class="apidocSignatureSpan">node-xmpp.server.C2S._BOSHSocket.prototype.</span>resume
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">resume = function () {}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.C2S._BOSHSocket.prototype.sendData" id="apidoc.element.node-xmpp.server.C2S._BOSHSocket.prototype.sendData">
        function <span class="apidocSignatureSpan">node-xmpp.server.C2S._BOSHSocket.prototype.</span>sendData
        <span class="apidocSignatureSpan">(data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">sendData = function (data) {
  // emit this data to connection
  debug(&#x27;emit data: &#x27; + data.toString())
  this.emit(&#x27;data&#x27;, data.toString())
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.C2S._BOSHSocket.prototype.serializeStanza" id="apidoc.element.node-xmpp.server.C2S._BOSHSocket.prototype.serializeStanza">
        function <span class="apidocSignatureSpan">node-xmpp.server.C2S._BOSHSocket.prototype.</span>serializeStanza
        <span class="apidocSignatureSpan">(stanza, fn)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">serializeStanza = function (stanza, fn) {
  fn(stanza.toString()) // No specific serialization
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.C2S._BOSHSocket.prototype.setNextRequestTimeout" id="apidoc.element.node-xmpp.server.C2S._BOSHSocket.prototype.setNextRequestTimeout">
        function <span class="apidocSignatureSpan">node-xmpp.server.C2S._BOSHSocket.prototype.</span>setNextRequestTimeout
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">setNextRequestTimeout = function () {
  this.resetNextRequestTimeout()

  if (this.outQueue.length &#x3e; 0) {
    return
  }

  var self = this
  this.NRTimeout = setTimeout(function () {
    self.emit(&#x27;error&#x27;, new Error(&#x27;Session timeout&#x27;))
    self.emit(&#x27;close&#x27;)
  }, this.nextRequestTimeout)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.C2S._BOSHSocket.prototype.streamOpen" id="apidoc.element.node-xmpp.server.C2S._BOSHSocket.prototype.streamOpen">
        function <span class="apidocSignatureSpan">node-xmpp.server.C2S._BOSHSocket.prototype.</span>streamOpen
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">streamOpen = function (opts) {
<span class="apidocCodeCommentSpan">  /* eslint-disable indent */
</span>  return [
    &#x27;&#x3c;stream:stream &#x27;,
    &#x27;xmlns=&#x22;jabber:client&#x22; &#x27;,
    &#x27;xmlns:stream=&#x22;http://etherx.jabber.org/streams&#x22; &#x27;,
    &#x27;to=&#x22;&#x27; + opts.to + &#x27;&#x22;&#x27;,
    opts.xmppv ? (&#x27; xmpp:version=&#x22;&#x27; + opts.xmppv + &#x27;&#x22;&#x27;) : &#x27;&#x27;,
    &#x27;&#x3e;&#x27;
  ].join(&#x27;&#x27;)
/* eslint-enable indent */
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.C2S._BOSHSocket.prototype.workInQueue" id="apidoc.element.node-xmpp.server.C2S._BOSHSocket.prototype.workInQueue">
        function <span class="apidocSignatureSpan">node-xmpp.server.C2S._BOSHSocket.prototype.</span>workInQueue
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">workInQueue = function () {
  debug(&#x27;run workInQueue&#x27;)

  var opts = this.inQueue[this.nextRid]
  if (!opts) {
    // Still waiting for next rid request
    return
  }

  var self = this
  delete this.inQueue[this.nextRid]
  this.nextRid++

  // handle message

  // extract values
  var rid = opts.bodyEl.attrs.rid
  var sid = opts.bodyEl.attrs.sid
  var to = opts.bodyEl.attrs.to
  var restart = opts.bodyEl.attrs[&#x27;xmpp:restart&#x27;]
  var xmppv = opts.bodyEl.attrs[&#x27;xmpp:version&#x27;]

  // handle stream start
  if (!restart &#x26;&#x26; rid &#x26;&#x26; !sid) {
    debug(&#x27;handle stream start&#x27;)
    // emulate stream creation for connection
    this.sendData(
      &#x27;&#x3c;?xml version=&#x22;1.0&#x22; ?&#x3e;&#x27; +
      this.streamOpen({to: to, xmppv: xmppv})
    )
  // handle stream reset
  } else if (opts.bodyEl.attrs[&#x27;xmpp:restart&#x27;] === &#x27;true&#x27;) {
    debug(&#x27;reset stream&#x27;)
    // emulate stream restart for connection
    this.sendData(
      this.streamOpen({to: to, xmppv: xmppv})
    )
  }

  opts.bodyEl.children.forEach(function (stanza) {
    debug(&#x27;send data: &#x27; + stanza)
    // extract content
    self.sendData(stanza.toString())
  })

  // Input process, retain response for sending stanzas
  this.outQueue.push(opts)

  if (opts.bodyEl.attrs.type !== &#x27;terminate&#x27;) {
    debug(&#x27;schedule response&#x27;)
    process.nextTick(function () {
      self.workOutQueue()
      self.workInQueue()
    })
  } else {
    debug(&#x27;terminate connection&#x27;)
    for (var i = 0; i &#x3c; this.outQueue.length; i++) {
      opts = this.outQueue[i]
      if (opts.timer) clearTimeout(opts.timer)
      this.respond(opts.res, { type: &#x27;terminate&#x27; }, [])
    }
    this.outQueue = []
    this.closeSocket()
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.C2S._BOSHSocket.prototype.workOutQueue" id="apidoc.element.node-xmpp.server.C2S._BOSHSocket.prototype.workOutQueue">
        function <span class="apidocSignatureSpan">node-xmpp.server.C2S._BOSHSocket.prototype.</span>workOutQueue
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">workOutQueue = function () {
  debug(&#x27;run workOutQueue&#x27;)
  if ((this.stanzaQueue.length &#x3c; 1) &#x26;&#x26;
    (this.outQueue.length &#x3e; 0)) {
    this.emit(&#x27;drain&#x27;)
    return
  } else if (this.outQueue.length &#x3c; 1) {
    return
  }

  // queued stanzas
  var stanzas = this.stanzaQueue
  this.stanzaQueue = []

  // available requests
  var opts = this.outQueue.shift()

  if (opts.timer) {
    clearTimeout(opts.timer)
    delete opts.timer
  }

  // WORKAROUND https://github.com/node-xmpp/node-xmpp-server/issues/100
  if (opts.res.connection.destroyed) {
    return
  }

  // answer
  this.respond(opts.res, {}, stanzas)

  this.setNextRequestTimeout()
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.C2S._BOSHSocket.prototype.write" id="apidoc.element.node-xmpp.server.C2S._BOSHSocket.prototype.write">
        function <span class="apidocSignatureSpan">node-xmpp.server.C2S._BOSHSocket.prototype.</span>write
        <span class="apidocSignatureSpan">(data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">write = function (data) {
  this.stanzaQueue.push(data)

  process.nextTick(this.workOutQueue.bind(this))
  // indicates if we flush
  return this.outQueue.length &#x3e; 0
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>






</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.node-xmpp.server.C2S._WebSocketSocket.prototype" id="apidoc.module.node-xmpp.server.C2S._WebSocketSocket.prototype">module node-xmpp.server.C2S._WebSocketSocket.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.node-xmpp.server.C2S._WebSocketSocket.prototype.end" id="apidoc.element.node-xmpp.server.C2S._WebSocketSocket.prototype.end">
        function <span class="apidocSignatureSpan">node-xmpp.server.C2S._WebSocketSocket.prototype.</span>end
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">end = function () {
  debug(&#x27;close connection&#x27;)
  this.socket.close()
  this.emit(&#x27;end&#x27;)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.C2S._WebSocketSocket.prototype.pause" id="apidoc.element.node-xmpp.server.C2S._WebSocketSocket.prototype.pause">
        function <span class="apidocSignatureSpan">node-xmpp.server.C2S._WebSocketSocket.prototype.</span>pause
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">pause = function () {
  // nothing to do
  debug(&#x27;websocket is requested to pause. But we cannot do anything&#x27;)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.C2S._WebSocketSocket.prototype.resume" id="apidoc.element.node-xmpp.server.C2S._WebSocketSocket.prototype.resume">
        function <span class="apidocSignatureSpan">node-xmpp.server.C2S._WebSocketSocket.prototype.</span>resume
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">resume = function () {
  // nothing to do
  debug(&#x27;websocket is requested to resume. But we cannot do anything&#x27;)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.C2S._WebSocketSocket.prototype.serializeStanza" id="apidoc.element.node-xmpp.server.C2S._WebSocketSocket.prototype.serializeStanza">
        function <span class="apidocSignatureSpan">node-xmpp.server.C2S._WebSocketSocket.prototype.</span>serializeStanza
        <span class="apidocSignatureSpan">(stanza, fn)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">serializeStanza = function (stanza, fn) {
  fn(stanza.toString()) // No specific serialization
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.C2S._WebSocketSocket.prototype.setupSocket" id="apidoc.element.node-xmpp.server.C2S._WebSocketSocket.prototype.setupSocket">
        function <span class="apidocSignatureSpan">node-xmpp.server.C2S._WebSocketSocket.prototype.</span>setupSocket
        <span class="apidocSignatureSpan">(socket)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">setupSocket = function (socket) {
  debug(&#x27;set socket&#x27;)
  this.socket = socket
  var self = this

  socket.on(&#x27;open&#x27;, function () {
    debug(&#x27;websocket connected&#x27;)
  })

  socket.on(&#x27;close&#x27;, function () {
    debug(&#x27;websocket disconnected&#x27;)
    self.emit(&#x27;close&#x27;)
  })

  socket.on(&#x27;message&#x27;, function (message, flags) {
    var connection = self.session.connection
    var body

    if (flags &#x26;&#x26; (flags.binary || flags.masked)) {
      body = message.toString(&#x27;utf8&#x27;)
    } else {
      body = message
    }

    var stanza
    try {
      stanza = ltx.parse(body)
    } catch (e) {
      console.log(e)
      connection.error(&#x27;xml-not-well-formed&#x27;, &#x27;XML parse error&#x27;)
      return
    }

    if (stanza.is(&#x27;open&#x27;)) {
      connection.emit(&#x27;streamStart&#x27;, stanza.attrs)
    } else {
      connection.emit(&#x27;stanza&#x27;, stanza)
    }
  })

  socket.on(&#x27;error&#x27;, function () {
    debug(&#x27;websocket error&#x27;)
    self.emit(&#x27;error&#x27;)
  })
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.C2S._WebSocketSocket.prototype.write" id="apidoc.element.node-xmpp.server.C2S._WebSocketSocket.prototype.write">
        function <span class="apidocSignatureSpan">node-xmpp.server.C2S._WebSocketSocket.prototype.</span>write
        <span class="apidocSignatureSpan">(data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">write = function (data) {
  debug(data)
  var self = this
  this.socket.send(data, function (error) {
    if (error) {
      self.emit(&#x27;error&#x27;, error)
    }
  })
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.node-xmpp.server.C2SServer" id="apidoc.module.node-xmpp.server.C2SServer">module node-xmpp.server.C2SServer</a></h1>


    <h2>
        <a href="#apidoc.element.node-xmpp.server.C2SServer.C2SServer" id="apidoc.element.node-xmpp.server.C2SServer.C2SServer">
        function <span class="apidocSignatureSpan">node-xmpp.server.</span>C2SServer
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function TCPServer(options) {
  var server = this.server = serverStop(options &#x26;&#x26; options.server || net.createServer())
  server.on(&#x27;connection&#x27;, this.acceptConnection.bind(this))
  server.on(&#x27;close&#x27;, this.emit.bind(this, &#x27;close&#x27;))
  server.on(&#x27;error&#x27;, this.emit.bind(this, &#x27;error&#x27;))
  server.on(&#x27;listening&#x27;, this.emit.bind(this, &#x27;listening&#x27;))

  C2SServer.call(this, options)
  this._setupTls()
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.C2SServer.super_" id="apidoc.element.node-xmpp.server.C2SServer.super_">
        function <span class="apidocSignatureSpan">node-xmpp.server.C2SServer.</span>super_
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function C2SServer(options) {
  Server.call(this, options)

  this.availableSaslMechanisms = [Plain]

  // don&#x27;t allow anybody by default when using client cert auth
  if ((this.options.requestCert) &#x26;&#x26;
    (this.options.rejectUnauthorized !== false)) {
    this.options.rejectUnauthorized = true
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.node-xmpp.server.C2SServer.prototype" id="apidoc.module.node-xmpp.server.C2SServer.prototype">module node-xmpp.server.C2SServer.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.node-xmpp.server.C2SServer.prototype._setupTls" id="apidoc.element.node-xmpp.server.C2SServer.prototype._setupTls">
        function <span class="apidocSignatureSpan">node-xmpp.server.C2SServer.prototype.</span>_setupTls
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_setupTls = function () {
  if (!this.options.tls) return
  var details = this.options.tls
  details.key = details.key || fs.readFileSync(details.keyPath, &#x27;ascii&#x27;)
  details.cert = details.cert || fs.readFileSync(details.certPath, &#x27;ascii&#x27;)
  this.credentials = tls.createSecureContext(details)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.node-xmpp.server.C2SStream" id="apidoc.module.node-xmpp.server.C2SStream">module node-xmpp.server.C2SStream</a></h1>


    <h2>
        <a href="#apidoc.element.node-xmpp.server.C2SStream.C2SStream" id="apidoc.element.node-xmpp.server.C2SStream.C2SStream">
        function <span class="apidocSignatureSpan">node-xmpp.server.</span>C2SStream
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Session(opts) {
  this.authenticated = false
  this.server = opts.server
  this.generateId = rack(opts.idBits, opts.idBitsBase, opts.idBitsExpandBy)

  this.connection = opts.connection || new Connection({
    rejectUnauthorized: opts.rejectUnauthorized,
    requestCert: opts.requestCert,
    reconnect: false,
    streamOpen: opts.streamOpen,
    streamClose: opts.streamClose,
    streamAttrs: opts.streamAttrs
  })
  this._addConnectionListeners()
  if (this.connection.xmlns) {
    this.connection.xmlns[&#x27;&#x27;] = NS_CLIENT
  }
  this.connection.streamAttrs.version = &#x27;1.0&#x27;
  this.connection.streamAttrs.id = this.generateId()

  if (this.connection.connect) {
    this.connection.connect({socket: opts.socket})
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.C2SStream.super_" id="apidoc.element.node-xmpp.server.C2SStream.super_">
        function <span class="apidocSignatureSpan">node-xmpp.server.C2SStream.</span>super_
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function EventEmitter() {
  EventEmitter.init.call(this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.node-xmpp.server.C2SStream.prototype" id="apidoc.module.node-xmpp.server.C2SStream.prototype">module node-xmpp.server.C2SStream.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.node-xmpp.server.C2SStream.prototype._addConnectionListeners" id="apidoc.element.node-xmpp.server.C2SStream.prototype._addConnectionListeners">
        function <span class="apidocSignatureSpan">node-xmpp.server.C2SStream.prototype.</span>_addConnectionListeners
        <span class="apidocSignatureSpan">(con)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_addConnectionListeners = function (con) {
  con = con || this.connection
  con.on(&#x27;stanza&#x27;, this.onStanza.bind(this))
  con.on(&#x27;drain&#x27;, this.emit.bind(this, &#x27;drain&#x27;))
  con.on(&#x27;data&#x27;, this.emit.bind(this, &#x27;data&#x27;))
  con.on(&#x27;end&#x27;, this.emit.bind(this, &#x27;end&#x27;))
  con.on(&#x27;close&#x27;, this.emit.bind(this, &#x27;close&#x27;))
  con.on(&#x27;error&#x27;, this.emit.bind(this, &#x27;error&#x27;))
  con.on(&#x27;connect&#x27;, this.emit.bind(this, &#x27;connect&#x27;))
  con.on(&#x27;reconnect&#x27;, this.emit.bind(this, &#x27;reconnect&#x27;))
  con.on(&#x27;disconnect&#x27;, this.emit.bind(this, &#x27;disconnect&#x27;))
  con.on(&#x27;disconnect&#x27;, this.emit.bind(this, &#x27;offline&#x27;))
  con.on(&#x27;streamStart&#x27;, function (attrs) {
    if (attrs.to === undefined) {
      this.connection.error(&#x27;host-unknown&#x27;, &#x22;&#x27;to&#x27; attribute missing&#x22;)
    } else if (attrs.to === &#x27;&#x27;) {
      this.connection.error(&#x27;host-unknown&#x27;, &#x22;empty &#x27;to&#x27; attibute&#x22;)
    } else {
      this.serverdomain = attrs.to
      con.streamAttrs.from = attrs.to
      this.startStream()
    }
  }.bind(this))
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.C2SStream.prototype.decode64" id="apidoc.element.node-xmpp.server.C2SStream.prototype.decode64">
        function <span class="apidocSignatureSpan">node-xmpp.server.C2SStream.prototype.</span>decode64
        <span class="apidocSignatureSpan">(encoded)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">decode64 = function (encoded) {
  return (new Buffer(encoded, &#x27;base64&#x27;)).toString(&#x27;utf8&#x27;)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.C2SStream.prototype.end" id="apidoc.element.node-xmpp.server.C2SStream.prototype.end">
        function <span class="apidocSignatureSpan">node-xmpp.server.C2SStream.prototype.</span>end
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">end = function () {
  this.connection.end()
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.C2SStream.prototype.onAuth" id="apidoc.element.node-xmpp.server.C2SStream.prototype.onAuth">
        function <span class="apidocSignatureSpan">node-xmpp.server.C2SStream.prototype.</span>onAuth
        <span class="apidocSignatureSpan">(stanza)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">onAuth = function (stanza) {
  var self = this

  // if we havn&#x27;t already decided for one method
  if (!this.mechanism) {
    var matchingMechs = this.mechanisms.filter(function (mech) {
      return mech.prototype.name === stanza.attrs.mechanism
    })

    // TODO handle case where we are not able to match a sasl mechanism
    this.mechanism = new matchingMechs[0]()

<span class="apidocCodeCommentSpan">    /**
     * Authenticates a user
     * @param  Object authRequest obejct with credentials like {user: &#x27;bob&#x27;, password: &#x27;secret&#x27;}
     */
</span>    this.mechanism.authenticate = function (user, cb) {
      if (!user.saslmech) {
        // attach sasl mechanism
        user.saslmech = self.mechanism.name
      }

      if (user.jid) {
        user.jid = new JID(user.jid)
      } else {
        user.jid = new JID(user.username, self.serverdomain.toString())
      }
      user.client = self

      // emit event
      self.emit(&#x27;authenticate&#x27;, user, cb)
    }
    this.mechanism.success = function (user) {
      self.emit(&#x27;auth-success&#x27;, user.jid)
      self.jid = user.jid
      self.authenticated = true
      self.send(new Element(&#x27;success&#x27;, { xmlns: NS_XMPP_SASL }))
      // incoming stream restart
      if (self.connection.startParser) {
        self.connection.startParser()
      }
    }
    this.mechanism.failure = function (error) {
      self.sendAuthError(error)
    }
  }

  if (this.mechanism) {
    this.mechanism.manageAuth(stanza, this)
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.C2SStream.prototype.onAuthStanza" id="apidoc.element.node-xmpp.server.C2SStream.prototype.onAuthStanza">
        function <span class="apidocSignatureSpan">node-xmpp.server.C2SStream.prototype.</span>onAuthStanza
        <span class="apidocSignatureSpan">(stanza)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">onAuthStanza = function (stanza) {
  var bind = stanza.getChild(&#x27;bind&#x27;, NS_BIND)
  if (stanza.is(&#x27;iq&#x27;) &#x26;&#x26;
    (stanza.attrs.type === &#x27;set&#x27;) &#x26;&#x26;
    (bind)) {
    this.onBind(stanza)
  } else if (stanza.is(&#x27;iq&#x27;) &#x26;&#x26;
    (stanza.attrs.type === &#x27;set&#x27;) &#x26;&#x26;
    stanza.getChild(&#x27;session&#x27;, NS_SESSION)) {
    this.onSession(stanza)
  } else {
    this.emit(&#x27;stanza&#x27;, stanza)
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.C2SStream.prototype.onBind" id="apidoc.element.node-xmpp.server.C2SStream.prototype.onBind">
        function <span class="apidocSignatureSpan">node-xmpp.server.C2SStream.prototype.</span>onBind
        <span class="apidocSignatureSpan">(stanza)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">onBind = function (stanza) {
  var self = this
  var bind = stanza.getChild(&#x27;bind&#x27;, NS_BIND)
  var resourceNode = bind.getChild(&#x27;resource&#x27;, NS_BIND)
  var resource = resourceNode ? resourceNode.getText() : null

  var sendBind = function (resource) {
    if (!resource) {
      resource = self.generateId()
    }
    self.jid.setResource(resource)

    self.send(
      new Element(&#x27;iq&#x27;, {
        type: &#x27;result&#x27;,
        id: stanza.attrs.id
      })
        .c(&#x27;bind&#x27;, { xmlns: NS_BIND })
        .c(&#x27;jid&#x27;).t(self.jid.toString()))
  }

  var listenerCount = 0
  if (typeof EventEmitter.listenerCount !== &#x27;undefined&#x27;) {
    listenerCount = EventEmitter.listenerCount(self, &#x27;bind&#x27;)
  } else {
    listenerCount = this.listeners(&#x27;bind&#x27;).length
  }
  if (listenerCount &#x3e; 0) {
    self.emit(&#x27;bind&#x27;, resource, function (error, resource) {
      if (error) {
        var element = new Element(&#x27;iq&#x27;, {
          type: &#x27;error&#x27;,
          id: stanza.attrs.id
        })
          .c(&#x27;error&#x27;, { type: error.type })
          .c(error.condition, { xmlns: NS_STANZAS })
        if (error.text) {
          element.t(error.text)
        }
        self.send(element)
      } else {
        sendBind(resource)
      }
    })
  } else {
    sendBind(resource)
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.C2SStream.prototype.onRegistration" id="apidoc.element.node-xmpp.server.C2SStream.prototype.onRegistration">
        function <span class="apidocSignatureSpan">node-xmpp.server.C2SStream.prototype.</span>onRegistration
        <span class="apidocSignatureSpan">(stanza)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">onRegistration = function (stanza) {
  var self = this
  var register = stanza.getChild(&#x27;query&#x27;, NS_REGISTER)
  var reply = new Element(&#x27;iq&#x27;, { type: &#x27;result&#x27; })
  if (stanza.attrs.id) {
    reply.attrs.id = stanza.attrs.id
  }

  if (stanza.attrs.type === &#x27;get&#x27;) {
    var instructions = &#x27;Choose a username and password for use &#x27; +
      &#x27;with this service. &#x27;
    reply.c(&#x27;query&#x27;, { xmlns: NS_REGISTER })
      .c(&#x27;instructions&#x27;).t(instructions).up()
      .c(&#x27;username&#x27;).up()
      .c(&#x27;password&#x27;)
    proceed()
  } else if (stanza.attrs.type === &#x27;set&#x27;) {
    var jid = new JID(register.getChildText(&#x27;username&#x27;), this.server.options.domain)
    this.emit(&#x27;register&#x27;, {
      jid: jid,
      username: register.getChildText(&#x27;username&#x27;),
      password: register.getChildText(&#x27;password&#x27;),
      client: self
    }, function (error) {
      if (!error) {
        self.emit(&#x27;registration-success&#x27;, self.jid)
      } else {
        self.emit(&#x27;registration-failure&#x27;, jid)
        reply.attrs.type = &#x27;error&#x27;
        reply
          .c(&#x27;error&#x27;, {
            code: &#x27;&#x27; + error.code,
            type: error.type
          })
          .c(error.condition, {
            xmlns: NS_STANZAS
          }).up()
          .c(&#x27;text&#x27;, {
            xmlns: NS_STANZAS
          })
          .t(error.message)
      }
      proceed()
    })
  }

  function proceed () {
    self.send(reply)
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.C2SStream.prototype.onSession" id="apidoc.element.node-xmpp.server.C2SStream.prototype.onSession">
        function <span class="apidocSignatureSpan">node-xmpp.server.C2SStream.prototype.</span>onSession
        <span class="apidocSignatureSpan">(stanza)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">onSession = function (stanza) {
  var result = new IQ({type: &#x27;result&#x27;, id: stanza.attrs.id})
    .c(&#x27;session&#x27;, {xmlns: NS_SESSION})
  this.send(result)
  this.emit(&#x27;online&#x27;)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.C2SStream.prototype.onStanza" id="apidoc.element.node-xmpp.server.C2SStream.prototype.onStanza">
        function <span class="apidocSignatureSpan">node-xmpp.server.C2SStream.prototype.</span>onStanza
        <span class="apidocSignatureSpan">(stanza)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">onStanza = function (stanza) {
  if (this.jid) stanza.attrs.from = this.jid.toString()

  if (stanza.is(&#x27;starttls&#x27;, this.connection.NS_XMPP_TLS)) {
    var toSend = new Element(
      &#x27;proceed&#x27;, { xmlns: this.connection.NS_XMPP_TLS }
    )
    this.send(toSend)
    this.connection.setSecure(this.server.credentials, true)
  } else if (stanza.is(&#x27;auth&#x27;, NS_XMPP_SASL) || stanza.is(&#x27;response&#x27;, NS_XMPP_SASL)) {
    this.onAuth(stanza)
  } else if (stanza.is(&#x27;iq&#x27;) &#x26;&#x26; stanza.getChild(&#x27;query&#x27;, NS_REGISTER)) {
    this.onRegistration(stanza)
  } else if (this.authenticated) {
    this.onAuthStanza(stanza)
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.C2SStream.prototype.pause" id="apidoc.element.node-xmpp.server.C2SStream.prototype.pause">
        function <span class="apidocSignatureSpan">node-xmpp.server.C2SStream.prototype.</span>pause
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">pause = function () {
  if (this.connection.pause) {
    this.connection.pause()
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.C2SStream.prototype.resume" id="apidoc.element.node-xmpp.server.C2SStream.prototype.resume">
        function <span class="apidocSignatureSpan">node-xmpp.server.C2SStream.prototype.</span>resume
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">resume = function () {
  if (this.connection.resume) {
    this.connection.resume()
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.C2SStream.prototype.send" id="apidoc.element.node-xmpp.server.C2SStream.prototype.send">
        function <span class="apidocSignatureSpan">node-xmpp.server.C2SStream.prototype.</span>send
        <span class="apidocSignatureSpan">(stanza)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">send = function (stanza) {
  if (stanza.root) stanza = stanza.root()
  this.connection.send(stanza)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.C2SStream.prototype.sendAuthError" id="apidoc.element.node-xmpp.server.C2SStream.prototype.sendAuthError">
        function <span class="apidocSignatureSpan">node-xmpp.server.C2SStream.prototype.</span>sendAuthError
        <span class="apidocSignatureSpan">(error)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">sendAuthError = function (error) {
  if (this.jid) {
    this.emit(&#x27;auth-failure&#x27;, this.jid)
  }
  var message = error &#x26;&#x26; error.message ? error.message : &#x27;Authentication failure&#x27;
  var type = error &#x26;&#x26; error.type ? error.type : &#x27;not-authorized&#x27;
  this.send(new Element(&#x27;failure&#x27;, {
    xmlns: NS_XMPP_SASL
  })
    .c(type).up()
    .c(&#x27;text&#x27;).t(message))
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.C2SStream.prototype.sendFeatures" id="apidoc.element.node-xmpp.server.C2SStream.prototype.sendFeatures">
        function <span class="apidocSignatureSpan">node-xmpp.server.C2SStream.prototype.</span>sendFeatures
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">sendFeatures = function () {
  // trilian requires features to be prefixed https://github.com/node-xmpp/node-xmpp-server/pull/125
  var features = new Element(&#x27;stream:features&#x27;, {xmlns: NS_STREAMS, &#x27;xmlns:stream&#x27;: NS_STREAMS})
  if (!this.authenticated) {
    if (this.server &#x26;&#x26; this.server.availableSaslMechanisms) {
      // TLS
      var opts = this.server.options
      if (opts &#x26;&#x26; opts.tls &#x26;&#x26; !this.connection.isSecure) {
        features
          .c(&#x27;starttls&#x27;, { xmlns: this.connection.NS_XMPP_TLS })
          .c(&#x27;required&#x27;)
      }
      this.mechanisms = this.server.getSaslMechanisms()
    } else {
      this.mechanisms = []
    }

    var mechanismsEl = features.c(
      &#x27;mechanisms&#x27;, { xmlns: NS_XMPP_SASL })
    this.mechanisms.forEach(function (mech) {
      mechanismsEl.c(&#x27;mechanism&#x27;).t(mech.prototype.name)
    })
  } else {
    features.c(&#x27;bind&#x27;, { xmlns: NS_BIND })
    features.c(&#x27;session&#x27;, { xmlns: NS_SESSION })
  }
  this.send(features)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.C2SStream.prototype.startStream" id="apidoc.element.node-xmpp.server.C2SStream.prototype.startStream">
        function <span class="apidocSignatureSpan">node-xmpp.server.C2SStream.prototype.</span>startStream
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">startStream = function () {
  if (this.connection.startStream) {
    this.connection.startStream()
  }
  this.sendFeatures()
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.node-xmpp.server.ComponentServer" id="apidoc.module.node-xmpp.server.ComponentServer">module node-xmpp.server.ComponentServer</a></h1>


    <h2>
        <a href="#apidoc.element.node-xmpp.server.ComponentServer.ComponentServer" id="apidoc.element.node-xmpp.server.ComponentServer.ComponentServer">
        function <span class="apidocSignatureSpan">node-xmpp.server.</span>ComponentServer
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function ComponentServer(options) {
  var server = this.server = (options &#x26;&#x26; options.server || net.createServer())
  server.on(&#x27;connection&#x27;, this.acceptConnection.bind(this))
  server.on(&#x27;close&#x27;, this.emit.bind(this, &#x27;close&#x27;))
  server.on(&#x27;error&#x27;, this.emit.bind(this, &#x27;error&#x27;))
  server.on(&#x27;listening&#x27;, this.emit.bind(this, &#x27;listening&#x27;))

  Server.call(this, options)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.ComponentServer.super_" id="apidoc.element.node-xmpp.server.ComponentServer.super_">
        function <span class="apidocSignatureSpan">node-xmpp.server.ComponentServer.</span>super_
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Server(options) {
  EventEmitter.call(this)

  this.options = options || {}
  this.port = this.options.port || this.DEFAULT_PORT

  this.connections = new Set()

  this.on(&#x27;connection&#x27;, this.onConnection.bind(this))

  // node-xmpp events
  this.on(&#x27;listening&#x27;, this.emit.bind(this, &#x27;online&#x27;))
  this.on(&#x27;close&#x27;, this.emit.bind(this, &#x27;offline&#x27;))
  this.on(&#x27;close&#x27;, this.emit.bind(this, &#x27;shutdown&#x27;))

<span class="apidocCodeCommentSpan">  /* And now start listening to connections on the
   * port provided as an option.
   */
</span>  if (this.server &#x26;&#x26; this.options.autostart !== false) {
    this.listen()
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.node-xmpp.server.ComponentServer.prototype" id="apidoc.module.node-xmpp.server.ComponentServer.prototype">module node-xmpp.server.ComponentServer.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.node-xmpp.server.ComponentServer.prototype.Session" id="apidoc.element.node-xmpp.server.ComponentServer.prototype.Session">
        function <span class="apidocSignatureSpan">node-xmpp.server.ComponentServer.prototype.</span>Session
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function ComponentSession(opts) {
  EventEmitter.call(this)
  this.connection = opts.connection || new Connection()
  this._addConnectionListeners()
  this.connection.xmlns[&#x27;&#x27;] = this.NS_COMPONENT
  this.connection.xmlns.stream = this.NS_STREAM
  if (this.connection.connect) {
    this.connection.connect({socket: opts.socket})
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.node-xmpp.server.ComponentStream" id="apidoc.module.node-xmpp.server.ComponentStream">module node-xmpp.server.ComponentStream</a></h1>


    <h2>
        <a href="#apidoc.element.node-xmpp.server.ComponentStream.ComponentStream" id="apidoc.element.node-xmpp.server.ComponentStream.ComponentStream">
        function <span class="apidocSignatureSpan">node-xmpp.server.</span>ComponentStream
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function ComponentSession(opts) {
  EventEmitter.call(this)
  this.connection = opts.connection || new Connection()
  this._addConnectionListeners()
  this.connection.xmlns[&#x27;&#x27;] = this.NS_COMPONENT
  this.connection.xmlns.stream = this.NS_STREAM
  if (this.connection.connect) {
    this.connection.connect({socket: opts.socket})
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.ComponentStream.super_" id="apidoc.element.node-xmpp.server.ComponentStream.super_">
        function <span class="apidocSignatureSpan">node-xmpp.server.ComponentStream.</span>super_
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function EventEmitter() {
  EventEmitter.init.call(this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.node-xmpp.server.ComponentStream.prototype" id="apidoc.module.node-xmpp.server.ComponentStream.prototype">module node-xmpp.server.ComponentStream.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.node-xmpp.server.ComponentStream.prototype._addConnectionListeners" id="apidoc.element.node-xmpp.server.ComponentStream.prototype._addConnectionListeners">
        function <span class="apidocSignatureSpan">node-xmpp.server.ComponentStream.prototype.</span>_addConnectionListeners
        <span class="apidocSignatureSpan">(con)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_addConnectionListeners = function (con) {
  con = con || this.connection
  con.on(&#x27;streamStart&#x27;, this.onStreamStart.bind(this))
  con.on(&#x27;stanza&#x27;, this.onStanza.bind(this))
  con.on(&#x27;drain&#x27;, this.emit.bind(this, &#x27;drain&#x27;))
  con.on(&#x27;data&#x27;, this.emit.bind(this, &#x27;data&#x27;))
  con.on(&#x27;end&#x27;, this.emit.bind(this, &#x27;end&#x27;))
  con.on(&#x27;close&#x27;, this.emit.bind(this, &#x27;close&#x27;))
  con.on(&#x27;error&#x27;, this.emit.bind(this, &#x27;error&#x27;))
  con.on(&#x27;connect&#x27;, this.emit.bind(this, &#x27;connect&#x27;))
  con.on(&#x27;reconnect&#x27;, this.emit.bind(this, &#x27;reconnect&#x27;))
  con.on(&#x27;disconnect&#x27;, this.emit.bind(this, &#x27;disconnect&#x27;))
  con.on(&#x27;disconnect&#x27;, this.emit.bind(this, &#x27;offline&#x27;))
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.ComponentStream.prototype._sha1Hex" id="apidoc.element.node-xmpp.server.ComponentStream.prototype._sha1Hex">
        function <span class="apidocSignatureSpan">node-xmpp.server.ComponentStream.prototype.</span>_sha1Hex
        <span class="apidocSignatureSpan">(s)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_sha1Hex = function (s) {
  var hash = crypto.createHash(&#x27;sha1&#x27;)
  hash.update(s)
  return hash.digest(&#x27;hex&#x27;)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.ComponentStream.prototype.end" id="apidoc.element.node-xmpp.server.ComponentStream.prototype.end">
        function <span class="apidocSignatureSpan">node-xmpp.server.ComponentStream.prototype.</span>end
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">end = function () {
  this.connection.end()
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.ComponentStream.prototype.onStanza" id="apidoc.element.node-xmpp.server.ComponentStream.prototype.onStanza">
        function <span class="apidocSignatureSpan">node-xmpp.server.ComponentStream.prototype.</span>onStanza
        <span class="apidocSignatureSpan">(stanza)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">onStanza = function (stanza) {
  if (!stanza.is(&#x27;handshake&#x27;)) {
    this.emit(&#x27;stanza&#x27;, stanza)
    return
  }

  if (stanza.getText() === this.expectedDigest) {
    this.emit(&#x27;auth-success&#x27;)
    this.connection.send(new Element(&#x27;handshake&#x27;))
    this.emit(&#x27;online&#x27;)
    this.authenticated = true
  } else {
    this.connection.error(&#x27;not-authorized&#x27;, &#x27;not authorized&#x27;)
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.ComponentStream.prototype.onStreamStart" id="apidoc.element.node-xmpp.server.ComponentStream.prototype.onStreamStart">
        function <span class="apidocSignatureSpan">node-xmpp.server.ComponentStream.prototype.</span>onStreamStart
        <span class="apidocSignatureSpan">(streamAttrs)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">onStreamStart = function (streamAttrs) {
  if (streamAttrs.xmlns !== this.NS_COMPONENT) {
    this.connection.error(&#x27;invalid-namespace&#x27;, &#x22;invalid namespace &#x27;&#x22; + streamAttrs.xmlns + &#x22;&#x27;&#x22;)
    return
  }

  var self = this
  this.jid = new JID(streamAttrs.to)
  this.emit(&#x27;verify-component&#x27;, this.jid, function (err, password) {
    if (err) {
      self.connection.error(&#x27;host-unknown&#x27;, err.message || &#x27;unknown host&#x27;)
    } else {
      if (!streamAttrs.id) streamAttrs.id = Date.now()
      self.expectedDigest = self._sha1Hex((streamAttrs.id || &#x27;&#x27;) + password)
      self.connection.streamAttrs = streamAttrs
      self.connection.startStream()
    }
  })
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.ComponentStream.prototype.send" id="apidoc.element.node-xmpp.server.ComponentStream.prototype.send">
        function <span class="apidocSignatureSpan">node-xmpp.server.ComponentStream.prototype.</span>send
        <span class="apidocSignatureSpan">(stanza)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">send = function (stanza) {
  this.connection.send(stanza)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>






</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.node-xmpp.server.Router" id="apidoc.module.node-xmpp.server.Router">module node-xmpp.server.Router</a></h1>


    <h2>
        <a href="#apidoc.element.node-xmpp.server.Router.Router" id="apidoc.element.node-xmpp.server.Router.Router">
        function <span class="apidocSignatureSpan">node-xmpp.server.</span>Router
        <span class="apidocSignatureSpan">(s2sPort, bindAddress, opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Router(s2sPort, bindAddress, opts) {
  EventEmitter.call(this)
  this.ctxs = {}

  opts = opts || {}

  this.generateId = rack(opts.idBits, opts.idBitsBase, opts.idBitsExpandBy)

  if (opts.secureDomains &#x26;&#x26; opts.secureDomains.length) {
    opts.secureDomains.forEach(this.addSecureDomain, this)
  }

  // start tcp socket
  this._server = net.createServer(function (socket) {
    this.acceptConnection(socket)
  }.bind(this)).listen(s2sPort || 5269, bindAddress || &#x27;::&#x27;)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.Router.super_" id="apidoc.element.node-xmpp.server.Router.super_">
        function <span class="apidocSignatureSpan">node-xmpp.server.Router.</span>super_
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function EventEmitter() {
  EventEmitter.init.call(this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.node-xmpp.server.Router.prototype" id="apidoc.module.node-xmpp.server.Router.prototype">module node-xmpp.server.Router.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.node-xmpp.server.Router.prototype.acceptConnection" id="apidoc.element.node-xmpp.server.Router.prototype.acceptConnection">
        function <span class="apidocSignatureSpan">node-xmpp.server.Router.prototype.</span>acceptConnection
        <span class="apidocSignatureSpan">(socket)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">acceptConnection = function (socket) {
  debug(&#x27;accept a new connection&#x27; + socket)
  var self = this

  var inStream = new IncomingServer({
    streamId: this.generateId(),
    reconnect: false,
    requestCert: true,
    socket: socket
  })

  // send features supported by this domain
  inStream.on(&#x27;streamStart&#x27;, function (attrs) {
    inStream.fromDomain = nameprep(attrs.from)
    inStream.toDomain = nameprep(attrs.to)
    var domainContext = self.getContext(inStream.toDomain)
    var credentials = domainContext.credentials
    if (credentials) {
      inStream.opts.tls = true
      inStream.credentials = credentials
      inStream.secureDomain = domainContext.secureDomain
    }
    inStream.sendFeatures()
  })

  inStream.on(&#x27;auth&#x27;, function (type) {
    if (type === &#x27;SASL&#x27;) {
      inStream.onSASLAuth()
    }
    self.getContext(inStream.toDomain).addInStream(inStream.fromDomain, inStream)
  })

  // incoming server wants to verify an outgoing connection of ours
  inStream.on(&#x27;dialbackVerify&#x27;, function (from, to, id, key) {
    from = nameprep(from)
    to = nameprep(to)
    if (self.hasContext(to)) {
      self.getContext(to).verifyDialback(from, id, key, function (isValid) {
        // look if this was a connection of ours
        inStream.send(dialbackkey.dialbackVerified(to, from, id, isValid))
      })
    } else {
      // we don&#x27;t host the &#x27;to&#x27; domain
      inStream.send(dialbackkey.dialbackVerified(to, from, id, false))
    }
  })

  // incoming connection wants to get verified
  inStream.on(&#x27;dialbackKey&#x27;, function (from, to, key) {
    from = nameprep(from)
    to = nameprep(to)
    if (self.hasContext(to)) {
      // trigger verification via outgoing connection
      self.getContext(to).verifyIncoming(from, inStream, key)
    } else {
      inStream.error(&#x27;host-unknown&#x27;, to + &#x27; is not served here&#x27;)
    }
  })
  return inStream
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.Router.prototype.addSecureDomain" id="apidoc.element.node-xmpp.server.Router.prototype.addSecureDomain">
        function <span class="apidocSignatureSpan">node-xmpp.server.Router.prototype.</span>addSecureDomain
        <span class="apidocSignatureSpan">(domain)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">addSecureDomain = function (domain) {
  this.getContext(nameprep(domain)).secureDomain = true
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.Router.prototype.close" id="apidoc.element.node-xmpp.server.Router.prototype.close">
        function <span class="apidocSignatureSpan">node-xmpp.server.Router.prototype.</span>close
        <span class="apidocSignatureSpan">(callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">close = function (callback) {
  debug(&#x27;closing server&#x27;)
  this._server.close(callback)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.Router.prototype.getContext" id="apidoc.element.node-xmpp.server.Router.prototype.getContext">
        function <span class="apidocSignatureSpan">node-xmpp.server.Router.prototype.</span>getContext
        <span class="apidocSignatureSpan">(domain)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getContext = function (domain) {
  if (this.ctxs.hasOwnProperty(domain)) {
    return this.ctxs[domain]
  } else {
    this.ctxs[domain] = new DomainContext(this, domain)
    return this.ctxs[domain]
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.Router.prototype.hasContext" id="apidoc.element.node-xmpp.server.Router.prototype.hasContext">
        function <span class="apidocSignatureSpan">node-xmpp.server.Router.prototype.</span>hasContext
        <span class="apidocSignatureSpan">(domain)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">hasContext = function (domain) {
  return this.ctxs.hasOwnProperty(domain)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.Router.prototype.loadCredentials" id="apidoc.element.node-xmpp.server.Router.prototype.loadCredentials">
        function <span class="apidocSignatureSpan">node-xmpp.server.Router.prototype.</span>loadCredentials
        <span class="apidocSignatureSpan">(domain, key, cert, ca)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">loadCredentials = function (domain, key, cert, ca) {
  var creds = {
    key: key,
    cert: cert,
    ca: ca
  }
  this.getContext(domain).setCredentials(tls.createSecureContext(creds))
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.Router.prototype.loadCredentialsFromFile" id="apidoc.element.node-xmpp.server.Router.prototype.loadCredentialsFromFile">
        function <span class="apidocSignatureSpan">node-xmpp.server.Router.prototype.</span>loadCredentialsFromFile
        <span class="apidocSignatureSpan">(domain, keyPath, certPath, caPath)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">loadCredentialsFromFile = function (domain, keyPath, certPath, caPath) {
  var key = fs.readFileSync(keyPath, &#x27;ascii&#x27;)
  var cert = fs.readFileSync(certPath, &#x27;ascii&#x27;)
  var ca = caPath ? fs.readFileSync(caPath, &#x27;ascii&#x27;) : undefined

  this.loadCredentials(domain, key, cert, ca)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.Router.prototype.register" id="apidoc.element.node-xmpp.server.Router.prototype.register">
        function <span class="apidocSignatureSpan">node-xmpp.server.Router.prototype.</span>register
        <span class="apidocSignatureSpan">(domain, listener)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">register = function (domain, listener) {
  domain = nameprep(domain)
  debug(&#x27;register a new domain: &#x27; + domain)
  this.getContext(domain).stanzaListener = listener
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.Router.prototype.send" id="apidoc.element.node-xmpp.server.Router.prototype.send">
        function <span class="apidocSignatureSpan">node-xmpp.server.Router.prototype.</span>send
        <span class="apidocSignatureSpan">(stanza)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">send = function (stanza) {
  debug(&#x27;send: &#x27; + stanza.root().toString())

  if (stanza.root) {
    stanza = stanza.root()
  }

  var to = stanza.attrs &#x26;&#x26; stanza.attrs.to
  var toDomain = to &#x26;&#x26; (new JID(to)).getDomain()
  if (toDomain &#x26;&#x26; this.hasContext(toDomain)) {
    debug(&#x27;inner routing&#x27;)
    // inner routing
    this.getContext(toDomain).receive(stanza)
  } else if (stanza.attrs &#x26;&#x26; stanza.attrs.from) {
    debug(&#x27;s2s routing&#x27;)
    // route to domain context for s2s
    var domain = (new JID(stanza.attrs.from)).getDomain()
    this.getContext(domain).send(stanza)
  } else {
    throw new Error(&#x27;Sending stanza from a domain we do not host&#x27;)
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.Router.prototype.unregister" id="apidoc.element.node-xmpp.server.Router.prototype.unregister">
        function <span class="apidocSignatureSpan">node-xmpp.server.Router.prototype.</span>unregister
        <span class="apidocSignatureSpan">(domain)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">unregister = function (domain) {
  debug(&#x27;unregister a domain: &#x27; + domain)
  if (this.hasContext(domain)) {
    this.ctxs[domain].end()

    delete this.ctxs[domain]
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>












</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.node-xmpp.server.WebSocketServer" id="apidoc.module.node-xmpp.server.WebSocketServer">module node-xmpp.server.WebSocketServer</a></h1>


    <h2>
        <a href="#apidoc.element.node-xmpp.server.WebSocketServer.WebSocketServer" id="apidoc.element.node-xmpp.server.WebSocketServer.WebSocketServer">
        function <span class="apidocSignatureSpan">node-xmpp.server.</span>WebSocketServer
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function WebSocketServer(opts) {
  var options = opts || {}
  var server = this.server = serverStop(options.server || http.createServer())
  server.on(&#x27;close&#x27;, this.emit.bind(this, &#x27;close&#x27;))
  server.on(&#x27;error&#x27;, this.emit.bind(this, &#x27;error&#x27;))
  server.on(&#x27;listening&#x27;, this.emit.bind(this, &#x27;listening&#x27;))

  var WS = this.WS = new ws.Server({server: server})
  var self = this
  WS.on(&#x27;connection&#x27;, function (socket) {
    self.acceptConnection(new Socket(socket))
  })

  options.streamOpen = &#x27;open&#x27;
  options.streamClose = &#x27;close&#x27;
  options.streamAttrs = {&#x27;xmlns&#x27;: XMPP_FRAMING}

  C2SServer.call(this, options)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.WebSocketServer.super_" id="apidoc.element.node-xmpp.server.WebSocketServer.super_">
        function <span class="apidocSignatureSpan">node-xmpp.server.WebSocketServer.</span>super_
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function C2SServer(options) {
  Server.call(this, options)

  this.availableSaslMechanisms = [Plain]

  // don&#x27;t allow anybody by default when using client cert auth
  if ((this.options.requestCert) &#x26;&#x26;
    (this.options.rejectUnauthorized !== false)) {
    this.options.rejectUnauthorized = true
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.node-xmpp.server._Server" id="apidoc.module.node-xmpp.server._Server">module node-xmpp.server._Server</a></h1>


    <h2>
        <a href="#apidoc.element.node-xmpp.server._Server._Server" id="apidoc.element.node-xmpp.server._Server._Server">
        function <span class="apidocSignatureSpan">node-xmpp.server.</span>_Server
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Server(options) {
  EventEmitter.call(this)

  this.options = options || {}
  this.port = this.options.port || this.DEFAULT_PORT

  this.connections = new Set()

  this.on(&#x27;connection&#x27;, this.onConnection.bind(this))

  // node-xmpp events
  this.on(&#x27;listening&#x27;, this.emit.bind(this, &#x27;online&#x27;))
  this.on(&#x27;close&#x27;, this.emit.bind(this, &#x27;offline&#x27;))
  this.on(&#x27;close&#x27;, this.emit.bind(this, &#x27;shutdown&#x27;))

<span class="apidocCodeCommentSpan">  /* And now start listening to connections on the
   * port provided as an option.
   */
</span>  if (this.server &#x26;&#x26; this.options.autostart !== false) {
    this.listen()
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server._Server.super_" id="apidoc.element.node-xmpp.server._Server.super_">
        function <span class="apidocSignatureSpan">node-xmpp.server._Server.</span>super_
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function EventEmitter() {
  EventEmitter.init.call(this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.node-xmpp.server._Server.prototype" id="apidoc.module.node-xmpp.server._Server.prototype">module node-xmpp.server._Server.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.node-xmpp.server._Server.prototype.acceptConnection" id="apidoc.element.node-xmpp.server._Server.prototype.acceptConnection">
        function <span class="apidocSignatureSpan">node-xmpp.server._Server.prototype.</span>acceptConnection
        <span class="apidocSignatureSpan">(socket)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">acceptConnection = function (socket) {
  var session = new this.Session({
    rejectUnauthorized: this.options.rejectUnauthorized,
    requestCert: this.options.requestCert,
    socket: socket,
    server: this,
    streamOpen: this.options.streamOpen,
    streamClose: this.options.streamClose,
    streamAttrs: this.options.streamAttrs
  })
  socket.session = session
  this.emit(&#x27;connection&#x27;, session)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server._Server.prototype.close" id="apidoc.element.node-xmpp.server._Server.prototype.close">
        function <span class="apidocSignatureSpan">node-xmpp.server._Server.prototype.</span>close
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">close = function () {
  this.server.close.apply(this.server, arguments)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server._Server.prototype.end" id="apidoc.element.node-xmpp.server._Server.prototype.end">
        function <span class="apidocSignatureSpan">node-xmpp.server._Server.prototype.</span>end
        <span class="apidocSignatureSpan">(fn)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">end = function (fn) {
  fn = fn || function () {}
  this.once(&#x27;close&#x27;, fn)
  this.close()
  this.endSessions()
  if (this.server &#x26;&#x26; this.server.stop) this.server.stop()
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server._Server.prototype.endSessions" id="apidoc.element.node-xmpp.server._Server.prototype.endSessions">
        function <span class="apidocSignatureSpan">node-xmpp.server._Server.prototype.</span>endSessions
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">endSessions = function () {
  var self = this
  this.connections.forEach(function (session) {
    session.removeListener(&#x27;close&#x27;, self.onConnectionClosed)
    session.end()
    self.connections.delete(session)
  })
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server._Server.prototype.listen" id="apidoc.element.node-xmpp.server._Server.prototype.listen">
        function <span class="apidocSignatureSpan">node-xmpp.server._Server.prototype.</span>listen
        <span class="apidocSignatureSpan">(port, host, fn)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">listen = function (port, host, fn) {
  if (typeof port === &#x27;function&#x27;) {
    fn = port
    port = host = null
  } else if (typeof host === &#x27;function&#x27;) {
    fn = host
    host = null
  }

  port = port || this.port
  host = host || this.options.host || &#x27;::&#x27;

  this.server.listen(port, host, fn)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server._Server.prototype.onConnection" id="apidoc.element.node-xmpp.server._Server.prototype.onConnection">
        function <span class="apidocSignatureSpan">node-xmpp.server._Server.prototype.</span>onConnection
        <span class="apidocSignatureSpan">(connection)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">onConnection = function (connection) {
  this.connections.add(connection)
  connection.once(&#x27;close&#x27;, this.onConnectionClosed.bind(this, connection))
  // backward compatibility FIXME remove me
  this.emit(&#x27;connect&#x27;, connection)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server._Server.prototype.onConnectionClosed" id="apidoc.element.node-xmpp.server._Server.prototype.onConnectionClosed">
        function <span class="apidocSignatureSpan">node-xmpp.server._Server.prototype.</span>onConnectionClosed
        <span class="apidocSignatureSpan">(connection)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">onConnectionClosed = function (connection) {
  this.connections.delete(connection)
// FIXME should we remove all listeners?
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server._Server.prototype.shutdown" id="apidoc.element.node-xmpp.server._Server.prototype.shutdown">
        function <span class="apidocSignatureSpan">node-xmpp.server._Server.prototype.</span>shutdown
        <span class="apidocSignatureSpan">(fn)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">shutdown = function (fn) {
  fn = fn || function () {}
  this.once(&#x27;close&#x27;, fn)
  this.close()
  this.endSessions()
  if (this.server &#x26;&#x26; this.server.stop) this.server.stop()
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>






</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.node-xmpp.server.auth" id="apidoc.module.node-xmpp.server.auth">module node-xmpp.server.auth</a></h1>


    <h2>
        <a href="#apidoc.element.node-xmpp.server.auth.AbstractMechanism" id="apidoc.element.node-xmpp.server.auth.AbstractMechanism">
        function <span class="apidocSignatureSpan">node-xmpp.server.auth.</span>AbstractMechanism
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Mechanism() {}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.auth.Anonymous" id="apidoc.element.node-xmpp.server.auth.Anonymous">
        function <span class="apidocSignatureSpan">node-xmpp.server.auth.</span>Anonymous
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Anonymous() {}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.auth.DigestMD5" id="apidoc.element.node-xmpp.server.auth.DigestMD5">
        function <span class="apidocSignatureSpan">node-xmpp.server.auth.</span>DigestMD5
        <span class="apidocSignatureSpan">(domain)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function DigestMD5(domain) {
  this.nonce = generateNonce()
  this.nonceCount = 0
  this.authcid = null
  this.actAs = null
  this.realm = null
  this.algorithm = &#x27;md5-sess&#x27;
  this.charset = &#x27;utf-8&#x27;
  this.qop = &#x27;auth&#x27;
  this.domain = domain
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.auth.Mechanism" id="apidoc.element.node-xmpp.server.auth.Mechanism">
        function <span class="apidocSignatureSpan">node-xmpp.server.auth.</span>Mechanism
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Mechanism() {}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.auth.Plain" id="apidoc.element.node-xmpp.server.auth.Plain">
        function <span class="apidocSignatureSpan">node-xmpp.server.auth.</span>Plain
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Plain() {}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.auth.XOAuth2" id="apidoc.element.node-xmpp.server.auth.XOAuth2">
        function <span class="apidocSignatureSpan">node-xmpp.server.auth.</span>XOAuth2
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function XOAuth2() {}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.node-xmpp.server.auth.AbstractMechanism.prototype" id="apidoc.module.node-xmpp.server.auth.AbstractMechanism.prototype">module node-xmpp.server.auth.AbstractMechanism.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.node-xmpp.server.auth.AbstractMechanism.prototype.authenticate" id="apidoc.element.node-xmpp.server.auth.AbstractMechanism.prototype.authenticate">
        function <span class="apidocSignatureSpan">node-xmpp.server.auth.AbstractMechanism.prototype.</span>authenticate
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">authenticate = function () {}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.auth.AbstractMechanism.prototype.extractSasl" id="apidoc.element.node-xmpp.server.auth.AbstractMechanism.prototype.extractSasl">
        function <span class="apidocSignatureSpan">node-xmpp.server.auth.AbstractMechanism.prototype.</span>extractSasl
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">extractSasl = function () {
  throw new Error(&#x27;This is an abstract method, you should overrride it&#x27;)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.auth.AbstractMechanism.prototype.failure" id="apidoc.element.node-xmpp.server.auth.AbstractMechanism.prototype.failure">
        function <span class="apidocSignatureSpan">node-xmpp.server.auth.AbstractMechanism.prototype.</span>failure
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">failure = function () {}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.auth.AbstractMechanism.prototype.manageAuth" id="apidoc.element.node-xmpp.server.auth.AbstractMechanism.prototype.manageAuth">
        function <span class="apidocSignatureSpan">node-xmpp.server.auth.AbstractMechanism.prototype.</span>manageAuth
        <span class="apidocSignatureSpan">(stanza)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">manageAuth = function (stanza) {
  var self = this

  var auth = new Buffer(stanza.getText(), &#x27;base64&#x27;).toString(&#x27;utf8&#x27;)
  this.authenticate(this.extractSasl(auth), function (err, user) {
    if (!err &#x26;&#x26; user) {
      self.success(user)
    } else {
      self.failure(err)
    }
  })
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.auth.AbstractMechanism.prototype.success" id="apidoc.element.node-xmpp.server.auth.AbstractMechanism.prototype.success">
        function <span class="apidocSignatureSpan">node-xmpp.server.auth.AbstractMechanism.prototype.</span>success
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">success = function () {}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.node-xmpp.server.auth.Anonymous.prototype" id="apidoc.module.node-xmpp.server.auth.Anonymous.prototype">module node-xmpp.server.auth.Anonymous.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.node-xmpp.server.auth.Anonymous.prototype.extractSasl" id="apidoc.element.node-xmpp.server.auth.Anonymous.prototype.extractSasl">
        function <span class="apidocSignatureSpan">node-xmpp.server.auth.Anonymous.prototype.</span>extractSasl
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">extractSasl = function () {
  var user = crypto.randomBytes(16).toString(&#x27;hex&#x27;)
  return { username: user }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.node-xmpp.server.auth.DigestMD5.prototype" id="apidoc.module.node-xmpp.server.auth.DigestMD5.prototype">module node-xmpp.server.auth.DigestMD5.prototype</a></h1>




    <h2>
        <a href="#apidoc.element.node-xmpp.server.auth.DigestMD5.prototype.auth" id="apidoc.element.node-xmpp.server.auth.DigestMD5.prototype.auth">
        function <span class="apidocSignatureSpan">node-xmpp.server.auth.DigestMD5.prototype.</span>auth
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">auth = function () {
  return &#x27;&#x27;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.auth.DigestMD5.prototype.checkResponse" id="apidoc.element.node-xmpp.server.auth.DigestMD5.prototype.checkResponse">
        function <span class="apidocSignatureSpan">node-xmpp.server.auth.DigestMD5.prototype.</span>checkResponse
        <span class="apidocSignatureSpan">(s)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">checkResponse = function (s) {
  var dict = parseDict(s)
  this.authcid = this.username = dict.username

  this.digestUri = dict[&#x27;digest-uri&#x27;]
  if (dict.nonce !== this.nonce) return false
  if (!dict.cnonce) return false

  // dict[&#x27;serv-type&#x27;] should be xmpp

  if (dict.nc) {
    this.nc = dict.nc
  }
  this.cnonce = dict.cnonce
  if (this.charset !== dict.charset) return false

  this.response = dict.response
  return true
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.auth.DigestMD5.prototype.getNC" id="apidoc.element.node-xmpp.server.auth.DigestMD5.prototype.getNC">
        function <span class="apidocSignatureSpan">node-xmpp.server.auth.DigestMD5.prototype.</span>getNC
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getNC = function () {
  return rjust(this.nonceCount.toString(), 8, &#x27;0&#x27;)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.auth.DigestMD5.prototype.loginFailed" id="apidoc.element.node-xmpp.server.auth.DigestMD5.prototype.loginFailed">
        function <span class="apidocSignatureSpan">node-xmpp.server.auth.DigestMD5.prototype.</span>loginFailed
        <span class="apidocSignatureSpan">(server)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">loginFailed = function (server) {
  var jid = false
  if (this.username) {
    jid = new JID(this.username, server.serverdomain ? server.serverdomain.toString() : &#x27;&#x27;)
  }

  server.emit(&#x27;auth-failure&#x27;, jid)
  server.send(new Element(&#x27;response&#x27;, {
    xmlns: NS_XMPP_SASL
  }))
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.auth.DigestMD5.prototype.manageAuth" id="apidoc.element.node-xmpp.server.auth.DigestMD5.prototype.manageAuth">
        function <span class="apidocSignatureSpan">node-xmpp.server.auth.DigestMD5.prototype.</span>manageAuth
        <span class="apidocSignatureSpan">(stanza, server)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">manageAuth = function (stanza, server) {
  if (stanza.is(&#x27;auth&#x27;, NS_XMPP_SASL)) {
    // send initial challenge to client
    var challenge = new Element(&#x27;challenge&#x27;, {
      xmlns: NS_XMPP_SASL
    }).t(this.serverChallenge())
    server.send(challenge)
  } else if (stanza.is(&#x27;response&#x27;, NS_XMPP_SASL) &#x26;&#x26; stanza.getText() !== &#x27;&#x27;) {
    // response from client with challenge
    var responseValid = this.checkResponse(new Buffer(stanza.getText(), &#x27;base64&#x27;))
    var self = this
    if (responseValid) {
      var user = {
        &#x27;username&#x27;: self.authcid
      }
      this.authenticate(user, function (err, user) {
        // send final challenge and wait for response from user
        if (self.response === self.responseValue(new Buffer(stanza.getText(), &#x27;base64&#x27;), user.password)) {
          var challenge = new Element(&#x27;challenge&#x27;, {
            xmlns: NS_XMPP_SASL
          })
            .t(new Buffer(&#x27;rspauth=ea40f60335c427b5527b84dbabcdfffd&#x27;).toString(&#x27;base64&#x27;))
          server.send(challenge)
          delete user.password
          self.user = user
        } else {
          // no authenticated &#x3c;response xmlns=&#x27;urn:ietf:params:xml:ns:xmpp-sasl&#x27;/&#x3e;
          self.failure(err)
        }
      })
    } else {
      // error if we are not able to authenticate the user
      self.failure(new Error(&#x27;Invalid response&#x27;))
    }
  } else if (stanza.is(&#x27;response&#x27;, NS_XMPP_SASL) &#x26;&#x26; this.user) {
    // here we are successfully authenticated and are able to call the callback
    this.success(this.user)
  } else if (stanza.is(&#x27;response&#x27;, NS_XMPP_SASL)) {
    // client wants to skip mechanism steps
    this.failure(new Error(&#x27;Invalid response&#x27;))
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.auth.DigestMD5.prototype.responseValue" id="apidoc.element.node-xmpp.server.auth.DigestMD5.prototype.responseValue">
        function <span class="apidocSignatureSpan">node-xmpp.server.auth.DigestMD5.prototype.</span>responseValue
        <span class="apidocSignatureSpan">(s, password)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">responseValue = function (s, password) {
  var dict = parseDict(s)
  if (dict.realm) {
    this.realm = dict.realm
  }

  var value
  if (dict.nonce &#x26;&#x26; dict.qop) {
    this.nonceCount++
    var a1 = md5(this.authcid + &#x27;:&#x27; +
        this.realm + &#x27;:&#x27; +
        password) + &#x27;:&#x27; +
      dict.nonce + &#x27;:&#x27; +
      this.cnonce

    if (this.actAs) a1 += &#x27;:&#x27; + this.actAs

    var a2 = &#x27;AUTHENTICATE:&#x27; + this.digestUri
    if ((dict.qop === &#x27;auth-int&#x27;) || (dict.qop === &#x27;auth-conf&#x27;)) {
      a2 += &#x27;:00000000000000000000000000000000&#x27;
    }

    value = md5Hex(md5Hex(a1) + &#x27;:&#x27; +
      dict.nonce + &#x27;:&#x27; +
      ((this.nc) ? this.nc : this.getNC()) + &#x27;:&#x27; +
      this.cnonce + &#x27;:&#x27; +
      dict.qop + &#x27;:&#x27; +
      md5Hex(a2))
  }
  return value
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.auth.DigestMD5.prototype.serverChallenge" id="apidoc.element.node-xmpp.server.auth.DigestMD5.prototype.serverChallenge">
        function <span class="apidocSignatureSpan">node-xmpp.server.auth.DigestMD5.prototype.</span>serverChallenge
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">serverChallenge = function () {
  var dict = {}
  dict.realm = this.domain
  this.nonce = dict.nonce = generateNonce()
  dict.qop = &#x27;auth&#x27;
  this.charset = dict.charset = &#x27;utf-8&#x27;
  dict.algorithm = &#x27;md5-sess&#x27;
  return new Buffer(encodeDict(dict)).toString(&#x27;base64&#x27;)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.node-xmpp.server.auth.Plain.prototype" id="apidoc.module.node-xmpp.server.auth.Plain.prototype">module node-xmpp.server.auth.Plain.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.node-xmpp.server.auth.Plain.prototype.extractSasl" id="apidoc.element.node-xmpp.server.auth.Plain.prototype.extractSasl">
        function <span class="apidocSignatureSpan">node-xmpp.server.auth.Plain.prototype.</span>extractSasl
        <span class="apidocSignatureSpan">(auth)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">extractSasl = function (auth) {
  var params = auth.split(&#x27;\x00&#x27;)
  var authRequest = {
    &#x27;username&#x27;: params[1],
    &#x27;password&#x27;: params[2]
  }
  return authRequest
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.node-xmpp.server.auth.XOAuth2.prototype" id="apidoc.module.node-xmpp.server.auth.XOAuth2.prototype">module node-xmpp.server.auth.XOAuth2.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.node-xmpp.server.auth.XOAuth2.prototype.extractSasl" id="apidoc.element.node-xmpp.server.auth.XOAuth2.prototype.extractSasl">
        function <span class="apidocSignatureSpan">node-xmpp.server.auth.XOAuth2.prototype.</span>extractSasl
        <span class="apidocSignatureSpan">(auth)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">extractSasl = function (auth) {
  var params = auth.split(&#x27;\x00&#x27;)
  var authRequest = {
    &#x27;jid&#x27;: params[1],
    &#x27;oauth_token&#x27;: params[2]
  }
  return authRequest
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.node-xmpp.server.component" id="apidoc.module.node-xmpp.server.component">module node-xmpp.server.component</a></h1>


    <h2>
        <a href="#apidoc.element.node-xmpp.server.component.Server" id="apidoc.element.node-xmpp.server.component.Server">
        function <span class="apidocSignatureSpan">node-xmpp.server.component.</span>Server
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function ComponentServer(options) {
  var server = this.server = (options &#x26;&#x26; options.server || net.createServer())
  server.on(&#x27;connection&#x27;, this.acceptConnection.bind(this))
  server.on(&#x27;close&#x27;, this.emit.bind(this, &#x27;close&#x27;))
  server.on(&#x27;error&#x27;, this.emit.bind(this, &#x27;error&#x27;))
  server.on(&#x27;listening&#x27;, this.emit.bind(this, &#x27;listening&#x27;))

  Server.call(this, options)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.server.component.Session" id="apidoc.element.node-xmpp.server.component.Session">
        function <span class="apidocSignatureSpan">node-xmpp.server.component.</span>Session
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function ComponentSession(opts) {
  EventEmitter.call(this)
  this.connection = opts.connection || new Connection()
  this._addConnectionListeners()
  this.connection.xmlns[&#x27;&#x27;] = this.NS_COMPONENT
  this.connection.xmlns.stream = this.NS_STREAM
  if (this.connection.connect) {
    this.connection.connect({socket: opts.socket})
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.node-xmpp.stanza" id="apidoc.module.node-xmpp.stanza">module node-xmpp.stanza</a></h1>


    <h2>
        <a href="#apidoc.element.node-xmpp.stanza.stanza" id="apidoc.element.node-xmpp.stanza.stanza">
        function <span class="apidocSignatureSpan">node-xmpp.</span>stanza
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function xml() {
  return tag.apply(null, arguments)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.stanza.Element" id="apidoc.element.node-xmpp.stanza.Element">
        function <span class="apidocSignatureSpan">node-xmpp.stanza.</span>Element
        <span class="apidocSignatureSpan">(name, attrs)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Element(name, attrs) {
  this.name = name
  this.parent = null
  this.children = []
  this.attrs = {}
  this.setAttrs(attrs)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.stanza.IQ" id="apidoc.element.node-xmpp.stanza.IQ">
        function <span class="apidocSignatureSpan">node-xmpp.stanza.</span>IQ
        <span class="apidocSignatureSpan">(attrs)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function IQ(attrs) {
  Stanza.call(this, &#x27;iq&#x27;, attrs)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.stanza.Message" id="apidoc.element.node-xmpp.stanza.Message">
        function <span class="apidocSignatureSpan">node-xmpp.stanza.</span>Message
        <span class="apidocSignatureSpan">(attrs)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Message(attrs) {
  Stanza.call(this, &#x27;message&#x27;, attrs)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.stanza.Parser" id="apidoc.element.node-xmpp.stanza.Parser">
        function <span class="apidocSignatureSpan">node-xmpp.stanza.</span>Parser
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Parser(options) {
  LtxParser.call(this, options)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.stanza.Presence" id="apidoc.element.node-xmpp.stanza.Presence">
        function <span class="apidocSignatureSpan">node-xmpp.stanza.</span>Presence
        <span class="apidocSignatureSpan">(attrs)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Presence(attrs) {
  Stanza.call(this, &#x27;presence&#x27;, attrs)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.stanza.Stanza" id="apidoc.element.node-xmpp.stanza.Stanza">
        function <span class="apidocSignatureSpan">node-xmpp.stanza.</span>Stanza
        <span class="apidocSignatureSpan">(name, attrs)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Stanza(name, attrs) {
  Element.call(this, name, attrs)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.stanza.attrsEqual" id="apidoc.element.node-xmpp.stanza.attrsEqual">
        function <span class="apidocSignatureSpan">node-xmpp.stanza.</span>attrsEqual
        <span class="apidocSignatureSpan">(a, b)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function attrsEqual(a, b) {
  var attrs = a.attrs
  var keys = Object.keys(attrs)
  var length = keys.length
  if (length !== Object.keys(b.attrs).length) return false
  for (var i = 0, l = length; i &#x3c; l; i++) {
    var key = keys[i]
    var value = attrs[key]
    if (value == null || b.attrs[key] == null) { // === null || undefined
      if (value !== b.attrs[key]) return false
    } else if (value.toString() !== b.attrs[key].toString()) {
      return false
    }
  }
  return true
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.stanza.childrenEqual" id="apidoc.element.node-xmpp.stanza.childrenEqual">
        function <span class="apidocSignatureSpan">node-xmpp.stanza.</span>childrenEqual
        <span class="apidocSignatureSpan">(a, b)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function childrenEqual(a, b) {
  var children = a.children
  var length = children.length
  if (length !== b.children.length) return false
  for (var i = 0, l = length; i &#x3c; l; i++) {
    var child = children[i]
    if (typeof child === &#x27;string&#x27;) {
      if (child !== b.children[i]) return false
    } else {
      if (!child.equals(b.children[i])) return false
    }
  }
  return true
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.stanza.clone" id="apidoc.element.node-xmpp.stanza.clone">
        function <span class="apidocSignatureSpan">node-xmpp.stanza.</span>clone
        <span class="apidocSignatureSpan">(el)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function clone(el) {
  var clone = new el.constructor(el.name, el.attrs)
  for (var i = 0; i &#x3c; el.children.length; i++) {
    var child = el.children[i]
    clone.cnode(child.clone ? child.clone() : child)
  }
  return clone
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.stanza.createElement" id="apidoc.element.node-xmpp.stanza.createElement">
        function <span class="apidocSignatureSpan">node-xmpp.stanza.</span>createElement
        <span class="apidocSignatureSpan">(name, attrs)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function createElement(name, attrs) {
  var el = new Element(name, attrs)

  for (var i = 2; i &#x3c; arguments.length; i++) {
    var child = arguments[i]
    if (child) el.cnode(child)
  }

  return el
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.stanza.createStanza" id="apidoc.element.node-xmpp.stanza.createStanza">
        function <span class="apidocSignatureSpan">node-xmpp.stanza.</span>createStanza
        <span class="apidocSignatureSpan">(name, attrs)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function createStanza(name, attrs) {
  var el

  switch (name) {
    case &#x27;presence&#x27;:
    case &#x27;message&#x27;:
    case &#x27;iq&#x27;:
      el = new Stanza(name, attrs)
      break
    default:
      el = new Element(name, attrs)
  }

  var children = Array.prototype.slice.call(arguments, 2)

  children.forEach(function (child) {
    el.cnode(child)
  })
  return el
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.stanza.equal" id="apidoc.element.node-xmpp.stanza.equal">
        function <span class="apidocSignatureSpan">node-xmpp.stanza.</span>equal
        <span class="apidocSignatureSpan">(a, b)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function equal(a, b) {
  if (!nameEqual(a, b)) return false
  if (!attrsEqual(a, b)) return false
  if (!childrenEqual(a, b)) return false
  return true
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.stanza.escapeXML" id="apidoc.element.node-xmpp.stanza.escapeXML">
        function <span class="apidocSignatureSpan">node-xmpp.stanza.</span>escapeXML
        <span class="apidocSignatureSpan">(s)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function escapeXML(s) {
  return s.replace(/&#x26;|&#x3c;|&#x3e;|&#x22;|&#x27;/g, escapeXMLReplace)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.stanza.escapeXMLText" id="apidoc.element.node-xmpp.stanza.escapeXMLText">
        function <span class="apidocSignatureSpan">node-xmpp.stanza.</span>escapeXMLText
        <span class="apidocSignatureSpan">(s)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function escapeXMLText(s) {
  return s.replace(/&#x26;|&#x3c;|&#x3e;/g, escapeXMLReplace)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.stanza.isElement" id="apidoc.element.node-xmpp.stanza.isElement">
        function <span class="apidocSignatureSpan">node-xmpp.stanza.</span>isElement
        <span class="apidocSignatureSpan">(el)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function isElement(el) {
  return el instanceof Element
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.stanza.isNode" id="apidoc.element.node-xmpp.stanza.isNode">
        function <span class="apidocSignatureSpan">node-xmpp.stanza.</span>isNode
        <span class="apidocSignatureSpan">(el)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function is(el) {
  return el instanceof Element || typeof el === &#x27;string&#x27;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.stanza.isText" id="apidoc.element.node-xmpp.stanza.isText">
        function <span class="apidocSignatureSpan">node-xmpp.stanza.</span>isText
        <span class="apidocSignatureSpan">(el)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function isText(el) {
  return typeof el === &#x27;string&#x27;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.stanza.ltx" id="apidoc.element.node-xmpp.stanza.ltx">
        function <span class="apidocSignatureSpan">node-xmpp.stanza.</span>ltx
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function ltx() {
  return tag.apply(null, arguments)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.stanza.nameEqual" id="apidoc.element.node-xmpp.stanza.nameEqual">
        function <span class="apidocSignatureSpan">node-xmpp.stanza.</span>nameEqual
        <span class="apidocSignatureSpan">(a, b)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function nameEqual(a, b) {
  return a.name === b.name
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.stanza.parse" id="apidoc.element.node-xmpp.stanza.parse">
        function <span class="apidocSignatureSpan">node-xmpp.stanza.</span>parse
        <span class="apidocSignatureSpan">(data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function parse(data) {
  return ltxParse(data, Parser)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.stanza.stringify" id="apidoc.element.node-xmpp.stanza.stringify">
        function <span class="apidocSignatureSpan">node-xmpp.stanza.</span>stringify
        <span class="apidocSignatureSpan">(el, indent, level)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function stringify(el, indent, level) {
  if (typeof indent === &#x27;number&#x27;) indent = &#x27; &#x27;.repeat(indent)
  if (!level) level = 1
  var s = &#x27;&#x27;
  s += &#x27;&#x3c;&#x27; + el.name

  Object.keys(el.attrs).forEach(function (k) {
    s += &#x27; &#x27; + k + &#x27;=&#x27; + &#x27;&#x22;&#x27; + el.attrs[k] + &#x27;&#x22;&#x27;
  })

  if (el.children.length) {
    s += &#x27;&#x3e;&#x27;
    el.children.forEach(function (child, i) {
      if (indent) s += &#x27;\n&#x27; + indent.repeat(level)
      if (typeof child === &#x27;string&#x27;) {
        s += child
      } else {
        s += stringify(child, indent, level + 1)
      }
    })
    if (indent) s += &#x27;\n&#x27; + indent.repeat(level - 1)
    s += &#x27;&#x3c;/&#x27; + el.name + &#x27;&#x3e;&#x27;
  } else {
    s += &#x27;/&#x3e;&#x27;
  }

  return s
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.stanza.tag" id="apidoc.element.node-xmpp.stanza.tag">
        function <span class="apidocSignatureSpan">node-xmpp.stanza.</span>tag
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function tag() {
  return parse(tagString.apply(null, arguments))
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.stanza.tagString" id="apidoc.element.node-xmpp.stanza.tagString">
        function <span class="apidocSignatureSpan">node-xmpp.stanza.</span>tagString
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function tagString() {
  var literals = arguments[0]

  var str = &#x27;&#x27;

  for (var i = 1; i &#x3c; arguments.length; i++) {
    str += literals[i - 1]
    str += escape(arguments[i])
  }
  str += literals[literals.length - 1]

  return str
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.stanza.unescapeXML" id="apidoc.element.node-xmpp.stanza.unescapeXML">
        function <span class="apidocSignatureSpan">node-xmpp.stanza.</span>unescapeXML
        <span class="apidocSignatureSpan">(s)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function unescapeXML(s) {
  return s.replace(/&#x26;(amp|#38|lt|#60|gt|#62|quot|#34|apos|#39);/g, unescapeXMLReplace)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-xmpp.stanza.unescapeXMLText" id="apidoc.element.node-xmpp.stanza.unescapeXMLText">
        function <span class="apidocSignatureSpan">node-xmpp.stanza.</span>unescapeXMLText
        <span class="apidocSignatureSpan">(s)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function unescapeXMLText(s) {
  return s.replace(/&#x26;(amp|#38|lt|#60|gt|#62);/g, unescapeXMLReplace)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
